(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,e,n){t.exports=n("zUnb")},"6Joi":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,o=n("mrSG"),s=n("q/0M"),a=n("zVF4"),u=n("S+S0"),c=n("x7I3"),h=i.SDK_VERSION,l=new s.Logger("@firebase/firestore");function f(){return l.logLevel===s.LogLevel.DEBUG?0:l.logLevel===s.LogLevel.SILENT?2:1}function p(t){switch(t){case 0:l.logLevel=s.LogLevel.DEBUG;break;case 1:l.logLevel=s.LogLevel.ERROR;break;case 2:l.logLevel=s.LogLevel.SILENT;break;default:l.error("Firestore ("+h+"): Invalid value passed to `setLogLevel`")}}function d(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(l.logLevel<=s.LogLevel.DEBUG){var i=n.map(y);l.debug.apply(l,o.__spreadArrays(["Firestore ("+h+") ["+t+"]: "+e],i))}}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=s.LogLevel.ERROR){var r=e.map(y);l.error.apply(l,o.__spreadArrays(["Firestore ("+h+"): "+t],r))}}function y(t){if("string"==typeof t)return t;var e=sn.t();try{return e.i(t)}catch(e){return t}}function m(t){var e="FIRESTORE ("+h+") INTERNAL ASSERTION FAILED: "+t;throw v(e),new Error(e)}function g(t,e){t||m(e)}var w=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return g(20===e.length,"Invalid auto ID: "+e),e},t}();function _(t,e){return t<e?-1:t>e?1:0}function b(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function E(t){return t+"\0"}var I=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},C=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.h=function(t){return _(this.projectId,t.projectId)||_(this.database,t.database)},t}(),T=function(){function t(t){this.uid=t}return t.prototype.l=function(){return null!=this.uid},t.prototype.v=function(){return this.l()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.m=new t("google-credentials-uid"),t.p=new t("first-party-uid"),t}(),S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},A=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o.__extends(e,t),e}(Error),N=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},k=function(){function t(){this._=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.I=function(){},t.prototype.T=function(t){g(!this._,"Can only call setChangeListener() once."),this._=t,t(T.UNAUTHENTICATED)},t.prototype.D=function(){g(null!==this._,"removeChangeListener() when no listener registered"),this._=null},t}(),x=function(){function t(t){var e=this;this.S=null,this.currentUser=T.UNAUTHENTICATED,this.R=!1,this.C=0,this._=null,this.forceRefresh=!1,this.S=function(){e.C++,e.currentUser=e.A(),e.R=!0,e._&&e._(e.currentUser)},this.C=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.S):(this.S(null),t.get().then((function(t){e.auth=t,e.S&&e.auth.addAuthTokenListener(e.S)}),(function(){})))}return t.prototype.getToken=function(){var t=this;g(null!=this.S,"getToken cannot be called after listener removed.");var e=this.C,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){if(t.C!==e)throw new A(S.ABORTED,"getToken aborted due to token change.");return n?(g("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new N(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.I=function(){this.forceRefresh=!0},t.prototype.T=function(t){g(!this._,"Can only call setChangeListener() once."),this._=t,this.R&&t(this.currentUser)},t.prototype.D=function(){g(null!=this.S,"removeChangeListener() called twice"),g(null!==this._,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.S),this.S=null,this._=null},t.prototype.A=function(){var t=this.auth&&this.auth.getUid();return g(null===t||"string"==typeof t,"Received invalid UID: "+t),new T(t)},t}(),R=function(){function t(t,e){this.P=t,this.k=e,this.type="FirstParty",this.user=T.p}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.k},e=this.P.auth.N([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),O=function(){function t(t,e){this.P=t,this.k=e}return t.prototype.getToken=function(){return Promise.resolve(new R(this.P,this.k))},t.prototype.T=function(t){t(T.p)},t.prototype.D=function(){},t.prototype.I=function(){},t}();function D(t){if(!t)return new k;switch(t.type){case"gapi":var e=t.O;return g(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new O(e,t.k||"0");case"provider":return t.O;default:throw new A(S.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function L(t,e){return void 0!==t?t:e}function M(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function F(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function U(t){for(var e in g(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function j(t,e){if(0!==e.length)throw new A(S.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+it(e.length,"argument")+".")}function V(t,e,n){if(e.length!==n)throw new A(S.INVALID_ARGUMENT,"Function "+t+"() requires "+it(n,"argument")+", but was called with "+it(e.length,"argument")+".")}function q(t,e,n){if(e.length<n)throw new A(S.INVALID_ARGUMENT,"Function "+t+"() requires at least "+it(n,"argument")+", but was called with "+it(e.length,"argument")+".")}function H(t,e,n,r){if(e.length<n||e.length>r)throw new A(S.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+it(e.length,"argument")+".")}function B(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new A(S.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+it(r,"element")+".")}function W(t,e,n,r){Y(t,e,rt(n)+" argument",r)}function G(t,e,n,r){void 0!==r&&W(t,e,n,r)}function z(t,e,n,r){Y(t,e,n+" option",r)}function Q(t,e,n,r){void 0!==r&&z(t,e,n,r)}function $(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],s=0,a=i;s<a.length;s++){var u=a[s];if(u===r)return;o.push(X(u))}var c=X(r);throw new A(S.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function K(t,e,n,r){if(!e.some((function(t){return t===r})))throw new A(S.INVALID_ARGUMENT,"Invalid value "+X(r)+" provided to function "+t+"() for its "+rt(n)+" argument. Acceptable values: "+e.join(", "))}function Y(t,e,n,r){if(!("object"===e?J(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=X(r);throw new A(S.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function J(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function X(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":m("Unknown wrong type: "+typeof t)}function Z(t,e,n){if(void 0===n)throw new A(S.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+rt(e)+" argument, but it was undefined.")}function tt(t,e,n){F(e,(function(e,r){if(n.indexOf(e)<0)throw new A(S.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function et(t,e,n,r){var i=X(r);return new A(S.INVALID_ARGUMENT,"Function "+t+"() requires its "+rt(n)+" argument to be a "+e+", but it was: "+i)}function nt(t,e,n){if(n<=0)throw new A(S.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+rt(e)+" argument to be a positive number, but it was: "+n+".")}function rt(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function it(t,e){return t+" "+e+(1===t?"":"s")}var ot=function(){function t(t,e){if(V("GeoPoint",arguments,2),W("GeoPoint","number",1,t),W("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new A(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new A(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.F=t,this.V=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.F},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.V},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this.F===t.F&&this.V===t.V},t.prototype.U=function(t){return _(this.F,t.F)||_(this.V,t.V)},t}(),st=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new A(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new A(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new A(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new A(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?_(this.nanoseconds,t.nanoseconds):_(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),at=function(){function t(t){this.timestamp=t}return t.j=function(e){var n=Math.floor(e/1e6);return new t(new st(n,e%1e6*1e3))},t.L=function(e){return new t(e)},t.q=function(){return t.MIN},t.prototype.h=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.B=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t.MIN=new t(new st(0,0)),t}(),ut=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&m("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&m("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.G(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.W(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.K=function(t){return g(this.length>=(t=void 0===t?1:t),"Can't call popFirst() with less segments"),this.W(this.segments,this.offset+t,this.length-t)},t.prototype.H=function(){return g(!this.J(),"Can't call popLast() on empty path"),this.W(this.segments,this.offset,this.length-1)},t.prototype.Y=function(){return g(!this.J(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.X=function(){return this.get(this.length-1)},t.prototype.get=function(t){return g(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.J=function(){return 0===this.length},t.prototype.$=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.Z=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.tt=function(){return this.segments.slice(this.offset,this.limit())},t.G=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),ct=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.W=function(t,n,r){return new e(t,n,r)},e.prototype.nt=function(){return this.tt().join("/")},e.prototype.toString=function(){return this.nt()},e.it=function(t){if(t.indexOf("//")>=0)throw new A(S.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.et=new e([]),e}(ut),ht=/^[_a-zA-Z][_a-zA-Z0-9]*$/,lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.W=function(t,n,r){return new e(t,n,r)},e.rt=function(t){return ht.test(t)},e.prototype.nt=function(){return this.tt().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.rt(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.nt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.st=function(){return new e(["__name__"])},e.ot=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new A(S.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new A(S.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new A(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new A(S.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.et=new e([]),e}(ut),ft=function(){function t(e){this.path=e,g(t.ht(e),"Invalid DocumentKey with an odd number of segments: "+e.tt().join("/"))}return t.prototype.ct=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===ct.G(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.G=function(t,e){return ct.G(t.path,e.path)},t.ht=function(t){return t.length%2==0},t.at=function(e){return new t(new ct(e.slice()))},t.ft=function(e){return new t(ct.it(e))},t.EMPTY=new t(new ct([])),t}(),pt=function(){function t(t,e){this.G=t,this.root=e||vt.EMPTY}return t.prototype.lt=function(e,n){return new t(this.G,this.root.lt(e,n,this.G).copy(null,null,vt.dt,null,null))},t.prototype.remove=function(e){return new t(this.G,this.root.remove(e,this.G).copy(null,null,vt.dt,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.J();){var n=this.G(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.J();){var r=this.G(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.J=function(){return this.root.J()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.vt=function(){return this.root.vt()},t.prototype.wt=function(){return this.root.wt()},t.prototype.pt=function(t){return this.root.pt(t)},t.prototype.forEach=function(t){this.pt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.pt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.bt=function(){return new dt(this.root,null,this.G,!1)},t.prototype.yt=function(t){return new dt(this.root,t,this.G,!1)},t.prototype._t=function(){return new dt(this.root,null,this.G,!0)},t.prototype.It=function(t){return new dt(this.root,t,this.G,!0)},t}(),dt=function(){function t(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.J();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return t.prototype.Dt=function(){g(this.Et.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.J();)this.Et.push(t),t=t.right;else for(t=t.right;!t.J();)this.Et.push(t),t=t.left;return e},t.prototype.St=function(){return this.Et.length>0},t.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},t}(),vt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.J=function(){return!1},t.prototype.pt=function(t){return this.left.pt(t)||t(this.key,this.value)||this.right.pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.J()?this:this.left.min()},t.prototype.vt=function(){return this.min().key},t.prototype.wt=function(){return this.right.J()?this.key:this.right.wt()},t.prototype.lt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.lt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.lt(t,e,n))).Ct()},t.prototype.At=function(){if(this.left.J())return t.EMPTY;var e=this;return e.left.Pt()||e.left.left.Pt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.At(),null)).Ct()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.J()||i.left.Pt()||i.left.left.Pt()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Pt()&&(i=i.Nt()),i.right.J()||i.right.Pt()||i.right.left.Pt()||(i=i.Ot()),0===n(e,i.key)){if(i.right.J())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.At())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ct()},t.prototype.Pt=function(){return this.color},t.prototype.Ct=function(){var t=this;return t.right.Pt()&&!t.left.Pt()&&(t=t.Ft()),t.left.Pt()&&t.left.left.Pt()&&(t=t.Nt()),t.left.Pt()&&t.right.Pt()&&(t=t.Vt()),t},t.prototype.kt=function(){var t=this.Vt();return t.right.left.Pt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Nt())).Ft()).Vt()),t},t.prototype.Ot=function(){var t=this.Vt();return t.left.left.Pt()&&(t=(t=t.Nt()).Vt()),t},t.prototype.Ft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Nt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Vt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.xt();return Math.pow(2,t)<=this.size+1},t.prototype.xt=function(){if(this.Pt()&&this.left.Pt())throw m("Red node has red child("+this.key+","+this.value+")");if(this.right.Pt())throw m("Right child of ("+this.key+","+this.value+") is red");var t=this.left.xt();if(t!==this.right.xt())throw m("Black depths differ");return t+(this.Pt()?0:1)},t.EMPTY=null,t.RED=!0,t.dt=!1,t}(),yt=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw m("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw m("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw m("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw m("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw m("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.lt=function(t,e,n){return new vt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.J=function(){return!0},t.prototype.pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.vt=function(){return null},t.prototype.wt=function(){return null},t.prototype.Pt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.xt=function(){return 0},t}();vt.EMPTY=new yt;var mt=function(){function t(t){this.G=t,this.data=new pt(this.G)}return t.jt=function(e){var n=new t(e.G);return e.forEach((function(t){n=n.add(t)})),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.vt()},t.prototype.last=function(){return this.data.wt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.pt((function(e,n){return t(e),!1}))},t.prototype.Lt=function(t,e){for(var n=this.data.yt(t[0]);n.St();){var r=n.Dt();if(this.G(r.key,t[1])>=0)return;e(r.key)}},t.prototype.qt=function(t,e){var n;for(n=void 0!==e?this.data.yt(e):this.data.bt();n.St();)if(!t(n.Dt().key))return},t.prototype.Bt=function(t){var e=this.data.yt(t);return e.St()?e.Dt().key:null},t.prototype.bt=function(){return new gt(this.data.bt())},t.prototype.yt=function(t){return new gt(this.data.yt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).lt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.J=function(){return this.data.J()},t.prototype.Mt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.bt(),r=e.data.bt();n.St();){var i=n.Dt().key,o=r.Dt().key;if(0!==this.G(i,o))return!1}return!0},t.prototype.tt=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.G);return n.data=e,n},t}(),gt=function(){function t(t){this.Qt=t}return t.prototype.Dt=function(){return this.Qt.Dt().key},t.prototype.St=function(){return this.Qt.St()},t}(),wt=function(){function t(){}return t.prototype.Gt=function(t,e){return new Wt(e,t)},t.prototype.Wt=function(t,e){return e},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),_t=function(){function t(t){this.elements=t}return t.prototype.Gt=function(t,e){return this.apply(t)},t.prototype.Wt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=It(t),n=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Yt(e)},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&b(e.elements,this.elements)},t}(),bt=function(){function t(t){this.elements=t}return t.prototype.Gt=function(t,e){return this.apply(t)},t.prototype.Wt=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=It(t),n=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Yt(e)},t.prototype.zt=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&b(e.elements,this.elements)},t}(),Et=function(){function t(t){this.Kt=t}return t.prototype.Gt=function(t,e){var n=this.zt(t);if(n instanceof Vt&&this.Kt instanceof Vt){var r=n.Ht+this.Kt.Ht;return new Vt(r)}return new qt(r=n.Ht+this.Kt.Ht)},t.prototype.Wt=function(t,e){return g(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.zt=function(t){return t instanceof Ut?t:new Vt(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.Kt.isEqual(e.Kt)},t}();function It(t){return t instanceof Yt?t.Ht.slice():[]}var Ct=function(){function t(t){this.fields=t}return t.Jt=function(e){return new t(e)},t.Yt=function(e){var n=new mt(lt.G);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.Xt=function(t){var e=!1;return this.fields.forEach((function(n){n.$(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),Tt=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),St=function(t,e){this.version=t,this.transformResults=e},At=function(){function t(t,e){this.updateTime=t,this.exists=e,g(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"$t",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.Zt=function(t){return void 0!==this.updateTime?t instanceof Xt&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof Xt:(g(this.$t,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return n=t.updateTime,(null!=(e=this.updateTime)?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),Nt=function(){function t(){}return t.prototype.tn=function(t){null!=t&&g(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.nn=function(t){return t instanceof Xt?t.version:at.MIN},t}(),kt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.in=r,i.type=0,i}return o.__extends(e,t),e.prototype.Wt=function(t,e){return this.tn(t),g(null==e.transformResults,"Transform results received by SetMutation."),new Xt(this.key,e.version,{hasCommittedMutations:!0},this.value)},e.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=Nt.nn(t);return new Xt(this.key,r,{en:!0},this.value)},e.prototype.rn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.in.isEqual(t.in)},e}(Nt),xt=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.un=r,o.in=i,o.type=1,o}return o.__extends(e,t),e.prototype.Wt=function(t,e){if(this.tn(t),g(null==e.transformResults,"Transform results received by PatchMutation."),!this.in.Zt(t))return new te(this.key,e.version);var n=this.sn(t);return new Xt(this.key,e.version,{hasCommittedMutations:!0},n)},e.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=Nt.nn(t),i=this.sn(t);return new Xt(this.key,r,{en:!0},i)},e.prototype.rn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.un.isEqual(t.un)&&this.in.isEqual(t.in)},e.prototype.sn=function(t){var e;return e=t instanceof Xt?t.data():$t.EMPTY,this.on(e)},e.prototype.on=function(t){var e=this,n=t.hn();return this.un.fields.forEach((function(t){if(!t.J()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.cn()},e}(Nt),Rt=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=2,r.in=At.exists(!0),r}return o.__extends(e,t),e.prototype.Wt=function(t,e){if(this.tn(t),g(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.in.Zt(t))return new te(this.key,e.version);var n=this.an(t),r=this.fn(t,e.transformResults),i=e.version,o=this.ln(n.data(),r);return new Xt(this.key,i,{hasCommittedMutations:!0},o)},e.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=this.an(t),i=this.dn(n,t,e),o=this.ln(r.data(),i);return new Xt(this.key,r.version,{en:!0},o)},e.prototype.rn=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Xt?t.field(i.field):void 0,s=i.transform.zt(o||null);null!=s&&(e=null==e?$t.vn().set(i.field,s):e.set(i.field,s))}return e?e.cn():null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&b(this.fieldTransforms,t.fieldTransforms)&&this.in.isEqual(t.in)},e.prototype.an=function(t){return g(t instanceof Xt,"Unknown MaybeDocument type "+t),g(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},e.prototype.fn=function(t,e){var n=[];g(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof Xt&&(s=t.field(i.field)),n.push(o.Wt(s,e[r]))}return n},e.prototype.dn=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof Xt&&(u=e.field(s.field)),null===u&&n instanceof Xt&&(u=n.field(s.field)),r.push(a.Gt(u,t))}return r},e.prototype.ln=function(t,e){g(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=t.hn(),r=0;r<this.fieldTransforms.length;r++)n.set(this.fieldTransforms[r].field,e[r]);return n.cn()},e}(Nt),Ot=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.in=n,r.type=3,r}return o.__extends(e,t),e.prototype.Wt=function(t,e){return this.tn(t),g(null==e.transformResults,"Transform results received by DeleteMutation."),new Zt(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.Gt=function(t,e,n){return this.tn(t),this.in.Zt(t)?(t&&g(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new Zt(this.key,at.q())):t},e.prototype.rn=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.in.isEqual(t.in)},e}(Nt),Dt=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.in=n,r.type=4,r}return o.__extends(e,t),e.prototype.Wt=function(t,e){m("VerifyMutation should only be used in Transactions.")},e.prototype.Gt=function(t,e,n){m("VerifyMutation should only be used in Transactions.")},e.prototype.rn=function(t){m("VerifyMutation should only be used in Transactions.")},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.in.isEqual(t.in)},e}(Nt),Pt=function(){function t(t,e){this.wn=t,this.timestampsInSnapshots=e}return t.mn=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(1,n);case"previous":return new t(2,n);case"none":case void 0:return new t(0,n);default:return m("fromSnapshotOptions() called with invalid options.")}},t}(),Lt=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.pn=function(t){return g(this.gn!==t.gn,"Default compareTo should not be used for values of same type."),_(this.gn,t.gn)},t}(),Mt=function(t){function e(){var e=t.call(this)||this;return e.gn=0,e.Ht=null,e}return o.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.h=function(t){return t instanceof e?0:this.pn(t)},e.prototype.bn=function(){return 4},e.yn=new e,e}(Lt),Ft=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=1,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht===t.Ht},e.prototype.h=function(t){return t instanceof e?_(this.Ht,t.Ht):this.pn(t)},e.prototype.bn=function(){return 4},e.of=function(t){return t?e._n:e.In},e._n=new e(!0),e.In=new e(!1),e}(Lt),Ut=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=2,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.h=function(t){return t instanceof e?(n=this.Ht)<(r=t.Ht)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.pn(t);var n,r},e.prototype.bn=function(){return 8},e}(Lt);function jt(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Vt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&jt(this.Ht,t.Ht)},e}(Ut),qt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&jt(this.Ht,t.Ht)},e.Tn=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Ut),Ht=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=4,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht===t.Ht},e.prototype.h=function(t){return t instanceof e?_(this.Ht,t.Ht):this.pn(t)},e.prototype.bn=function(){return 2*this.Ht.length},e}(Lt),Bt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=3,n}return o.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.Ht:this.Ht.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):t instanceof Wt?-1:this.pn(t)},e.prototype.bn=function(){return 16},e}(Lt),Wt=function(t){function e(e,n){var r=t.call(this)||this;return r.En=e,r.previousValue=n,r.gn=3,r}return o.__extends(e,t),e.prototype.value=function(t){return t&&1===t.wn?new Bt(this.En).value(t):t&&2===t.wn&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.En.isEqual(t.En)},e.prototype.h=function(t){return t instanceof e?this.En.U(t.En):t instanceof Bt?1:this.pn(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.En.toString()+">"},e.prototype.bn=function(){return 16+(this.previousValue?this.previousValue.bn():0)},e}(Lt),Gt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=5,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):this.pn(t)},e.prototype.bn=function(){return this.Ht.Dn()},e}(Lt),zt=function(t){function e(e,n){var r=t.call(this)||this;return r.s=e,r.key=n,r.gn=6,r}return o.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.s.isEqual(t.s)},e.prototype.h=function(t){if(t instanceof e){var n=this.s.h(t.s);return 0!==n?n:ft.G(this.key,t.key)}return this.pn(t)},e.prototype.bn=function(){return this.s.projectId.length+this.s.database.length+this.key.toString().length},e}(Lt),Qt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=7,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht},e.prototype.isEqual=function(t){return t instanceof e&&this.Ht.isEqual(t.Ht)},e.prototype.h=function(t){return t instanceof e?this.Ht.U(t.Ht):this.pn(t)},e.prototype.bn=function(){return 16},e}(Lt),$t=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=9,n}return o.__extends(e,t),e.vn=function(){return new Kt(e.EMPTY.Ht)},e.prototype.value=function(t){var e={};return this.Ht.pt((function(n,r){e[n]=r.value(t)})),e},e.prototype.forEach=function(t){this.Ht.pt(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.Ht.bt(),r=t.Ht.bt();n.St()&&r.St();){var i=n.Dt(),o=r.Dt();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.St()&&!r.St()}return!1},e.prototype.h=function(t){if(t instanceof e){for(var n=this.Ht.bt(),r=t.Ht.bt();n.St()&&r.St();){var i=n.Dt(),o=r.Dt(),s=_(i.key,o.key)||i.value.h(o.value);if(s)return s}return _(n.St(),r.St())}return this.pn(t)},e.prototype.contains=function(t){return null!==this.field(t)},e.prototype.field=function(t){g(!t.J(),"Can't get field of empty path");var n=this;return t.forEach((function(t){n=n instanceof e?n.Ht.get(t):null})),n},e.prototype.un=function(){var t=new mt(lt.G);return this.Ht.forEach((function(n,r){var i=new lt([n]);if(r instanceof e){var o=r.un().fields;o.J()?t=t.add(i):o.forEach((function(e){t=t.add(i.child(e))}))}else t=t.add(i)})),Ct.Jt(t)},e.prototype.bn=function(){var t=0;return this.Ht.pt((function(e,n){t+=e.length+n.bn()})),t},e.prototype.toString=function(){return this.Ht.toString()},e.prototype.hn=function(){return new Kt(this.Ht)},e.EMPTY=new e(new pt(_)),e}(Lt),Kt=function(){function t(t){this.Ht=t}return t.prototype.set=function(t,e){g(!t.J(),"Cannot set field for empty path on ObjectValue");var n=t.Y();if(1===t.length)this.Ht=this.Ht.lt(n,e);else{var r=this.Ht.get(n),i=(r instanceof $t?r:$t.EMPTY).hn().set(t.K(),e).cn();this.Ht=this.Ht.lt(n,i)}return this},t.prototype.delete=function(t){g(!t.J(),"Cannot delete field for empty path on ObjectValue");var e=t.Y();if(1===t.length)this.Ht=this.Ht.remove(e);else{var n=this.Ht.get(e);if(n instanceof $t){var r=n.hn().delete(t.K()).cn();this.Ht=this.Ht.lt(t.Y(),r)}}return this},t.prototype.cn=function(){return new $t(this.Ht)},t}(),Yt=function(t){function e(e){var n=t.call(this)||this;return n.Ht=e,n.gn=8,n}return o.__extends(e,t),e.prototype.value=function(t){return this.Ht.map((function(e){return e.value(t)}))},e.prototype.contains=function(t){for(var e=0,n=this.Ht;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},e.prototype.forEach=function(t){this.Ht.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.Ht.length!==t.Ht.length)return!1;for(var n=0;n<this.Ht.length;n++)if(!this.Ht[n].isEqual(t.Ht[n]))return!1;return!0}return!1},e.prototype.h=function(t){if(t instanceof e){for(var n=Math.min(this.Ht.length,t.Ht.length),r=0;r<n;r++){var i=this.Ht[r].h(t.Ht[r]);if(i)return i}return _(this.Ht.length,t.Ht.length)}return this.pn(t)},e.prototype.bn=function(){return this.Ht.reduce((function(t,e){return t+e.bn()}),0)},e.prototype.toString=function(){return"["+this.Ht.map((function(t){return t.toString()})).join(",")+"]"},e}(Lt),Jt=function(){function t(t,e){this.key=t,this.version=e}return t.Sn=function(t,e){return ft.G(t.key,e.key)},t}(),Xt=function(t){function e(e,n,r,i,o,s){var a=t.call(this,e,n)||this;return a.Rn=i,a.proto=o,a.converter=s,g(void 0!==a.Rn||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.en=!!r.en,a.hasCommittedMutations=!!r.hasCommittedMutations,a}return o.__extends(e,t),e.prototype.field=function(t){if(this.Rn)return this.Rn.field(t);this.Cn||(this.Cn=new Map);var e=t.nt(),n=this.Cn.get(e);if(void 0===n){var r=this.An(t);n=void 0===r?null:this.converter(r),this.Cn.set(e,n)}return n},e.prototype.data=function(){var t=this;if(!this.Rn){var e=$t.vn();F(this.proto.fields||{},(function(n,r){e.set(new lt([n]),t.converter(r))})),this.Rn=e.cn(),this.Cn=void 0}return this.Rn},e.prototype.value=function(){return this.data().value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.en===t.en&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.en+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.en||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.An=function(t){g(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.Y()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},e.Pn=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.h(i):m("Trying to compare documents on fields that don't exist")},e}(Jt),Zt=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return o.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Jt),te=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Jt);function ee(t){return null==t}function ne(t){return-0===t&&1/t==-1/0}function re(t){return"number"==typeof t&&Number.isInteger(t)&&!ne(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ie=function(){function t(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.kn=null}return t.prototype.canonicalId=function(){if(null===this.kn){var t=this.path.nt();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";ee(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.kn=t}return this.kn},t.prototype.toString=function(){var t=this.path.nt();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),ee(this.limit)||(t+=", limit: "+this.limit),this.orderBy.length>0&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.Nn=function(){return ft.ht(this.path)&&null===this.collectionGroup&&0===this.filters.length},t}(),oe=function(){function t(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.On=n,this.filters=r,this.limit=i,this.Fn=o,this.startAt=s,this.endAt=a,this.Vn=null,this.Un=null,this.startAt&&this.xn(this.startAt),this.endAt&&this.xn(this.endAt)}return t.jn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.Vn){var t=this.Ln(),e=this.qn();if(null!==t&&null===e)this.Vn=t.ut()?[ye]:[new ve(t),ye];else{g(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.Vn=[];for(var n=!1,r=0,i=this.On;r<i.length;r++){var o=i[r];this.Vn.push(o),o.field.ut()&&(n=!0)}n||this.Vn.push((this.On.length>0?this.On[this.On.length-1].dir:pe.ASCENDING)===pe.ASCENDING?ye:me)}}return this.Vn},enumerable:!0,configurable:!0}),t.prototype.Bn=function(e){g(null==this.Ln()||!(e instanceof ae)||!e.Mn()||e.field.isEqual(this.Ln()),"Query must only have one inequality field."),g(!this.Nn(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.On.slice(),n,this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Qn=function(e){g(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.On.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Gn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.Wn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.zn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,e,this.endAt)},t.prototype.Kn=function(e){return new t(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,e)},t.prototype.Hn=function(e){return new t(e,null,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},t.prototype.Jn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.On.length||1===this.On.length&&this.On[0].field.ut())},t.prototype.canonicalId=function(){return this.Yn().canonicalId()+"|lt:"+this.Fn},t.prototype.toString=function(){return"Query(target="+this.Yn().toString()+"; limitType="+this.Fn+")"},t.prototype.isEqual=function(t){return this.Yn().isEqual(t.Yn())&&this.Fn===t.Fn},t.prototype.Xn=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.ut()}return g(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.$n(t)&&this.Zn(t)&&this.ti(t)&&this.ni(t)},t.prototype.ii=function(){return!ee(this.limit)&&"F"===this.Fn},t.prototype.ei=function(){return!ee(this.limit)&&"L"===this.Fn},t.prototype.qn=function(){return this.On.length>0?this.On[0].field:null},t.prototype.Ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof ae&&n.Mn())return n.field}return null},t.prototype.ri=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof ae&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Nn=function(){return this.Yn().Nn()},t.prototype.ui=function(){return null!==this.collectionGroup},t.prototype.Yn=function(){if(!this.Un)if("F"===this.Fn)this.Un=new ie(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e];t.push(new ve(r.field,r.dir===pe.DESCENDING?pe.ASCENDING:pe.DESCENDING))}var i=this.endAt?new de(this.endAt.position,!this.endAt.before):null,o=this.startAt?new de(this.startAt.position,!this.startAt.before):null;this.Un=new ie(this.path,this.collectionGroup,t,this.filters,this.limit,i,o)}return this.Un},t.prototype.$n=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.ct(this.collectionGroup)&&this.path.$(e):ft.ht(this.path)?this.path.isEqual(e):this.path.Z(e)},t.prototype.Zn=function(t){for(var e=0,n=this.On;e<n.length;e++){var r=n[e];if(!r.field.ut()&&null===t.field(r.field))return!1}return!0},t.prototype.ti=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.ni=function(t){return!(this.startAt&&!this.startAt.si(this.orderBy,t)||this.endAt&&this.endAt.si(this.orderBy,t))},t.prototype.xn=function(t){g(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),se=function(){function t(t){this.name=t}return t.it=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return m("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),ae=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return o.__extends(e,t),e.create=function(t,n,r){if(t.ut())return n===se.IN?(g(r instanceof Yt,"Comparing on key with IN, but filter value not an ArrayValue"),g(r.Ht.every((function(t){return t instanceof zt})),"Comparing on key with IN, but an array value was not a RefValue"),new ce(t,r)):(g(r instanceof zt,"Comparing on key, but filter value not a RefValue"),g(n!==se.ARRAY_CONTAINS&&n!==se.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new ue(t,n,r));if(r.isEqual(Mt.yn)){if(n!==se.EQUAL)throw new A(S.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(r.isEqual(qt.Tn)){if(n!==se.EQUAL)throw new A(S.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===se.ARRAY_CONTAINS?new he(t,r):n===se.IN?(g(r instanceof Yt,"IN filter has invalid value: "+r.toString()),new le(t,r)):n===se.ARRAY_CONTAINS_ANY?(g(r instanceof Yt,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new fe(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.gn===e.gn&&this.oi(e.h(this.value))},e.prototype.oi=function(t){switch(this.op){case se.LESS_THAN:return t<0;case se.LESS_THAN_OR_EQUAL:return t<=0;case se.EQUAL:return 0===t;case se.GREATER_THAN:return t>0;case se.GREATER_THAN_OR_EQUAL:return t>=0;default:return m("Unknown FieldFilter operator: "+this.op)}},e.prototype.Mn=function(){return[se.LESS_THAN,se.LESS_THAN_OR_EQUAL,se.GREATER_THAN,se.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.nt()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.nt()+" "+this.op+" "+this.value.value()},e}((function(){})),ue=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=ft.G(t.key,this.value.key);return this.oi(e)},e}(ae),ce=function(t){function e(e,n){var r=t.call(this,e,se.IN,n)||this;return r.value=n,r}return o.__extends(e,t),e.prototype.matches=function(t){return this.value.Ht.some((function(e){return t.key.isEqual(e.key)}))},e}(ae),he=function(t){function e(e,n){return t.call(this,e,se.ARRAY_CONTAINS,n)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Yt&&e.contains(this.value)},e}(ae),le=function(t){function e(e,n){var r=t.call(this,e,se.IN,n)||this;return r.value=n,r}return o.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}(ae),fe=function(t){function e(e,n){var r=t.call(this,e,se.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return o.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Yt&&n.Ht.some((function(t){return e.value.contains(t)}))},e}(ae),pe=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),de=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.si=function(t,e){g(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.ut())g(o instanceof zt,"Bound has a non-key value where the key path is being used."),n=ft.G(o.key,e.key);else{var s=e.field(i.field);g(null!==s,"Field should exist since document matched the orderBy already."),n=o.h(s)}if(i.dir===pe.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++)if(!this.position[e].isEqual(t.position[e]))return!1;return!0},t}(),ve=function(){function t(t,e){this.field=t,void 0===e&&(e=pe.ASCENDING),this.dir=e,this.hi=t.ut()}return t.prototype.compare=function(t,e){var n=this.hi?Xt.Sn(t,e):Xt.Pn(this.field,t,e);switch(this.dir){case pe.ASCENDING:return n;case pe.DESCENDING:return-1*n;default:return m("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.nt()+this.dir.toString()},t.prototype.toString=function(){return this.field.nt()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),ye=new ve(lt.st(),pe.ASCENDING),me=new ve(lt.st(),pe.DESCENDING),ge=function(){function t(t){this.ci=t}return t.fromBase64String=function(e){return new t(sn.t().atob(e))},t.fromUint8Array=function(e){return new t(we(e))},t.prototype.toBase64=function(){return sn.t().btoa(this.ci)},t.prototype.toUint8Array=function(){return _e(this.ci)},t.prototype.bn=function(){return 2*this.ci.length},t.prototype.isEqual=function(t){return this.ci===t.ci},t.ai=new t(""),t}();function we(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}function _e(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}var be,Ee,Ie=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=at.MIN),void 0===o&&(o=at.MIN),void 0===s&&(s=ge.ai),this.target=t,this.targetId=e,this.fi=n,this.sequenceNumber=r,this.li=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.di=function(e){return new t(this.target,this.targetId,this.fi,e,this.li,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.vi=function(e,n){return new t(this.target,this.targetId,this.fi,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.wi=function(e){return new t(this.target,this.targetId,this.fi,this.sequenceNumber,this.li,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.fi===t.fi&&this.sequenceNumber===t.sequenceNumber&&this.li.isEqual(t.li)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(t.resumeToken)&&this.target.isEqual(t.target)},t}(),Ce=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}();function Te(t){switch(t){case S.OK:return m("Treated status OK as error");case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0;default:return m("Unknown status code: "+t)}}function Se(t){if(void 0===t)return v("GRPC error has no .code"),S.UNKNOWN;switch(t){case be.OK:return S.OK;case be.CANCELLED:return S.CANCELLED;case be.UNKNOWN:return S.UNKNOWN;case be.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case be.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case be.INTERNAL:return S.INTERNAL;case be.UNAVAILABLE:return S.UNAVAILABLE;case be.UNAUTHENTICATED:return S.UNAUTHENTICATED;case be.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case be.NOT_FOUND:return S.NOT_FOUND;case be.ALREADY_EXISTS:return S.ALREADY_EXISTS;case be.PERMISSION_DENIED:return S.PERMISSION_DENIED;case be.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case be.ABORTED:return S.ABORTED;case be.OUT_OF_RANGE:return S.OUT_OF_RANGE;case be.UNIMPLEMENTED:return S.UNIMPLEMENTED;case be.DATA_LOSS:return S.DATA_LOSS;default:return m("Unknown status code: "+t)}}function Ae(t){if(void 0===t)return be.OK;switch(t){case S.OK:return be.OK;case S.CANCELLED:return be.CANCELLED;case S.UNKNOWN:return be.UNKNOWN;case S.DEADLINE_EXCEEDED:return be.DEADLINE_EXCEEDED;case S.RESOURCE_EXHAUSTED:return be.RESOURCE_EXHAUSTED;case S.INTERNAL:return be.INTERNAL;case S.UNAVAILABLE:return be.UNAVAILABLE;case S.UNAUTHENTICATED:return be.UNAUTHENTICATED;case S.INVALID_ARGUMENT:return be.INVALID_ARGUMENT;case S.NOT_FOUND:return be.NOT_FOUND;case S.ALREADY_EXISTS:return be.ALREADY_EXISTS;case S.PERMISSION_DENIED:return be.PERMISSION_DENIED;case S.FAILED_PRECONDITION:return be.FAILED_PRECONDITION;case S.ABORTED:return be.ABORTED;case S.OUT_OF_RANGE:return be.OUT_OF_RANGE;case S.UNIMPLEMENTED:return be.UNIMPLEMENTED;case S.DATA_LOSS:return be.DATA_LOSS;default:return m("Unknown status code: "+t)}}(Ee=be||(be={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var Ne=new pt(ft.G);function ke(){return Ne}function xe(){return ke()}var Re=new pt(ft.G);function Oe(){return Re}var De=new pt(ft.G);function Pe(){return De}var Le=new mt(ft.G);function Me(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Le,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Fe=new mt(_);function Ue(){return Fe}var je=function(){function t(t){this.G=t?function(e,n){return t(e,n)||ft.G(e.key,n.key)}:function(t,e){return ft.G(t.key,e.key)},this.mi=Oe(),this.pi=new pt(this.G)}return t.gi=function(e){return new t(e.G)},t.prototype.has=function(t){return null!=this.mi.get(t)},t.prototype.get=function(t){return this.mi.get(t)},t.prototype.first=function(){return this.pi.vt()},t.prototype.last=function(){return this.pi.wt()},t.prototype.J=function(){return this.pi.J()},t.prototype.indexOf=function(t){var e=this.mi.get(t);return e?this.pi.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.pi.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.pi.pt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.mi.lt(t.key,t),e.pi.lt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.mi.remove(t),this.pi.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.pi.bt(),r=e.pi.bt();n.St();){var i=n.Dt().key,o=r.Dt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.G=this.G,r.mi=e,r.pi=n,r},t}(),Ve=function(){function t(){this.bi=new pt(ft.G)}return t.prototype.track=function(t){var e=t.doc.key,n=this.bi.get(e);n?0!==t.type&&3===n.type?this.bi=this.bi.lt(e,t):3===t.type&&1!==n.type?this.bi=this.bi.lt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.bi=this.bi.lt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.bi=this.bi.lt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.bi=this.bi.remove(e):1===t.type&&2===n.type?this.bi=this.bi.lt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.bi=this.bi.lt(e,{type:2,doc:t.doc}):m("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.bi=this.bi.lt(e,t)},t.prototype.yi=function(){var t=[];return this.bi.pt((function(e,n){t.push(n)})),t},t}(),qe=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this._i=n,this.docChanges=r,this.Ii=i,this.fromCache=o,this.Ti=s,this.Ei=a}return t.Di=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,je.gi(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Ii.J()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ti===t.Ti&&this.Ii.isEqual(t.Ii)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this._i.isEqual(t._i)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),He=function(){function t(t,e,n,r,i){this.li=t,this.Si=e,this.Ri=n,this.Ci=r,this.Ai=i}return t.Pi=function(e,n){var r,i=((r={})[e]=Be.ki(e,n),r);return new t(at.MIN,i,Ue(),ke(),Me())},t}(),Be=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Ni=e,this.Oi=n,this.Fi=r,this.Vi=i}return t.ki=function(e,n){return new t(ge.ai,n,Me(),Me(),Me())},t}(),We=function(t,e,n,r){this.Ui=t,this.removedTargetIds=e,this.key=n,this.xi=r},Ge=function(t,e){this.targetId=t,this.ji=e},ze=function(t,e,n,r){void 0===n&&(n=ge.ai),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Qe=function(){function t(){this.Li=0,this.qi=Ye(),this.Bi=ge.ai,this.Mi=!1,this.Qi=!0}return Object.defineProperty(t.prototype,"Ni",{get:function(){return this.Mi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Bi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Gi",{get:function(){return 0!==this.Li},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Wi",{get:function(){return this.Qi},enumerable:!0,configurable:!0}),t.prototype.zi=function(t){t.bn()>0&&(this.Qi=!0,this.Bi=t)},t.prototype.Ki=function(){var t=Me(),e=Me(),n=Me();return this.qi.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:m("Encountered invalid change type: "+i)}})),new Be(this.Bi,this.Mi,t,e,n)},t.prototype.Hi=function(){this.Qi=!1,this.qi=Ye()},t.prototype.Ji=function(t,e){this.Qi=!0,this.qi=this.qi.lt(t,e)},t.prototype.Yi=function(t){this.Qi=!0,this.qi=this.qi.remove(t)},t.prototype.Xi=function(){this.Li+=1},t.prototype.$i=function(){this.Li-=1},t.prototype.Zi=function(){this.Qi=!0,this.Mi=!0},t}(),$e=function(){function t(t){this.te=t,this.ne={},this.ie=ke(),this.ee=Ke(),this.re=new mt(_)}return t.prototype.ue=function(t){for(var e=0,n=t.Ui;e<n.length;e++){var r=n[e];t.xi instanceof Xt?this.se(r,t.xi):t.xi instanceof Zt&&this.oe(r,t.key,t.xi)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.oe(r=o[i],t.key,t.xi)},t.prototype.he=function(t){var e=this;this.ce(t,(function(n){var r=e.ae(n);switch(t.state){case 0:e.fe(n)&&r.zi(t.resumeToken);break;case 1:r.$i(),r.Gi||r.Hi(),r.zi(t.resumeToken);break;case 2:r.$i(),r.Gi||e.removeTarget(n),g(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case 3:e.fe(n)&&(r.Zi(),r.zi(t.resumeToken));break;case 4:e.fe(n)&&(e.le(n),r.zi(t.resumeToken));break;default:m("Unknown target watch change state: "+t.state)}}))},t.prototype.ce=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):M(this.ne,e)},t.prototype.de=function(t){var e=t.targetId,n=t.ji.count,r=this.ve(e);if(r){var i=r.target;if(i.Nn())if(0===n){var o=new ft(i.path);this.oe(e,o,new Zt(o,at.q()))}else g(1===n,"Single document existence filter with count: "+n);else this.we(e)!==n&&(this.le(e),this.re=this.re.add(e))}},t.prototype.me=function(t){var e=this,n={};M(this.ne,(function(r,i){var o=e.ve(r);if(o){if(i.Ni&&o.target.Nn()){var s=new ft(o.target.path);null!==e.ie.get(s)||e.pe(r,s)||e.oe(r,s,new Zt(s,t))}i.Wi&&(n[r]=i.Ki(),i.Hi())}}));var r=Me();this.ee.forEach((function(t,n){var i=!0;n.qt((function(t){var n=e.ve(t);return!n||2===n.fi||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new He(t,n,this.re,this.ie,r);return this.ie=ke(),this.ee=Ke(),this.re=new mt(_),i},t.prototype.se=function(t,e){if(this.fe(t)){var n=this.pe(t,e.key)?2:0;this.ae(t).Ji(e.key,n),this.ie=this.ie.lt(e.key,e),this.ee=this.ee.lt(e.key,this.ge(e.key).add(t))}},t.prototype.oe=function(t,e,n){if(this.fe(t)){var r=this.ae(t);this.pe(t,e)?r.Ji(e,1):r.Yi(e),this.ee=this.ee.lt(e,this.ge(e).delete(t)),n&&(this.ie=this.ie.lt(e,n))}},t.prototype.removeTarget=function(t){delete this.ne[t]},t.prototype.we=function(t){var e=this.ae(t).Ki();return this.te.be(t).size+e.Oi.size-e.Vi.size},t.prototype.Xi=function(t){this.ae(t).Xi()},t.prototype.ae=function(t){return this.ne[t]||(this.ne[t]=new Qe),this.ne[t]},t.prototype.ge=function(t){var e=this.ee.get(t);return e||(e=new mt(_),this.ee=this.ee.lt(t,e)),e},t.prototype.fe=function(t){var e=null!==this.ve(t);return e||d("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ve=function(t){var e=this.ne[t];return e&&e.Gi?null:this.te.ye(t)},t.prototype.le=function(t){var e=this;g(!this.ne[t].Gi,"Should only reset active targets"),this.ne[t]=new Qe,this.te.be(t).forEach((function(n){e.oe(t,n,null)}))},t.prototype.pe=function(t,e){return this.te.be(t).has(e)},t}();function Ke(){return new pt(ft.G)}function Ye(){return new pt(ft.G)}var Je,Xe,Ze=((Je={})[pe.ASCENDING.name]="ASCENDING",Je[pe.DESCENDING.name]="DESCENDING",Je),tn=((Xe={})[se.LESS_THAN.name]="LESS_THAN",Xe[se.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Xe[se.GREATER_THAN.name]="GREATER_THAN",Xe[se.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Xe[se.EQUAL.name]="EQUAL",Xe[se.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Xe[se.IN.name]="IN",Xe[se.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",Xe),en=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nn(t,e){g(!ee(t),e+" is missing")}function rn(t){return"number"==typeof t?t:"string"==typeof t?Number(t):m("can't parse "+t)}var on=function(){function t(t,e){this.s=t,this.options=e}return t.prototype._e=function(t){var e=void 0===t.code?S.UNKNOWN:Se(t.code);return new A(e,t.message||"")},t.prototype.Ie=function(t){return this.options.Te||ee(t)?t:{value:t}},t.prototype.Ee=function(t){var e;return ee(e="object"==typeof t?t.value:t)?null:e},t.prototype.M=function(t){return this.options.Te?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.L=function(t){if("string"==typeof t)return this.De(t);g(!!t,"Cannot deserialize null or undefined timestamp.");var e=rn(t.seconds||"0");return new st(e,t.nanos||0)},t.prototype.De=function(t){var e=0,n=en.exec(t);if(g(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new st(o,e)},t.prototype.Se=function(t){return this.options.Te?t.toBase64():t.toUint8Array()},t.prototype.Re=function(t){return this.options.Te?(g(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),ge.fromBase64String(t||"")):(g(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),ge.fromUint8Array(t||new Uint8Array))},t.prototype.Ce=function(t){return"string"==typeof t?(g(this.options.Te,"Expected bytes to be passed in as Uint8Array, but got a string instead."),hn.fromBase64String(t)):(g(!this.options.Te,"Expected bytes to be passed in as Uint8Array, but got a string instead."),hn.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.M(t.M())},t.prototype.fromVersion=function(t){return g(!!t,"Trying to deserialize version that isn't set"),at.L(this.L(t))},t.prototype.Ae=function(t,e){return this.Pe(t).child("documents").child(e).nt()},t.prototype.ke=function(t){var e=ct.it(t);return g(this.Ne(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.Oe=function(t){return this.Ae(this.s,t.path)},t.prototype.Fe=function(t){var e=this.ke(t);return g(e.get(1)===this.s.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.s.projectId),g(!e.get(3)&&!this.s.database||e.get(3)===this.s.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.s.database),new ft(this.Ve(e))},t.prototype.Ue=function(t){return this.Ae(this.s,t)},t.prototype.xe=function(t){var e=this.ke(t);return 4===e.length?ct.et:this.Ve(e)},Object.defineProperty(t.prototype,"je",{get:function(){return new ct(["projects",this.s.projectId,"databases",this.s.database]).nt()},enumerable:!0,configurable:!0}),t.prototype.Pe=function(t){return new ct(["projects",t.projectId,"databases",t.database])},t.prototype.Ve=function(t){return g(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.K(5)},t.prototype.Ne=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.Le=function(t){if(t instanceof Mt)return{nullValue:"NULL_VALUE"};if(t instanceof Ft)return{booleanValue:t.value()};if(t instanceof Vt)return{integerValue:""+t.value()};if(t instanceof qt){var e=t.value();if(this.options.Te){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"};if(ne(e))return{doubleValue:"-0"}}return{doubleValue:t.value()}}return t instanceof Ht?{stringValue:t.value()}:t instanceof $t?{mapValue:this.qe(t)}:t instanceof Yt?{arrayValue:this.Be(t)}:t instanceof Bt?{timestampValue:this.M(t.Ht)}:t instanceof Qt?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Gt?{bytesValue:this.Se(t.value())}:t instanceof zt?{referenceValue:this.Ae(t.s,t.key.path)}:m("Unknown FieldValue "+JSON.stringify(t))},t.prototype.Me=function(t){var e=this;if("nullValue"in t)return Mt.yn;if("booleanValue"in t)return Ft.of(t.booleanValue);if("integerValue"in t)return new Vt(rn(t.integerValue));if("doubleValue"in t){if(this.options.Te){if("NaN"===t.doubleValue)return qt.Tn;if("Infinity"===t.doubleValue)return qt.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return qt.NEGATIVE_INFINITY;if("-0"===t.doubleValue)return new qt(-0)}return new qt(t.doubleValue)}if("stringValue"in t)return new Ht(t.stringValue);if("mapValue"in t)return this.Qe(t.mapValue.fields||{});if("arrayValue"in t)return nn(t.arrayValue,"arrayValue"),new Yt((t.arrayValue.values||[]).map((function(t){return e.Me(t)})));if("timestampValue"in t)return nn(t.timestampValue,"timestampValue"),new Bt(this.L(t.timestampValue));if("geoPointValue"in t)return nn(t.geoPointValue,"geoPointValue"),new Qt(new ot(t.geoPointValue.latitude||0,t.geoPointValue.longitude||0));if("bytesValue"in t){nn(t.bytesValue,"bytesValue");var n=this.Ce(t.bytesValue);return new Gt(n)}if("referenceValue"in t){nn(t.referenceValue,"referenceValue");var r=this.ke(t.referenceValue),i=new C(r.get(1),r.get(3)),o=new ft(this.Ve(r));return new zt(i,o)}return m("Unknown Value proto "+JSON.stringify(t))},t.prototype.Ge=function(t,e){return{name:this.Oe(t),fields:this.We(e)}},t.prototype.ze=function(t){return g(!t.en,"Can't serialize documents with mutations."),{name:this.Oe(t.key),fields:this.We(t.data()),updateTime:this.M(t.version.M())}},t.prototype.Ke=function(t,e){var n=this,r=this.Fe(t.name),i=this.fromVersion(t.updateTime);return new Xt(r,i,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.Me(t)}))},t.prototype.We=function(t){var e=this,n={};return t.forEach((function(t,r){n[t]=e.Le(r)})),n},t.prototype.Qe=function(t){var e=this,n=t,r=$t.vn();return F(n,(function(t,n){r.set(new lt([t]),e.Me(n))})),r.cn()},t.prototype.qe=function(t){return{fields:this.We(t)}},t.prototype.Be=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.Le(t))})),{values:n}},t.prototype.He=function(t){var e=this;g(!!t.found,"Tried to deserialize a found document from a missing document."),nn(t.found.name,"doc.found.name"),nn(t.found.updateTime,"doc.found.updateTime");var n=this.Fe(t.found.name),r=this.fromVersion(t.found.updateTime);return new Xt(n,r,{},void 0,t.found,(function(t){return e.Me(t)}))},t.prototype.Je=function(t){g(!!t.missing,"Tried to deserialize a missing document from a found document."),g(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.Fe(t.missing),n=this.fromVersion(t.readTime);return new Zt(e,n)},t.prototype.Ye=function(t){return"found"in t?this.He(t):"missing"in t?this.Je(t):m("invalid batch get response: "+JSON.stringify(t))},t.prototype.Xe=function(t){switch(t){case 1:return"ADD";case 3:return"CURRENT";case 0:return"NO_CHANGE";case 2:return"REMOVE";case 4:return"RESET";default:return m("Unknown WatchTargetChangeState: "+t)}},t.prototype.$e=function(t){if(t instanceof Ge)return{filter:{count:t.ji.count,targetId:t.targetId}};if(t instanceof We){if(t.xi instanceof Xt){var e=t.xi;return{documentChange:{document:{name:this.Oe(e.key),fields:this.We(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.Ui,removedTargetIds:t.removedTargetIds}}}if(t.xi instanceof Zt)return{documentDelete:{document:this.Oe((e=t.xi).key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.xi)return{documentRemove:{document:this.Oe(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof ze){var n=void 0;return t.cause&&(n={code:Ae(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.Xe(t.state),targetIds:t.targetIds,resumeToken:this.Se(t.resumeToken),cause:n}}}return m("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.Ze=function(t){var e,n=this;if("targetChange"in t){nn(t.targetChange,"targetChange");var r=this.tr(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=this.Re(t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&this._e(s);e=new ze(r,i,o,a||null)}else if("documentChange"in t){nn(t.documentChange,"documentChange");var u=t.documentChange;nn(u.document,"documentChange.name"),nn(u.document.name,"documentChange.document.name"),nn(u.document.updateTime,"documentChange.document.updateTime");var c=this.Fe(u.document.name),h=this.fromVersion(u.document.updateTime),l=new Xt(c,h,{},void 0,u.document,(function(t){return n.Me(t)})),f=u.removedTargetIds||[];e=new We(u.targetIds||[],f,l.key,l)}else if("documentDelete"in t){nn(t.documentDelete,"documentDelete");var p=t.documentDelete;nn(p.document,"documentDelete.document"),c=this.Fe(p.document),h=p.readTime?this.fromVersion(p.readTime):at.q(),l=new Zt(c,h),e=new We([],f=p.removedTargetIds||[],l.key,l)}else if("documentRemove"in t){nn(t.documentRemove,"documentRemove");var d=t.documentRemove;nn(d.document,"documentRemove"),c=this.Fe(d.document),e=new We([],f=d.removedTargetIds||[],c,null)}else{if(!("filter"in t))return m("Unknown change type "+JSON.stringify(t));nn(t.filter,"filter");var v=t.filter;nn(v.targetId,"filter.targetId");var y=new Ce(v.count||0);e=new Ge(v.targetId,y)}return e},t.prototype.tr=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:m("Got unexpected TargetChange.state: "+t)},t.prototype.nr=function(t){if(!("targetChange"in t))return at.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?at.MIN:e.readTime?this.fromVersion(e.readTime):at.MIN},t.prototype.ir=function(t){var e,n=this;if(t instanceof kt)e={update:this.Ge(t.key,t.value)};else if(t instanceof Ot)e={delete:this.Oe(t.key)};else if(t instanceof xt)e={update:this.Ge(t.key,t.data),updateMask:this.er(t.un)};else if(t instanceof Rt)e={transform:{document:this.Oe(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.rr(t)}))}};else{if(!(t instanceof Dt))return m("Unknown mutation type "+t.type);e={verify:this.Oe(t.key)}}return t.in.$t||(e.currentDocument=this.ur(t.in)),e},t.prototype.sr=function(t){var e=this,n=t.currentDocument?this.or(t.currentDocument):At.NONE;if(t.update){nn(t.update.name,"name");var r=this.Fe(t.update.name),i=this.Qe(t.update.fields||{});if(t.updateMask){var o=this.hr(t.updateMask);return new xt(r,i,o,n)}return new kt(r,i,n)}if(t.delete)return r=this.Fe(t.delete),new Ot(r,n);if(t.transform){r=this.Fe(t.transform.document);var s=t.transform.fieldTransforms.map((function(t){return e.cr(t)}));return g(!0===n.exists,'Transforms only support precondition "exists == true"'),new Rt(r,s)}return t.verify?(r=this.Fe(t.verify),new Dt(r,n)):m("unknown mutation proto: "+JSON.stringify(t))},t.prototype.ur=function(t){return g(!t.$t,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:m("Unknown precondition")},t.prototype.or=function(t){return void 0!==t.updateTime?At.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?At.exists(t.exists):At.NONE},t.prototype.ar=function(t,e){var n=this,r=this.fromVersion(t.updateTime?t.updateTime:e);r.isEqual(at.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map((function(t){return n.Me(t)}))),new St(r,i)},t.prototype.lr=function(t,e){var n=this;return t&&t.length>0?(g(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.ar(t,e)}))):[]},t.prototype.rr=function(t){var e=this,n=t.transform;if(n instanceof wt)return{fieldPath:t.field.nt(),setToServerValue:"REQUEST_TIME"};if(n instanceof _t)return{fieldPath:t.field.nt(),appendMissingElements:{values:n.elements.map((function(t){return e.Le(t)}))}};if(n instanceof bt)return{fieldPath:t.field.nt(),removeAllFromArray:{values:n.elements.map((function(t){return e.Le(t)}))}};if(n instanceof Et)return{fieldPath:t.field.nt(),increment:this.Le(n.Kt)};throw m("Unknown transform: "+t.transform)},t.prototype.cr=function(t){var e=this,n=null;if("setToServerValue"in t)g("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=wt.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new _t(r.map((function(t){return e.Me(t)})))}else if("removeAllFromArray"in t)n=new bt((r=t.removeAllFromArray.values||[]).map((function(t){return e.Me(t)})));else if("increment"in t){var i=this.Me(t.increment);g(i instanceof Ut,"NUMERIC_ADD transform requires a NumberValue"),n=new Et(i)}else m("Unknown transform proto: "+JSON.stringify(t));var o=lt.ot(t.fieldPath);return new Tt(o,n)},t.prototype.dr=function(t){return{documents:[this.Ue(t.path)]}},t.prototype.vr=function(t){var e=t.documents.length;return g(1===e,"DocumentsTarget contained other than 1 document: "+e),oe.jn(this.xe(t.documents[0])).Yn()},t.prototype.wr=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(g(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.Ue(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(g(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.Ue(n.H()),e.structuredQuery.from=[{collectionId:n.X()}]);var r=this.mr(t.filters);r&&(e.structuredQuery.where=r);var i=this.pr(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.Ie(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.gr(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.gr(t.endAt)),e},t.prototype.br=function(t){var e=this.xe(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){g(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.yr(n.where));var a=[];n.orderBy&&(a=this._r(n.orderBy));var u=null;n.limit&&(u=this.Ee(n.limit));var c=null;n.startAt&&(c=this.Ir(n.startAt));var h=null;return n.endAt&&(h=this.Ir(n.endAt)),new oe(e,i,a,s,u,"F",c,h).Yn()},t.prototype.Tr=function(t){var e=this.Er(t.fi);return null==e?null:{"goog-listen-tags":e}},t.prototype.Er=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return m("Unrecognized query purpose: "+t)}},t.prototype.Yn=function(t){var e,n=t.target;return(e=n.Nn()?{documents:this.dr(n)}:{query:this.wr(n)}).targetId=t.targetId,t.resumeToken.bn()>0&&(e.resumeToken=this.Se(t.resumeToken)),e},t.prototype.mr=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof ae?e.Dr(t):m("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.yr=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.Sr(t)]:void 0!==t.fieldFilter?[this.Rr(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.yr(t)})).reduce((function(t,e){return t.concat(e)})):m("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.pr=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.Cr(t)}))},t.prototype._r=function(t){var e=this;return t.map((function(t){return e.Ar(t)}))},t.prototype.gr=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.Le(t)}))}},t.prototype.Ir=function(t){var e=this,n=!!t.before,r=t.values.map((function(t){return e.Me(t)}));return new de(r,n)},t.prototype.Pr=function(t){return Ze[t.name]},t.prototype.kr=function(t){switch(t){case"ASCENDING":return pe.ASCENDING;case"DESCENDING":return pe.DESCENDING;default:return}},t.prototype.Nr=function(t){return tn[t.name]},t.prototype.Or=function(t){switch(t){case"EQUAL":return se.EQUAL;case"GREATER_THAN":return se.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return se.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return se.LESS_THAN;case"LESS_THAN_OR_EQUAL":return se.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return se.ARRAY_CONTAINS;case"IN":return se.IN;case"ARRAY_CONTAINS_ANY":return se.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return m("Unspecified operator");default:return m("Unknown operator")}},t.prototype.Fr=function(t){return{fieldPath:t.nt()}},t.prototype.Vr=function(t){return lt.ot(t.fieldPath)},t.prototype.Cr=function(t){return{field:this.Fr(t.field),direction:this.Pr(t.dir)}},t.prototype.Ar=function(t){return new ve(this.Vr(t.field),this.kr(t.direction))},t.prototype.Rr=function(t){return ae.create(this.Vr(t.fieldFilter.field),this.Or(t.fieldFilter.op),this.Me(t.fieldFilter.value))},t.prototype.Dr=function(t){if(t.op===se.EQUAL){if(t.value.isEqual(qt.Tn))return{unaryFilter:{field:this.Fr(t.field),op:"IS_NAN"}};if(t.value.isEqual(Mt.yn))return{unaryFilter:{field:this.Fr(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.Fr(t.field),op:this.Nr(t.op),value:this.Le(t.value)}}},t.prototype.Sr=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.Vr(t.unaryFilter.field);return ae.create(e,se.EQUAL,qt.Tn);case"IS_NULL":var n=this.Vr(t.unaryFilter.field);return ae.create(n,se.EQUAL,Mt.yn);case"OPERATOR_UNSPECIFIED":return m("Unspecified filter");default:return m("Unknown filter")}},t.prototype.er=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.nt())})),{fieldPaths:e}},t.prototype.hr=function(t){var e=(t.fieldPaths||[]).map((function(t){return lt.ot(t)}));return Ct.Yt(e)},t}(),sn=function(){function t(){}return t.Ur=function(e){t.platform&&m("Platform already defined"),t.platform=e},t.t=function(){return t.platform||m("Platform not set"),t.platform},t}();function an(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new A(S.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}function un(){if("undefined"==typeof Uint8Array)throw new A(S.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function cn(){if(!sn.t().xr)throw new A(S.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var hn=function(){function t(t){cn(),this.ci=t}return t.fromBase64String=function(e){V("Blob.fromBase64String",arguments,1),W("Blob.fromBase64String","string",1,e),cn();try{var n=sn.t().atob(e);return new t(n)}catch(t){throw new A(S.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(V("Blob.fromUint8Array",arguments,1),un(),!(e instanceof Uint8Array))throw et("Blob.fromUint8Array","Uint8Array",1,e);var n=we(e);return new t(n)},t.prototype.toBase64=function(){return V("Blob.toBase64",arguments,0),cn(),sn.t().btoa(this.ci)},t.prototype.toUint8Array=function(){V("Blob.toUint8Array",arguments,0),un();var t=_e(this.ci);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.ci===t.ci},t.prototype.Dn=function(){return 2*this.ci.length},t.prototype.U=function(t){return _(this.ci,t.ci)},t}(),ln=an(hn,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),fn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.jr=function(t){return n.Lr(t)},this.qr=function(t){return e.Br(t)})}return t.prototype.Lr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.qr&&this.qr(t),t},t.Mr=-1,t}(),pn=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},dn=function(){function t(t,e,n,r,i){this.Qr=t,this.Gr=e,this.Wr=n,this.op=r,this.zr=i,this.Kr=new pn,this.then=this.Kr.promise.then.bind(this.Kr.promise),this.catch=this.Kr.promise.catch.bind(this.Kr.promise),this.Kr.promise.catch((function(t){}))}return t.Hr=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Jr=setTimeout((function(){return e.Yr()}),t)},t.prototype.Xr=function(){return this.Yr()},t.prototype.cancel=function(t){null!==this.Jr&&(this.clearTimeout(),this.Kr.reject(new A(S.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Yr=function(){var t=this;this.Qr.$r((function(){return null!==t.Jr?(t.clearTimeout(),t.op().then((function(e){return t.Kr.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Jr&&(this.zr(this),clearTimeout(this.Jr),this.Jr=null)},t}(),vn=function(){function t(){this.Zr=Promise.resolve(),this.tu=!1,this.nu=[],this.iu=null,this.eu=!1,this.ru=[]}return Object.defineProperty(t.prototype,"uu",{get:function(){return this.tu},enumerable:!0,configurable:!0}),t.prototype.$r=function(t){this.enqueue(t)},t.prototype.su=function(t){this.ou(),this.hu(t)},t.prototype.cu=function(t){return this.ou(),this.hu(t)},t.prototype.au=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.ou(),this.tu?[3,2]:(this.tu=!0,[4,this.cu(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.ou(),this.tu?new Promise((function(t){})):this.hu(t)},t.prototype.hu=function(t){var e=this,n=this.Zr.then((function(){return e.eu=!0,t().catch((function(t){e.iu=t,e.eu=!1;var n=t.stack||t.message||"";throw v("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.eu=!1,t}))}));return this.Zr=n,n},t.prototype.fu=function(t,e,n){var r=this;this.ou(),g(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.ru.indexOf(t)>-1&&(e=0);var i=dn.Hr(this,t,e,n,(function(t){return r.lu(t)}));return this.nu.push(i),i},t.prototype.ou=function(){this.iu&&m("AsyncQueue is already failed: "+(this.iu.stack||this.iu.message))},t.prototype.du=function(){g(this.eu,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.vu=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.Zr];case 1:e.sent(),e.label=2;case 2:if(t!==this.Zr)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.wu=function(t){for(var e=0,n=this.nu;e<n.length;e++)if(n[e].Gr===t)return!0;return!1},t.prototype.mu=function(t){var e=this;return this.vu().then((function(){g("all"===t||e.wu(t),"Attempted to drain to missing operation "+t),e.nu.sort((function(t,e){return t.Wr-e.Wr}));for(var n=0,r=e.nu;n<r.length;n++){var i=r[n];if(i.Xr(),"all"!==t&&i.Gr===t)break}return e.vu()}))},t.prototype.pu=function(t){this.ru.push(t)},t.prototype.lu=function(t){var e=this.nu.indexOf(t);g(e>=0,"Delayed operation not found."),this.nu.splice(e,1)},t}();function yn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=gn(e)),e=mn(t.get(n),e);return gn(e)}function mn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function gn(t){return t+"\x01\x01"}function wn(t){var e=t.length;if(g(e>=2,"Invalid path "+t),2===e)return g("\x01"===t.charAt(0)&&"\x01"===t.charAt(1),"Non-empty path "+t+" had length 2"),ct.et;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&m('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:m('Invalid encoded resource path: "'+t+'"')}o=s+2}return new ct(r)}var _n=function(){function t(t,e,n,r){this.batchId=t,this.En=e,this.baseMutations=n,this.mutations=r,g(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.Wt=function(t,e,n){e&&g(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.gu;g(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=o.Wt(e,r[i]))}return e},t.prototype.Gt=function(t,e){e&&g(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=a.Gt(e,e,this.En));for(var i=e,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(t)&&(e=a.Gt(e,i,this.En))}return e},t.prototype.bu=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Gt(r.key,t.get(r.key));i&&(n=n.lt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Me())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&b(this.mutations,t.mutations)&&b(this.baseMutations,t.baseMutations)},t}(),bn=function(){function t(t,e,n,r,i){this.batch=t,this.yu=e,this.gu=n,this.streamToken=r,this._u=i}return t.from=function(e,n,r,i){g(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Pe(),s=e.mutations,a=0;a<s.length;a++)o=o.lt(s[a].key,r[a].version);return new t(e,n,r,i,o)},t}(),En=function(){function t(){this.Iu=new mt(In.Sn),this.Tu=new mt(In.Eu)}return t.prototype.J=function(){return this.Iu.J()},t.prototype.Du=function(t,e){var n=new In(t,e);this.Iu=this.Iu.add(n),this.Tu=this.Tu.add(n)},t.prototype.Su=function(t,e){var n=this;t.forEach((function(t){return n.Du(t,e)}))},t.prototype.Ru=function(t,e){this.Cu(new In(t,e))},t.prototype.Au=function(t,e){var n=this;t.forEach((function(t){return n.Ru(t,e)}))},t.prototype.Pu=function(t){var e=this,n=ft.EMPTY,r=new In(n,t),i=new In(n,t+1),o=[];return this.Tu.Lt([r,i],(function(t){e.Cu(t),o.push(t.key)})),o},t.prototype.ku=function(){var t=this;this.Iu.forEach((function(e){return t.Cu(e)}))},t.prototype.Cu=function(t){this.Iu=this.Iu.delete(t),this.Tu=this.Tu.delete(t)},t.prototype.Nu=function(t){var e=ft.EMPTY,n=new In(e,t),r=new In(e,t+1),i=Me();return this.Tu.Lt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ou=function(t){var e=new In(t,0),n=this.Iu.Bt(e);return null!==n&&t.isEqual(n.key)},t}(),In=function(){function t(t,e){this.key=t,this.Fu=e}return t.Sn=function(t,e){return ft.G(t.key,e.key)||_(t.Fu,e.Fu)},t.Eu=function(t,e){return _(t.Fu,e.Fu)||ft.G(t.key,e.key)},t}(),Cn=function(){function t(t){this.Vu=t,this.Uu={}}return t.prototype.get=function(t){var e=this.Vu(t),n=this.Uu[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(o[0].isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Vu(t),r=this.Uu[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Uu[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Vu(t),n=this.Uu[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Uu[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){F(this.Uu,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.J=function(){return U(this.Uu)},t}(),Tn=function(){function t(t){var e=this;this.xu=null,this.ju=null,this.result=void 0,this.error=void 0,this.Lu=!1,this.qu=!1,t((function(t){e.Lu=!0,e.result=t,e.xu&&e.xu(t)}),(function(t){e.Lu=!0,e.error=t,e.ju&&e.ju(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.qu&&m("Called next() or catch() twice for PersistencePromise"),this.qu=!0,this.Lu?this.error?this.Bu(n,this.error):this.Mu(e,this.result):new t((function(t,i){r.xu=function(n){r.Mu(e,n).next(t,i)},r.ju=function(e){r.Bu(n,e).next(t,i)}}))},t.prototype.Qu=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.Gu=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Mu=function(e,n){return e?this.Gu((function(){return e(n)})):t.resolve(n)},t.prototype.Bu=function(e,n){return e?this.Gu((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Wu=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.zu=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Wu(r)},t}(),Sn=function(){function t(){this.Ku=new Cn((function(t){return t.toString()})),this.Hu=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return g(void 0!==this.Ju,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this.Ju},set:function(t){g(void 0===this.Ju||this.Ju.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this.Ju=t},enumerable:!0,configurable:!0}),t.prototype.Yu=function(t,e){this.Xu(),this.readTime=e,this.Ku.set(t.key,t)},t.prototype.$u=function(t,e){this.Xu(),e&&(this.readTime=e),this.Ku.set(t,null)},t.prototype.Zu=function(t,e){this.Xu();var n=this.Ku.get(e);return void 0!==n?Tn.resolve(n):this.ts(t,e)},t.prototype.getEntries=function(t,e){return this.ns(t,e)},t.prototype.apply=function(t){return this.Xu(),this.Hu=!0,this.es(t)},t.prototype.Xu=function(){g(!this.Hu,"Changes have already been applied.")},t}(),An="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nn=function(){function t(){this.rs=[]}return t.prototype.us=function(t){this.rs.push(t)},t.prototype.ss=function(){this.rs.forEach((function(t){return t()}))},t}(),kn=function(){function t(e){this.db=e,12.2===t.os(a.getUA())&&v("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.hs=function(e,n,r){return g(t.cs(),"IndexedDB not supported in current environment."),d("SimpleDb","Opening database:",e),new Tn((function(i,o){var s=window.indexedDB.open(e,n);s.onsuccess=function(e){i(new t(e.target.result))},s.onblocked=function(){o(new A(S.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=function(t){var e=t.target.error;o("VersionError"===e.name?new A(S.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):e)},s.onupgradeneeded=function(t){d("SimpleDb",'Database "'+e+'" requires upgrade from version:',t.oldVersion),r.createOrUpgrade(t.target.result,s.transaction,t.oldVersion,lr).next((function(){d("SimpleDb","Database upgrade to version "+lr+" complete")}))}})).Qu()},t.delete=function(t){return d("SimpleDb","Removing database:",t),Dn(window.indexedDB.deleteDatabase(t)).Qu()},t.cs=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(t.as())return!0;if(void 0===window.navigator)return!1;var e=a.getUA(),n=t.os(e),r=0<n&&n<10,i=t.fs(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.as=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.ls)},t.ds=function(t,e){return t.store(e)},t.os=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.fs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.vs=function(t){this.db.onversionchange=function(e){return t(e)}},t.prototype.runTransaction=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,s,a,u,c;return o.__generator(this,(function(h){switch(h.label){case 0:r=t.startsWith("readonly"),i=t.endsWith("idempotent"),s=0,a=function(){var t,a,c,h;return o.__generator(this,(function(o){switch(o.label){case 0:++s,t=Rn.open(u.db,r?"readonly":"readwrite",e),o.label=1;case 1:return o.trys.push([1,3,,4]),(a=n(t).catch((function(e){return t.abort(e),Tn.reject(e)})).Qu()).catch((function(){})),[4,t.ws];case 2:return o.sent(),[2,{value:a}];case 3:return d("SimpleDb","Transaction failed with error: %s. Retrying: %s.",(c=o.sent()).message,h=i&&"FirebaseError"!==c.name&&s<3),h?[3,4]:[2,{value:Promise.reject(c)}];case 4:return[2]}}))},u=this,h.label=1;case 1:return[5,a()];case 2:return"object"==typeof(c=h.sent())?[2,c.value]:[3,1];case 3:return[2]}}))}))},t.prototype.close=function(){this.db.close()},t}(),xn=function(){function t(t){this.ms=t,this.ps=!1,this.gs=null}return Object.defineProperty(t.prototype,"Lu",{get:function(){return this.ps},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bs",{get:function(){return this.gs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ms=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.ps=!0},t.prototype.ys=function(t){this.gs=t},t.prototype.delete=function(){return Dn(this.ms.delete())},t}(),Rn=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this._s=new pn,this.transaction.oncomplete=function(){e._s.resolve()},this.transaction.onabort=function(){t.error?e._s.reject(t.error):e._s.resolve()},this.transaction.onerror=function(t){var n=Ln(t.target.error);e._s.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"ws",{get:function(){return this._s.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this._s.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return g(!!e,"Object store not part of transaction: "+t),new On(e)},t}(),On=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Dn(n)},t.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),Dn(this.store.add(t))},t.prototype.get=function(t){var e=this;return Dn(this.store.get(t)).next((function(n){return void 0===n&&(n=null),d("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),Dn(this.store.delete(t))},t.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),Dn(this.store.count())},t.prototype.Is=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Ts(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Es=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ds=!1;var r=this.cursor(n);return this.Ts(r,(function(t,e,n){return n.delete()}))},t.prototype.Ss=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Ts(r,e)},t.prototype.Rs=function(t){var e=this.cursor({});return new Tn((function(n,r){e.onerror=function(t){var e=Ln(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Ts=function(t,e){var n=[];return new Tn((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new xn(i),s=e(i.primaryKey,i.value,o);if(s instanceof Tn){var a=s.catch((function(t){return o.done(),Tn.reject(t)}));n.push(a)}o.Lu?r():null===o.bs?i.continue():i.continue(o.bs)}else r()}})).next((function(){return Tn.Wu(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(g(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ds?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Dn(t){return new Tn((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Ln(t.target.error);n(e)}}))}var Pn=!1;function Ln(t){var e=kn.os(a.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new A("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Pn||(Pn=!0,setTimeout((function(){throw r}),0)),r}}return t}var Mn=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Cs=n,this.As=r,this.Ps={}}return t.ks=function(e,n,r,i){return g(""!==e.uid,"UserID must not be an empty string."),new t(e.l()?e.uid:"",n,r,i)},t.prototype.Ns=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jn(t).Ss({index:yr.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Os=function(t,e,n){return this.Fs(t).next((function(e){return e.lastStreamToken=n.toBase64(),qn(t).put(e)}))},t.prototype.Vs=function(t){return this.Fs(t).next((function(t){return ge.fromBase64String(t.lastStreamToken)}))},t.prototype.Us=function(t,e){return this.Fs(t).next((function(n){return n.lastStreamToken=e.toBase64(),qn(t).put(n)}))},t.prototype.xs=function(t,e,n,r){var i=this,o=Vn(t),s=jn(t);return s.add({}).next((function(a){g("number"==typeof a,"Auto-generated key is not a number");for(var u=new _n(a,e,n,r),c=i.serializer.js(i.userId,u),h=[],l=new mt((function(t,e){return _(t.nt(),e.nt())})),f=0,p=r;f<p.length;f++){var d=p[f],v=mr.key(i.userId,d.key.path,a);l=l.add(d.key.path.H()),h.push(s.put(c)),h.push(o.put(v,mr.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Cs.Ls(t,e))})),t.us((function(){i.Ps[a]=u.keys()})),Tn.Wu(h).next((function(){return u}))}))},t.prototype.qs=function(t,e){var n=this;return jn(t).get(e).next((function(t){return t?(g(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.Bs(t)):null}))},t.prototype.Ms=function(t,e){var n=this;return this.Ps[e]?Tn.resolve(this.Ps[e]):this.qs(t,e).next((function(t){if(t){var r=t.keys();return n.Ps[e]=r,r}return null}))},t.prototype.Qs=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return jn(t).Ss({index:yr.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(g(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.Bs(e)),i.done()})).next((function(){return o}))},t.prototype.Gs=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jn(t).Ss({index:yr.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Ws=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jn(t).Is(yr.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.Bs(t)}))}))},t.prototype.zs=function(t,e){var n=this,r=mr.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Vn(t).Ss({range:i},(function(r,i,s){var a=r[0],u=r[2],c=wn(r[1]);if(a===n.userId&&e.path.isEqual(c))return jn(t).get(u).next((function(t){if(!t)throw m("Dangling document-mutation reference found: "+r+" which points to "+u);g(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+u),o.push(n.serializer.Bs(t))}));s.done()})).next((function(){return o}))},t.prototype.Ks=function(t,e){var n=this,r=new mt(_),i=[];return e.forEach((function(e){var o=mr.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Vn(t).Ss({range:s},(function(t,i,o){var s=t[0],a=t[2],u=wn(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),Tn.Wu(i).next((function(){return n.Hs(t,r)}))},t.prototype.Js=function(t,e){var n=this;g(!e.Nn(),"Document queries shouldn't go down this path"),g(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=mr.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new mt(_);return Vn(t).Ss({range:s},(function(t,e,o){var s=t[0],u=t[2],c=wn(t[1]);s===n.userId&&r.$(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Hs(t,a)}))},t.prototype.Hs=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(jn(t).get(e).next((function(t){if(null===t)throw m("Dangling document-mutation reference found, which points to "+e);g(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.Bs(t))})))})),Tn.Wu(i).next((function(){return r}))},t.prototype.Ys=function(t,e){var n=this;return Un(t.Xs,this.userId,e).next((function(r){return t.us((function(){n.$s(e.batchId)})),Tn.forEach(r,(function(e){return n.As.Zs(t,e)}))}))},t.prototype.$s=function(t){delete this.Ps[t]},t.prototype.to=function(t){var e=this;return this.Ns(t).next((function(n){if(!n)return Tn.resolve();var r=IDBKeyRange.lowerBound(mr.prefixForUser(e.userId)),i=[];return Vn(t).Ss({range:r},(function(t,n,r){if(t[0]===e.userId){var o=wn(t[1]);i.push(o)}else r.done()})).next((function(){g(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(t){return t.nt()})))}))}))},t.prototype.Ou=function(t,e){return Fn(t,this.userId,e)},t.prototype.Fs=function(t){var e=this;return qn(t).get(this.userId).next((function(t){return t||new vr(e.userId,-1,"")}))},t}();function Fn(t,e,n){var r=mr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Vn(t).Ss({range:o,Ds:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function Un(t,e,n){var r=t.store(yr.store),i=t.store(mr.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ss({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){g(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=mr.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Tn.Wu(o).next((function(){return c}))}function jn(t){return Mr.ds(t,yr.store)}function Vn(t){return Mr.ds(t,mr.store)}function qn(t){return Mr.ds(t,vr.store)}var Hn=function(){function t(t,e){this.no=t,g((1&t)===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.io(void 0!==e?e:this.no)}return t.prototype.next=function(){var t=this.eo;return this.eo+=2,t},t.prototype.after=function(t){return this.io(t+2),this.next()},t.prototype.io=function(t){g((1&t)===this.no,"Cannot supply target ID from different generator ID"),this.eo=t},t.ro=function(){return new t(0,2)},t.uo=function(){return new t(1)},t}(),Bn=function(){function t(t,e,n){this.so=t,this.oo=e,this.Cs=n}return t.prototype.ho=function(t,e){var n=this;return this.oo.zs(t,e).next((function(r){return n.co(t,e,r)}))},t.prototype.co=function(t,e,n){return this.so.Zu(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Gt(e,t);return t}))},t.prototype.ao=function(t,e,n){var r=xe();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Gt(t,e);r=r.lt(t,e)})),r},t.prototype.fo=function(t,e){var n=this;return this.so.getEntries(t,e).next((function(e){return n.lo(t,e)}))},t.prototype.lo=function(t,e){var n=this;return this.oo.Ks(t,e).next((function(r){var i=n.ao(t,e,r),o=ke();return i.forEach((function(t,e){e||(e=new Zt(t,at.q())),o=o.lt(t,e)})),o}))},t.prototype.do=function(t,e,n){return e.Nn()?this.vo(t,e.path):e.ui()?this.wo(t,e,n):this.mo(t,e,n)},t.prototype.vo=function(t,e){return this.ho(t,new ft(e)).next((function(t){var e=Oe();return t instanceof Xt&&(e=e.lt(t.key,t)),e}))},t.prototype.wo=function(t,e,n){var r=this;g(e.path.J(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,o=Oe();return this.Cs.po(t,i).next((function(s){return Tn.forEach(s,(function(s){var a=e.Hn(s.child(i));return r.mo(t,a,n).next((function(t){t.forEach((function(t,e){o=o.lt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.mo=function(t,e,n){var r,i,o=this;return this.so.do(t,e,n).next((function(n){return r=n,o.oo.Js(t,e)})).next((function(e){return o.bo(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c),l=u.Gt(h,h,o.En);r=l instanceof Xt?r.lt(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.bo=function(t,e,n){for(var r=Me(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof xt&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.so.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Xt&&(c=c.lt(t,e))})),c}))},t}(),Wn=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.yo=n,this._o=r}return t.Io=function(e,n){for(var r=Me(),i=Me(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Gn=function(){function t(t,e,n){this.persistence=t,this.To=e,this.Eo=new En,this.Do=new pt(_),this.So=new Cn((function(t){return t.canonicalId()})),this.Ro=at.MIN,g(t.Co,"LocalStore was passed an unstarted persistence implementation"),this.persistence.As.Ao(this.Eo),this.oo=t.Po(n),this.ko=t.No(),this.Oo=t.Fo(),this.Vo=new Bn(this.ko,this.oo,this.persistence.Uo()),this.To.xo(this.Vo)}return t.prototype.start=function(){return this.jo()},t.prototype.Lo=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i=this;return o.__generator(this,(function(o){switch(o.label){case 0:return e=this.oo,n=this.Vo,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.oo.Ws(r).next((function(s){return o=s,e=i.persistence.Po(t),n=new Bn(i.ko,e,i.persistence.Uo()),e.Ws(r)})).next((function(t){for(var e=[],i=[],s=Me(),a=0,u=o;a<u.length;a++){var c=u[a];e.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var p=0,d=t;p<d.length;p++){i.push((c=d[p]).batchId);for(var v=0,y=c.mutations;v<y.length;v++)s=s.add((f=y[v]).key)}return n.fo(r,s).next((function(t){return{qo:t,Bo:e,Mo:i}}))}))}))];case 1:return r=o.sent(),this.oo=e,this.Vo=n,this.To.xo(this.Vo),[2,r]}}))}))},t.prototype.Qo=function(t){var e,n=this,r=st.now(),i=t.reduce((function(t,e){return t.add(e.key)}),Me());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.Vo.fo(o,i).next((function(i){e=i;for(var s=[],a=0,u=t;a<u.length;a++){var c=u[a],h=c.rn(e.get(c.key));null!=h&&s.push(new xt(c.key,h,h.un(),At.exists(!0)))}return n.oo.xs(o,r,s,t)}))})).then((function(t){var n=t.bu(e);return{batchId:t.batchId,Ku:n}}))},t.prototype.Go=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return e.oo.Ms(n,t).next((function(t){return t?e.Vo.fo(n,t):Tn.resolve(null)}))}))},t.prototype.Os=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=t.batch.keys(),i=e.ko.Wo({zo:!0});return e.oo.Os(n,t.batch,t.streamToken).next((function(){return e.Ko(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.oo.to(n)})).next((function(){return e.Vo.fo(n,r)}))}))},t.prototype.Ho=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return e.oo.qs(n,t).next((function(t){return g(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.oo.Ys(n,t)})).next((function(){return e.oo.to(n)})).next((function(){return e.Vo.fo(n,r)}))}))},t.prototype.Gs=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(e){return t.oo.Gs(e)}))},t.prototype.Vs=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(e){return t.oo.Vs(e)}))},t.prototype.Us=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return e.oo.Us(n,t)}))},t.prototype.Jo=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(e){return t.Oo.Jo(e)}))},t.prototype.Yo=function(e){var n=this,r=e.li,i=this.Do;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var s=n.ko.Wo({zo:!0});i=n.Do;var a=[];M(e.Si,(function(e,s){var u=i.get(e);if(u){a.push(n.Oo.Xo(o,s.Vi,e).next((function(){return n.Oo.$o(o,s.Oi,e)})));var c=s.resumeToken;if(c.bn()>0){var h=u.vi(c,r).di(o.Zo);i=i.lt(e,h),t.th(u,h,s)&&a.push(n.Oo.nh(o,h))}}}));var u=ke(),c=Me();if(e.Ci.forEach((function(t,e){c=c.add(t)})),a.push(s.getEntries(o,c).next((function(t){e.Ci.forEach((function(i,c){var h=t.get(i);c instanceof Zt&&c.version.isEqual(at.MIN)?(s.$u(i,r),u=u.lt(i,c)):null==h||c.version.h(h.version)>0||0===c.version.h(h.version)&&h.hasPendingWrites?(g(!at.MIN.isEqual(r),"Cannot add a document when the remote version is zero"),s.Yu(c,r),u=u.lt(i,c)):d("LocalStore","Ignoring outdated watch update for ",i,". Current version:",h.version," Watch version:",c.version),e.Ai.has(i)&&a.push(n.persistence.As.ih(o,i))}))}))),!r.isEqual(at.MIN)){var h=n.Oo.Jo(o).next((function(t){return g(r.h(t)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+t),n.Oo.eh(o,o.Zo,r)}));a.push(h)}return Tn.Wu(a).next((function(){return s.apply(o)})).next((function(){return n.Vo.lo(o,u)}))})).then((function(t){return n.Do=i,t}))},t.th=function(t,e,n){return g(e.resumeToken.bn()>0,"Attempted to persist target data with no resume token"),0===t.resumeToken.bn()||e.li.B()-t.li.B()>=this.rh||n.Oi.size+n.Fi.size+n.Vi.size>0},t.prototype.uh=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.Eo.Su(i.yo,o),this.Eo.Au(i._o,o),!i.fromCache){var s=this.Do.get(o);g(null!==s,"Can't set limbo-free snapshot version for unknown target: "+o);var a=s.wi(s.li);this.Do=this.Do.lt(o,a)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Tn.forEach(t,(function(t){return Tn.forEach(t._o,(function(t){return e.persistence.As.Ru(n,t)}))}))}))},t.prototype.sh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===t&&(t=-1),e.oo.Qs(n,t)}))},t.prototype.oh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return e.Vo.ho(n,t)}))},t.prototype.hh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",(function(n){var r;return e.Oo.ah(n,t).next((function(i){return i?Tn.resolve(r=i):e.Oo.fh(n).next((function(i){return r=new Ie(t,i,0,n.Zo),e.Oo.lh(n,r).next((function(){return r}))}))}))})).then((function(n){return null===e.Do.get(n.targetId)&&(e.Do=e.Do.lt(n.targetId,n),e.So.set(t,n.targetId)),n}))},t.prototype.ah=function(t,e){var n=this.So.get(e);return void 0!==n?Tn.resolve(this.Do.get(n)):this.Oo.ah(t,e)},t.prototype.dh=function(t,e){var n=this,r=this.Do.get(t);return g(null!==r,"Tried to release nonexistent target: "+t),this.persistence.runTransaction("Release target",e?"readwrite-idempotent":"readwrite-primary-idempotent",(function(i){var o=n.Eo.Pu(t);return e?Tn.resolve():Tn.forEach(o,(function(t){return n.persistence.As.Ru(i,t)})).next((function(){n.persistence.As.removeTarget(i,r)}))})).then((function(){n.Do=n.Do.remove(t),n.So.delete(r.target)}))},t.prototype.vh=function(t,e){var n=this,r=at.MIN,i=Me();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.ah(o,t.Yn()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Oo.wh(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.To.do(o,t,e?r:at.MIN,e?i:Me())})).next((function(t){return{documents:t,mh:i}}))}))},t.prototype.ph=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return e.Oo.wh(n,t)}))},t.prototype.gh=function(){return this.persistence.gh()},t.prototype.bh=function(t){this.oo.$s(t)},t.prototype.yh=function(t){this.persistence.yh(t)},t.prototype.Ko=function(t,e,n){var r=this,i=e.batch,o=i.keys(),s=Tn.resolve();return o.forEach((function(r){s=s.next((function(){return n.Zu(t,r)})).next((function(t){var o=t,s=e._u.get(r);g(null!==s,"ackVersions should contain every doc in the write."),(!o||o.version.h(s)<0)&&((o=i.Wt(r,o,e))?n.Yu(o,e.yu):g(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))}))})),s.next((function(){return r.oo.Ys(t,i)}))},t.prototype._h=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return t.Ih(n,e.Do)}))},t.prototype.Th=function(t){var e=this,n=this.Do.get(t);return n?Promise.resolve(n.target):this.persistence.runTransaction("Get target data","readonly-idempotent",(function(n){return e.Oo.ye(n,t).next((function(t){return t?t.target:null}))}))},t.prototype.Eh=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(e){return t.ko.Eh(e,t.Ro)})).then((function(e){var n=e.Dh;return t.Ro=e.readTime,n}))},t.prototype.jo=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(t){return e.ko.Sh(t)}))];case 1:return t.Ro=n.sent(),[2]}}))}))},t.rh=3e8,t}();function zn(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){if(t.code!==S.FAILED_PRECONDITION||t.message!==An)throw t;return d("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Qn(t,e){var n=t[1],r=e[1],i=_(t[0],e[0]);return 0===i?_(n,r):i}var $n=function(){function t(t){this.Rh=t,this.buffer=new mt(Qn),this.Ch=0}return t.prototype.Ah=function(){return++this.Ch},t.prototype.Ph=function(t){var e=[t,this.Ah()];if(this.buffer.size<this.Rh)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Qn(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),Kn={kh:!1,Nh:0,Oh:0,Fh:0},Yn=function(){function t(t,e,n){this.Vh=t,this.Uh=e,this.xh=n}return t.jh=function(e){return new t(e,t.Lh,t.qh)},t.Bh=-1,t.Mh=1048576,t.Gh=new t(t.Qh=41943040,t.Lh=10,t.qh=1e3),t.DISABLED=new t(t.Bh,0,0),t}(),Jn=function(){function t(t,e,n){this.Wh=t,this.Qr=e,this.zh=n,this.Kh=!1,this.Hh=null}return t.prototype.start=function(){g(null===this.Hh,"Cannot start an already started LruScheduler"),this.Wh.params.Vh!==Yn.Bh&&this.Jh()},t.prototype.stop=function(){this.Hh&&(this.Hh.cancel(),this.Hh=null)},Object.defineProperty(t.prototype,"Co",{get:function(){return null!==this.Hh},enumerable:!0,configurable:!0}),t.prototype.Jh=function(){var t=this;g(null===this.Hh,"Cannot schedule GC while a task is pending");var e=this.Kh?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.Hh=this.Qr.fu("lru_garbage_collection",e,(function(){return t.Hh=null,t.Kh=!0,t.zh._h(t.Wh).then((function(){return t.Jh()})).catch(zn)}))},t}(),Xn=function(){function t(t,e){this.Yh=t,this.params=e}return t.prototype.Xh=function(t,e){return this.Yh.$h(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Zh=function(t,e){var n=this;if(0===e)return Tn.resolve(fn.Mr);var r=new $n(e);return this.Yh.ce(t,(function(t){return r.Ph(t.sequenceNumber)})).next((function(){return n.Yh.tc(t,(function(t){return r.Ph(t)}))})).next((function(){return r.maxValue}))},t.prototype.nc=function(t,e,n){return this.Yh.nc(t,e,n)},t.prototype.ic=function(t,e){return this.Yh.ic(t,e)},t.prototype.Ih=function(t,e){var n=this;return this.params.Vh===Yn.Bh?(d("LruGarbageCollector","Garbage collection skipped; disabled"),Tn.resolve(Kn)):this.ec(t).next((function(r){return r<n.params.Vh?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Vh),Kn):n.rc(t,e)}))},t.prototype.ec=function(t){return this.Yh.ec(t)},t.prototype.rc=function(t,e){var n,r,i,o,s,a,u,c=this,h=Date.now();return this.Xh(t,this.params.Uh).next((function(e){return e>c.params.xh?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.xh+" from "+e),r=c.params.xh):r=e,o=Date.now(),c.Zh(t,r)})).next((function(r){return n=r,s=Date.now(),c.nc(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.ic(t,n)})).next((function(t){return u=Date.now(),f()<=0&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-h)+"ms"),Tn.resolve({kh:!0,Nh:r,Oh:i,Fh:t})}))},t}(),Zn=function(){function t(t,e){this.As=t,this.serializer=e,this.uc=Hn.ro()}return t.prototype.fh=function(t){var e=this;return this.sc(t).next((function(n){return n.highestTargetId=e.uc.after(n.highestTargetId),e.oc(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Jo=function(t){return this.sc(t).next((function(t){return at.L(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.hc=function(t){return nr(t.Xs)},t.prototype.eh=function(t,e,n){var r=this;return this.sc(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.M()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.oc(t,i)}))},t.prototype.lh=function(t,e){var n=this;return this.cc(t,e).next((function(){return n.sc(t).next((function(r){return r.targetCount+=1,n.ac(e,r),n.oc(t,r)}))}))},t.prototype.nh=function(t,e){return this.cc(t,e)},t.prototype.fc=function(t,e){var n=this;return this.lc(t,e.targetId).next((function(){return tr(t).delete(e.targetId)})).next((function(){return n.sc(t)})).next((function(e){return g(e.targetCount>0,"Removing from an empty target cache"),e.targetCount-=1,n.oc(t,e)}))},t.prototype.nc=function(t,e,n){var r=this,i=0,o=[];return tr(t).Ss((function(s,a){var u=r.serializer.dc(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.fc(t,u)))})).next((function(){return Tn.Wu(o)})).next((function(){return i}))},t.prototype.ce=function(t,e){var n=this;return tr(t).Ss((function(t,r){var i=n.serializer.dc(r);e(i)}))},t.prototype.sc=function(t){return er(t.Xs)},t.prototype.oc=function(t,e){return(n=t,Mr.ds(n,Cr.store)).put(Cr.key,e);var n},t.prototype.cc=function(t,e){return tr(t).put(this.serializer.vc(e))},t.prototype.ac=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.wc=function(t){return this.sc(t).next((function(t){return t.targetCount}))},t.prototype.ah=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return tr(t).Ss({range:i,index:Er.queryTargetsIndexName},(function(t,r,i){var s=n.serializer.dc(r);e.isEqual(s.target)&&(o=s,i.done())})).next((function(){return o}))},t.prototype.$o=function(t,e,n){var r=this,i=[],o=rr(t);return e.forEach((function(e){var s=yn(e.path);i.push(o.put(new Ir(n,s))),i.push(r.As.Du(t,e))})),Tn.Wu(i)},t.prototype.Xo=function(t,e,n){var r=this,i=rr(t);return Tn.forEach(e,(function(e){var o=yn(e.path);return Tn.Wu([i.delete([n,o]),r.As.Ru(t,e)])}))},t.prototype.lc=function(t,e){var n=rr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.wh=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=rr(t),i=Me();return r.Ss({range:n,Ds:!0},(function(t,e,n){var r=wn(t[1]),o=new ft(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Ou=function(t,e){var n=yn(e.path),r=IDBKeyRange.bound([n],[E(n)],!1,!0),i=0;return rr(t).Ss({index:Ir.documentTargetsIndex,Ds:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.ye=function(t,e){var n=this;return tr(t).get(e).next((function(t){return t?n.serializer.dc(t):null}))},t}();function tr(t){return Mr.ds(t,Er.store)}function er(t){return kn.ds(t,Cr.store).get(Cr.key).next((function(t){return g(null!==t,"Missing metadata row."),t}))}function nr(t){return er(t).next((function(t){return t.highestListenSequenceNumber}))}function rr(t){return Mr.ds(t,Ir.store)}var ir=function(){function t(t,e){this.serializer=t,this.Cs=e}return t.prototype.Yu=function(t,e,n){return sr(t).put(ar(e),n)},t.prototype.$u=function(t,e){var n=sr(t),r=ar(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.mc(t,r)}))},t.prototype.Zu=function(t,e){var n=this;return sr(t).get(ar(e)).next((function(t){return n.pc(t)}))},t.prototype.gc=function(t,e){var n=this;return sr(t).get(ar(e)).next((function(t){var e=n.pc(t);return e?{bc:e,size:ur(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=xe();return this.yc(t,e,(function(t,e){var i=n.pc(e);r=r.lt(t,i)})).next((function(){return r}))},t.prototype._c=function(t,e){var n=this,r=xe(),i=new pt(ft.G);return this.yc(t,e,(function(t,e){var o=n.pc(e);o?(r=r.lt(t,o),i=i.lt(t,ur(e))):(r=r.lt(t,null),i=i.lt(t,0))})).next((function(){return{Ic:r,Tc:i}}))},t.prototype.yc=function(t,e,n){if(e.J())return Tn.resolve();var r=IDBKeyRange.bound(e.first().path.tt(),e.last().path.tt()),i=e.bt(),o=i.Dt();return sr(t).Ss({range:r},(function(t,e,r){for(var s=ft.at(t);o&&ft.G(o,s)<0;)n(o,null),o=i.Dt();o&&o.isEqual(s)&&(n(o,e),o=i.St()?i.Dt():null),o?r.ys(o.path.tt()):r.done()})).next((function(){for(;o;)n(o,null),o=i.St()?i.Dt():null}))},t.prototype.do=function(t,e,n){var r=this;g(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Oe(),o=e.path.length+1,s={};if(n.isEqual(at.MIN)){var a=e.path.tt();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.tt(),c=this.serializer.Ec(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=_r.collectionReadTimeIndex}return sr(t).Ss(s,(function(t,n,s){if(t.length===o){var a=r.serializer.Dc(n);e.path.$(a.key.path)?a instanceof Xt&&e.matches(a)&&(i=i.lt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Eh=function(t,e){var n=this,r=ke(),i=this.serializer.Ec(e),o=sr(t),s=IDBKeyRange.lowerBound(i,!0);return o.Ss({index:_r.readTimeIndex,range:s},(function(t,e){var o=n.serializer.Dc(e);r=r.lt(o.key,o),i=e.readTime})).next((function(){return{Dh:r,readTime:n.serializer.Sc(i)}}))},t.prototype.Sh=function(t){var e=this,n=sr(t),r=at.MIN;return n.Ss({index:_r.readTimeIndex,reverse:!0},(function(t,n,i){n.readTime&&(r=e.serializer.Sc(n.readTime)),i.done()})).next((function(){return r}))},t.prototype.Wo=function(e){return new t.Rc(this,!!e&&e.zo)},t.prototype.Cc=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return or(t).get(br.key).next((function(t){return g(!!t,"Missing document cache metadata"),t}))},t.prototype.mc=function(t,e){return or(t).put(br.key,e)},t.prototype.pc=function(t){if(t){var e=this.serializer.Dc(t);return e instanceof Zt&&e.version.isEqual(at.q())?null:e}return null},t.Rc=function(t){function e(e,n){var r=t.call(this)||this;return r.Ac=e,r.zo=n,r.Pc=new Cn((function(t){return t.toString()})),r}return o.__extends(e,t),e.prototype.es=function(t){var e=this,n=[],r=0,i=new mt((function(t,e){return _(t.nt(),e.nt())}));return this.Ku.forEach((function(o,s){var a=e.Pc.get(o);if(g(void 0!==a,"Cannot modify a document that wasn't read (for "+o+")"),s){g(!e.readTime.isEqual(at.MIN),"Cannot add a document with a read time of zero");var u=e.Ac.serializer.kc(s,e.readTime);i=i.add(o.path.H());var c=ur(u);r+=c-a,n.push(e.Ac.Yu(t,o,u))}else if(r-=a,e.zo){var h=e.Ac.serializer.kc(new Zt(o,at.q()),e.readTime);n.push(e.Ac.Yu(t,o,h))}else n.push(e.Ac.$u(t,o))})),i.forEach((function(r){n.push(e.Ac.Cs.Ls(t,r))})),n.push(this.Ac.updateMetadata(t,r)),Tn.Wu(n)},e.prototype.ts=function(t,e){var n=this;return this.Ac.gc(t,e).next((function(t){return null===t?(n.Pc.set(e,0),null):(n.Pc.set(e,t.size),t.bc)}))},e.prototype.ns=function(t,e){var n=this;return this.Ac._c(t,e).next((function(t){var e=t.Ic;return t.Tc.forEach((function(t,e){n.Pc.set(t,e)})),e}))},e}(Sn),t}();function or(t){return Mr.ds(t,br.store)}function sr(t){return Mr.ds(t,_r.store)}function ar(t){return t.path.tt()}function ur(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw m("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var cr=function(){function t(){this.Nc=new hr}return t.prototype.Ls=function(t,e){return this.Nc.add(e),Tn.resolve()},t.prototype.po=function(t,e){return Tn.resolve(this.Nc.getEntries(e))},t}(),hr=function(){function t(){this.index={}}return t.prototype.add=function(t){g(t.length%2==1,"Expected a collection path.");var e=t.X(),n=t.H(),r=this.index[e]||new mt(ct.G),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.X(),n=t.H(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new mt(ct.G)).tt()},t}(),lr=9,fr=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;g(n<r&&n>=0&&r<=lr,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Rn(e);n<1&&r>=1&&(function(t){t.createObjectStore(dr.store)}(t),function(t){t.createObjectStore(vr.store,{keyPath:vr.keyPath}),t.createObjectStore(yr.store,{keyPath:yr.keyPath,autoIncrement:!0}).createIndex(yr.userMutationsIndex,yr.userMutationsKeyPath,{unique:!0}),t.createObjectStore(mr.store)}(t),Sr(t),function(t){t.createObjectStore(_r.store)}(t));var s=Tn.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ir.store),t.deleteObjectStore(Er.store),t.deleteObjectStore(Cr.store)}(t),Sr(t)),s=s.next((function(){return function(t){var e=t.store(Cr.store),n=new Cr(0,0,at.MIN.M(),0);return e.put(Cr.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(yr.store).Is().next((function(n){t.deleteObjectStore(yr.store),t.createObjectStore(yr.store,{keyPath:yr.keyPath,autoIncrement:!0}).createIndex(yr.userMutationsIndex,yr.userMutationsKeyPath,{unique:!0});var r=e.store(yr.store),i=n.map((function(t){return r.put(t)}));return Tn.Wu(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(Ar.store,{keyPath:Ar.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(br.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(_r.store);e.createIndex(_r.readTimeIndex,_r.readTimeIndexPath,{unique:!1}),e.createIndex(_r.collectionReadTimeIndex,_r.collectionReadTimeIndexPath,{unique:!1})}(e)}))),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(_r.store).Ss((function(t,n){e+=ur(n)})).next((function(){var n=new br(e);return t.store(br.store).put(br.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(vr.store),r=t.store(yr.store);return n.Is().next((function(n){return Tn.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Is(yr.userMutationsIndex,i).next((function(r){return Tn.forEach(r,(function(r){g(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.Bs(r);return Un(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Ir.store),n=t.store(_r.store);return nr(t).next((function(t){var r=[];return n.Ss((function(n,i){var o=new ct(n),s=function(t){return[0,yn(t)]}(o);r.push(e.get(s).next((function(n){return n?Tn.resolve():function(n){return e.put(new Ir(0,yn(n),t))}(o)})))})).next((function(){return Tn.Wu(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Tr.store,{keyPath:Tr.keyPath});var n=e.store(Tr.store),r=new hr,i=function(t){if(r.add(t)){var e=t.X(),i=t.H();return n.put({collectionId:e,parent:yn(i)})}};return e.store(_r.store).Ss({Ds:!0},(function(t,e){var n=new ct(t);return i(n.H())})).next((function(){return e.store(mr.store).Ss({Ds:!0},(function(t,e){var n=wn(t[1]);return i(n.H())}))}))},t}(),pr=function(t,e){this.seconds=t,this.nanoseconds=e},dr=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),vr=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),yr=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),mr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,yn(e)]},t.key=function(t,e,n){return[t,yn(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),gr=function(t,e){this.path=t,this.readTime=e},wr=function(t,e){this.path=t,this.version=e},_r=function(){function t(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),br=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),Er=function(){function t(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),Ir=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,g(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),Cr=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),Tr=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function Sr(t){t.createObjectStore(Ir.store,{keyPath:Ir.keyPath}).createIndex(Ir.documentTargetsIndex,Ir.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Er.store,{keyPath:Er.keyPath}).createIndex(Er.queryTargetsIndexName,Er.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Cr.store)}var Ar=function(){function t(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}return t.store="clientMetadata",t.keyPath="clientId",t}(),Nr=o.__spreadArrays([vr.store,yr.store,mr.store,_r.store,Er.store,dr.store,Cr.store,Ir.store],[Ar.store]),kr=o.__spreadArrays(Nr,[br.store]),xr=o.__spreadArrays(kr,[Tr.store]),Rr=function(){function t(){this.Oc=new hr}return t.prototype.Ls=function(t,e){var n=this;if(g(e.length%2==1,"Expected a collection path."),!this.Oc.has(e)){var r=e.X(),i=e.H();t.us((function(){n.Oc.add(e)}));var o={collectionId:r,parent:yn(i)};return Or(t).put(o)}return Tn.resolve()},t.prototype.po=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[E(e),""],!1,!0);return Or(t).Is(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(wn(o.parent))}return n}))},t}();function Or(t){return Mr.ds(t,Tr.store)}var Dr=function(){function t(t){this.Fc=t}return t.prototype.Dc=function(t){if(t.document)return this.Fc.Ke(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=ft.at(t.noDocument.path),n=this.Vc(t.noDocument.readTime);return new Zt(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=ft.at(t.unknownDocument.path),n=this.Vc(t.unknownDocument.version),new te(e,n)):m("Unexpected DbRemoteDocument")},t.prototype.kc=function(t,e){var n=this.Ec(e),r=t.key.path.H().tt();if(t instanceof Xt){var i=t.proto?t.proto:this.Fc.ze(t),o=t.hasCommittedMutations;return new _r(null,null,i,o,n,r)}if(t instanceof Zt){var s=t.key.path.tt(),a=this.Uc(t.version);return o=t.hasCommittedMutations,new _r(null,new gr(s,a),null,o,n,r)}if(t instanceof te){s=t.key.path.tt();var u=this.Uc(t.version);return new _r(new wr(s,u),null,null,!0,n,r)}return m("Unexpected MaybeDocument")},t.prototype.Ec=function(t){var e=t.M();return[e.seconds,e.nanoseconds]},t.prototype.Sc=function(t){var e=new st(t[0],t[1]);return at.L(e)},t.prototype.Uc=function(t){var e=t.M();return new pr(e.seconds,e.nanoseconds)},t.prototype.Vc=function(t){var e=new st(t.seconds,t.nanoseconds);return at.L(e)},t.prototype.js=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.Fc.ir(t)})),i=e.mutations.map((function(t){return n.Fc.ir(t)}));return new yr(t,e.batchId,e.En.toMillis(),r,i)},t.prototype.Bs=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.Fc.sr(t)})),r=t.mutations.map((function(t){return e.Fc.sr(t)})),i=st.fromMillis(t.localWriteTimeMs);return new _n(t.batchId,i,n,r)},t.prototype.xc=function(t){var e=[];return t.forEach((function(t){e.push(yn(t.path))})),e},t.prototype.jc=function(t){for(var e=Me(),n=0,r=t;n<r.length;n++)e=e.add(new ft(wn(r[n])));return e},t.prototype.dc=function(t){var e,n=this.Vc(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.Vc(t.lastLimboFreeSnapshotVersion):at.MIN;return e=void 0!==t.query.documents?this.Fc.vr(t.query):this.Fc.br(t.query),new Ie(e,t.targetId,0,t.lastListenSequenceNumber,n,r,ge.fromBase64String(t.resumeToken))},t.prototype.vc=function(t){g(0===t.fi,"Only queries with purpose 0 may be stored, got "+t.fi);var e,n=this.Uc(t.li),r=this.Uc(t.lastLimboFreeSnapshotVersion);e=t.target.Nn()?this.Fc.dr(t.target):this.Fc.wr(t.target);var i=t.resumeToken.toBase64();return new Er(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},t}(),Pr="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Lr=function(t){function e(e,n){var r=t.call(this)||this;return r.Xs=e,r.Zo=n,r}return o.__extends(e,t),e}(Nn),Mr=function(){function t(e,n,r,i,o,s,a,u){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Lc=s,this.qc=u,this.Bc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Mc=null,this.inForeground=!1,this.Qc=null,this.Gc=null,this.Wc=Number.NEGATIVE_INFINITY,this.zc=function(t){return Promise.resolve()},this.As=new jr(this,o),this.Kc=n+t.Hc,this.serializer=new Dr(a),this.document=i.document,this.Oo=new Zn(this.As,this.serializer),this.Cs=new Rr,this.so=new ir(this.serializer,this.Cs),!i.window||!i.window.localStorage)throw new A(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.Jc=this.window.localStorage}return t.ds=function(t,e){if(t instanceof Lr)return kn.ds(t.Xs,e);throw m("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.Yc=function(e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!t.cs())throw new A(S.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.Xc,e.Lc,e.serializer,e.qc)).start()];case 1:return r.sent(),[2,n]}}))}))},t.prototype.start=function(){var t=this;return g(!this.Co,"IndexedDbPersistence double-started!"),g(null!==this.window,"Expected 'window' to be defined"),kn.hs(this.Kc,lr,new fr(this.serializer)).then((function(e){return t.$c=e,t.Zc()})).then((function(){return t.ta(),t.na(),t.ia(),t.$c.runTransaction("readonly-idempotent",[Cr.store],(function(t){return nr(t)}))})).then((function(e){t.ea=new fn(e,t.qc)})).then((function(){t.Bc=!0})).catch((function(e){return t.$c&&t.$c.close(),Promise.reject(e)}))},t.prototype.ra=function(t){var e=this;return this.zc=function(n){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.Co?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.ua=function(t){var e=this;this.$c.vs((function(n){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yh=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Lc.$r((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.Co?[4,this.Zc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.Zc=function(){var t=this;return this.$c.runTransaction("readwrite-idempotent",xr,(function(e){return Ur(e).put(new Ar(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.sa(e).next((function(e){e||(t.isPrimary=!1,t.Lc.$r((function(){return t.zc(!1)})))}))})).next((function(){return t.oa(e)})).next((function(n){return t.isPrimary&&!n?t.ha(e).next((function(){return!1})):!!n&&t.ca(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return d("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Lc.$r((function(){return t.zc(e)})),t.isPrimary=e}))},t.prototype.sa=function(t){var e=this;return Fr(t).get(dr.key).next((function(t){return Tn.resolve(e.aa(t))}))},t.prototype.fa=function(t){return Ur(t).delete(this.clientId)},t.prototype.la=function(){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.da(this.Wc,18e5)?[3,2]:(this.Wc=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=t.ds(n,Ar.store);return r.Is().next((function(t){var n=e.va(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return Tn.forEach(i,(function(t){return r.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.wa(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.ia=function(){var t=this;this.Gc=this.Lc.fu("client_metadata_refresh",4e3,(function(){return t.Zc().then((function(){return t.la()})).then((function(){return t.ia()}))}))},t.prototype.aa=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.oa=function(t){var e=this;return Fr(t).get(dr.key).next((function(n){if(null!==n&&e.da(n.leaseTimestampMs,5e3)&&!e.ma(n.ownerId)){if(e.aa(n)&&e.networkEnabled)return!0;if(!e.aa(n)){if(!n.allowTabSynchronization)throw new A(S.FAILED_PRECONDITION,Pr);return!1}}return!(!e.networkEnabled||!e.inForeground)||Ur(t).Is().next((function(t){return void 0===e.va(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&d("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){switch(e.label){case 0:return this.Bc=!1,this.pa(),this.Gc&&(this.Gc.cancel(),this.Gc=null),this.ga(),this.ba(),[4,this.$c.runTransaction("readwrite-idempotent",[dr.store,Ar.store],(function(e){return t.ha(e).next((function(){return t.fa(e)}))}))];case 1:return e.sent(),this.$c.close(),this.ya(),[2]}}))}))},t.prototype.va=function(t,e){var n=this;return t.filter((function(t){return n.da(t.updateTimeMs,e)&&!n.ma(t.clientId)}))},t.prototype.gh=function(){var t=this;return this.$c.runTransaction("readonly-idempotent",[Ar.store],(function(e){return Ur(e).Is().next((function(e){return t.va(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return t.cs()?[4,kn.delete(e+t.Hc)]:[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"Co",{get:function(){return this.Bc},enumerable:!0,configurable:!0}),t.prototype.Po=function(t){return g(this.Co,"Cannot initialize MutationQueue before persistence is started."),Mn.ks(t,this.serializer,this.Cs,this.As)},t.prototype.Fo=function(){return g(this.Co,"Cannot initialize TargetCache before persistence is started."),this.Oo},t.prototype.No=function(){return g(this.Co,"Cannot initialize RemoteDocumentCache before persistence is started."),this.so},t.prototype.Uo=function(){return g(this.Co,"Cannot initialize IndexManager before persistence is started."),this.Cs},t.prototype.runTransaction=function(t,e,n){var r=this;d("IndexedDbPersistence","Starting transaction:",t);var i,o=e.endsWith("idempotent"),s=e.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.$c.runTransaction(s,xr,(function(o){return i=new Lr(o,r.ea.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?r.sa(o).next((function(t){return!!t||r.oa(o)})).next((function(e){if(!e)throw v("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Lc.$r((function(){return r.zc(!1)})),new A(S.FAILED_PRECONDITION,An);return n(i)})).next((function(t){return r.ca(o).next((function(){return t}))})):r._a(o).next((function(){return n(i)}))})).then((function(t){return i.ss(),t}))},t.prototype._a=function(t){var e=this;return Fr(t).get(dr.key).next((function(t){if(null!==t&&e.da(t.leaseTimestampMs,5e3)&&!e.ma(t.ownerId)&&!e.aa(t)&&!t.allowTabSynchronization)throw new A(S.FAILED_PRECONDITION,Pr)}))},t.prototype.ca=function(t){var e=new dr(this.clientId,this.allowTabSynchronization,Date.now());return Fr(t).put(dr.key,e)},t.cs=function(){return kn.cs()},t.Ia=function(t){var e=t.s.projectId;return t.s.o||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.ha=function(t){var e=this,n=Fr(t);return n.get(dr.key).next((function(t){return e.aa(t)?(d("IndexedDbPersistence","Releasing primary lease."),n.delete(dr.key)):Tn.resolve()}))},t.prototype.da=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(v("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.ta=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Qc=function(){t.Lc.$r((function(){return t.inForeground="visible"===t.document.visibilityState,t.Zc()}))},this.document.addEventListener("visibilitychange",this.Qc),this.inForeground="visible"===this.document.visibilityState)},t.prototype.ga=function(){this.Qc&&(g(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.Qc),this.Qc=null)},t.prototype.na=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Mc=function(){t.pa(),t.Lc.$r((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Mc))},t.prototype.ba=function(){this.Mc&&(g("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.Mc),this.Mc=null)},t.prototype.ma=function(t){try{var e=null!==this.Jc.getItem(this.wa(t));return d("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return v("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.pa=function(){try{this.Jc.setItem(this.wa(this.clientId),String(Date.now()))}catch(t){v("Failed to set zombie client id.",t)}},t.prototype.ya=function(){try{this.Jc.removeItem(this.wa(this.clientId))}catch(t){}},t.prototype.wa=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.Hc="main",t}();function Fr(t){return t.store(dr.store)}function Ur(t){return t.store(Ar.store)}var jr=function(){function t(t,e){this.db=t,this.Ta=null,this.Wh=new Xn(this,e)}return t.prototype.$h=function(t){var e=this.Ea(t);return this.db.Fo().wc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Ea=function(t){var e=0;return this.tc(t,(function(t){e++})).next((function(){return e}))},t.prototype.ce=function(t,e){return this.db.Fo().ce(t,e)},t.prototype.tc=function(t,e){return this.Da(t,(function(t,n){return e(n)}))},t.prototype.Ao=function(t){this.Ta=t},t.prototype.Du=function(t,e){return Vr(t,e)},t.prototype.Ru=function(t,e){return Vr(t,e)},t.prototype.nc=function(t,e,n){return this.db.Fo().nc(t,e,n)},t.prototype.Zs=function(t,e){return Vr(t,e)},t.prototype.Sa=function(t,e){return this.Ta.Ou(e)?Tn.resolve(!0):function(t,e){var n=!1;return qn(t).Rs((function(r){return Fn(t,r,e).next((function(t){return t&&(n=!0),Tn.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.ic=function(t,e){var n=this,r=this.db.No().Wo(),i=[],o=0;return this.Da(t,(function(s,a){if(a<=e){var u=n.Sa(t,s).next((function(e){if(!e)return o++,r.Zu(t,s).next((function(){return r.$u(s),rr(t).delete([0,yn(s.path)])}))}));i.push(u)}})).next((function(){return Tn.Wu(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.di(t.Zo);return this.db.Fo().nh(t,n)},t.prototype.ih=function(t,e){return Vr(t,e)},t.prototype.Da=function(t,e){var n,r=rr(t),i=fn.Mr;return r.Ss({index:Ir.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==fn.Mr&&e(new ft(wn(n)),i),i=s,n=o):i=fn.Mr})).next((function(){i!==fn.Mr&&e(new ft(wn(n)),i)}))},t.prototype.ec=function(t){return this.db.No().Cc(t)},t}();function Vr(t,e){return rr(t).put(function(t,e){return new Ir(0,yn(t.path),e)}(e,t.Zo))}var qr=function(){function t(){}return t.prototype.xo=function(t){this.Ra=t},t.prototype.do=function(t,e,n,r){var i=this;return g(void 0!==this.Ra,"setLocalDocumentsView() not called"),e.Jn()||n.isEqual(at.MIN)?this.Ca(t,e):this.Ra.fo(t,r).next((function(o){var s=i.Aa(e,o);return(e.ii()||e.ei())&&i.Pa(e.Fn,s,r,n)?i.Ca(t,e):(f()<=0&&d("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),e.toString()),i.Ra.do(t,e,n).next((function(t){return s.forEach((function(e){t=t.lt(e.key,e)})),t})))}))},t.prototype.Aa=function(t,e){var n=new mt((function(e,n){return t.Xn(e,n)}));return e.forEach((function(e,r){r instanceof Xt&&t.matches(r)&&(n=n.add(r))})),n},t.prototype.Pa=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.h(r)>0)},t.prototype.Ca=function(t,e){return f()<=0&&d("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.Ra.do(t,e,at.MIN)},t}(),Hr=function(){function t(t,e){this.Cs=t,this.As=e,this.oo=[],this.ka=1,this.lastStreamToken=ge.ai,this.Na=new mt(In.Sn)}return t.prototype.Ns=function(t){return Tn.resolve(0===this.oo.length)},t.prototype.Os=function(t,e,n){var r=e.batchId,i=this.Oa(r,"acknowledged");g(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.oo[i];return g(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Tn.resolve()},t.prototype.Vs=function(t){return Tn.resolve(this.lastStreamToken)},t.prototype.Us=function(t,e){return this.lastStreamToken=e,Tn.resolve()},t.prototype.xs=function(t,e,n,r){g(0!==r.length,"Mutation batches should not be empty");var i=this.ka;this.ka++,this.oo.length>0&&g(this.oo[this.oo.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new _n(i,e,n,r);this.oo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Na=this.Na.add(new In(u.key,i)),this.Cs.Ls(t,u.key.path.H())}return Tn.resolve(o)},t.prototype.qs=function(t,e){return Tn.resolve(this.Fa(e))},t.prototype.Ms=function(t,e){var n=this.Fa(e);return g(null!=n,"Failed to find local mutation batch."),Tn.resolve(n.keys())},t.prototype.Qs=function(t,e){var n=this.Va(e+1),r=n<0?0:n;return Tn.resolve(this.oo.length>r?this.oo[r]:null)},t.prototype.Gs=function(){return Tn.resolve(0===this.oo.length?-1:this.ka-1)},t.prototype.Ws=function(t){return Tn.resolve(this.oo.slice())},t.prototype.zs=function(t,e){var n=this,r=new In(e,0),i=new In(e,Number.POSITIVE_INFINITY),o=[];return this.Na.Lt([r,i],(function(t){g(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.Fa(t.Fu);g(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Tn.resolve(o)},t.prototype.Ks=function(t,e){var n=this,r=new mt(_);return e.forEach((function(t){var e=new In(t,0),i=new In(t,Number.POSITIVE_INFINITY);n.Na.Lt([e,i],(function(e){g(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.Fu)}))})),Tn.resolve(this.Ua(r))},t.prototype.Js=function(t,e){g(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;ft.ht(i)||(i=i.child(""));var o=new In(new ft(i),0),s=new mt(_);return this.Na.qt((function(t){var e=t.key.path;return!!n.$(e)&&(e.length===r&&(s=s.add(t.Fu)),!0)}),o),Tn.resolve(this.Ua(s))},t.prototype.Ua=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Fa(t);null!==r&&n.push(r)})),n},t.prototype.Ys=function(t,e){var n=this;g(0===this.Oa(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.oo.shift();var r=this.Na;return Tn.forEach(e.mutations,(function(i){var o=new In(i.key,e.batchId);return r=r.delete(o),n.As.Zs(t,i.key)})).next((function(){n.Na=r}))},t.prototype.$s=function(t){},t.prototype.Ou=function(t,e){var n=new In(e,0),r=this.Na.Bt(n);return Tn.resolve(e.isEqual(r&&r.key))},t.prototype.to=function(t){return 0===this.oo.length&&g(this.Na.J(),"Document leak -- detected dangling mutation references when queue is empty."),Tn.resolve()},t.prototype.Oa=function(t,e){var n=this.Va(t);return g(n>=0&&n<this.oo.length,"Batches must exist to be "+e),n},t.prototype.Va=function(t){return 0===this.oo.length?0:t-this.oo[0].batchId},t.prototype.Fa=function(t){var e=this.Va(t);if(e<0||e>=this.oo.length)return null;var n=this.oo[e];return g(n.batchId===t,"If found batch must match"),n},t}(),Br=function(){function t(t,e){this.Cs=t,this.xa=e,this.docs=new pt(ft.G),this.size=0}return t.prototype.Yu=function(t,e,n){g(!n.isEqual(at.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.xa(e);return this.docs=this.docs.lt(r,{bc:e,size:s,readTime:n}),this.size+=s-o,this.Cs.Ls(t,r.path.H())},t.prototype.$u=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Zu=function(t,e){var n=this.docs.get(e);return Tn.resolve(n?n.bc:null)},t.prototype.getEntries=function(t,e){var n=this,r=xe();return e.forEach((function(t){var e=n.docs.get(t);r=r.lt(t,e?e.bc:null)})),Tn.resolve(r)},t.prototype.do=function(t,e,n){g(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Oe(),i=new ft(e.path.child("")),o=this.docs.yt(i);o.St();){var s=o.Dt(),a=s.value,u=a.bc,c=a.readTime;if(!e.path.$(s.key.path))break;c.h(n)<=0||u instanceof Xt&&e.matches(u)&&(r=r.lt(u.key,u))}return Tn.resolve(r)},t.prototype.ja=function(t,e){return Tn.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Eh=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.Sh=function(t){return Tn.resolve(at.MIN)},t.prototype.Wo=function(e){return new t.Rc(this)},t.prototype.Cc=function(t){return Tn.resolve(this.size)},t.Rc=function(t){function e(e){var n=t.call(this)||this;return n.Ac=e,n}return o.__extends(e,t),e.prototype.es=function(t){var e=this,n=[];return this.Ku.forEach((function(r,i){i?n.push(e.Ac.Yu(t,i,e.readTime)):e.Ac.$u(r)})),Tn.Wu(n)},e.prototype.ts=function(t,e){return this.Ac.Zu(t,e)},e.prototype.ns=function(t,e){return this.Ac.getEntries(t,e)},e}(Sn),t}(),Wr=function(){function t(t){this.persistence=t,this.La=new Cn((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=at.MIN,this.highestTargetId=0,this.qa=0,this.Ba=new En,this.targetCount=0,this.uc=Hn.ro()}return t.prototype.ce=function(t,e){return this.La.forEach((function(t,n){return e(n)})),Tn.resolve()},t.prototype.Jo=function(t){return Tn.resolve(this.lastRemoteSnapshotVersion)},t.prototype.hc=function(t){return Tn.resolve(this.qa)},t.prototype.fh=function(t){var e=this.uc.after(this.highestTargetId);return this.highestTargetId=e,Tn.resolve(e)},t.prototype.eh=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.qa&&(this.qa=e),Tn.resolve()},t.prototype.cc=function(t){this.La.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.qa&&(this.qa=t.sequenceNumber)},t.prototype.lh=function(t,e){return g(!this.La.has(e.target),"Adding a target that already exists"),this.cc(e),this.targetCount+=1,Tn.resolve()},t.prototype.nh=function(t,e){return g(this.La.has(e.target),"Updating a non-existent target"),this.cc(e),Tn.resolve()},t.prototype.fc=function(t,e){return g(this.targetCount>0,"Removing a target from an empty cache"),g(this.La.has(e.target),"Removing a non-existent target from the cache"),this.La.delete(e.target),this.Ba.Pu(e.targetId),this.targetCount-=1,Tn.resolve()},t.prototype.nc=function(t,e,n){var r=this,i=0,o=[];return this.La.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.La.delete(s),o.push(r.lc(t,a.targetId)),i++)})),Tn.Wu(o).next((function(){return i}))},t.prototype.wc=function(t){return Tn.resolve(this.targetCount)},t.prototype.ah=function(t,e){var n=this.La.get(e)||null;return Tn.resolve(n)},t.prototype.ye=function(t,e){return m("Not yet implemented.")},t.prototype.$o=function(t,e,n){this.Ba.Su(e,n);var r=this.persistence.As,i=[];return r&&e.forEach((function(e){i.push(r.Du(t,e))})),Tn.Wu(i)},t.prototype.Xo=function(t,e,n){this.Ba.Au(e,n);var r=this.persistence.As,i=[];return r&&e.forEach((function(e){i.push(r.Ru(t,e))})),Tn.Wu(i)},t.prototype.lc=function(t,e){return this.Ba.Pu(e),Tn.resolve()},t.prototype.wh=function(t,e){var n=this.Ba.Nu(e);return Tn.resolve(n)},t.prototype.Ou=function(t,e){return Tn.resolve(this.Ba.Ou(e))},t}(),Gr=function(){function t(t,e){var n=this;this.clientId=t,this.Ma={},this.ea=new fn(0),this.Bc=!1,this.Bc=!0,this.As=e(this),this.Oo=new Wr(this),this.Cs=new cr,this.so=new Br(this.Cs,(function(t){return n.As.Qa(t)}))}return t.Ga=function(e,n){return new t(e,(function(t){return new $r(t,n)}))},t.Wa=function(e){return new t(e,(function(t){return new Qr(t)}))},t.prototype.shutdown=function(){return this.Bc=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Co",{get:function(){return this.Bc},enumerable:!0,configurable:!0}),t.prototype.gh=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.ra=function(t){return t(!0)},t.prototype.ua=function(){},t.prototype.yh=function(t){},t.prototype.Uo=function(){return this.Cs},t.prototype.Po=function(t){var e=this.Ma[t.v()];return e||(e=new Hr(this.Cs,this.As),this.Ma[t.v()]=e),e},t.prototype.Fo=function(){return this.Oo},t.prototype.No=function(){return this.so},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new zr(this.ea.next());return this.As.za(),n(i).next((function(t){return r.As.Ka(i).next((function(){return t}))})).Qu().then((function(t){return i.ss(),t}))},t.prototype.Ha=function(t,e){return Tn.zu((n=this.Ma,r=[],F(n,(function(t,e){return r.push(e)})),r).map((function(n){return function(){return n.Ou(t,e)}})));var n,r},t}(),zr=function(t){function e(e){var n=t.call(this)||this;return n.Zo=e,n}return o.__extends(e,t),e}(Nn),Qr=function(){function t(t){this.persistence=t,this.Ta=null,this.Ja=null}return Object.defineProperty(t.prototype,"Ya",{get:function(){if(this.Ja)return this.Ja;throw m("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.Ao=function(t){this.Ta=t},t.prototype.Du=function(t,e){return this.Ya.delete(e),Tn.resolve()},t.prototype.Ru=function(t,e){return this.Ya.add(e),Tn.resolve()},t.prototype.Zs=function(t,e){return this.Ya.add(e),Tn.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.Fo();return r.wh(t,e.targetId).next((function(t){t.forEach((function(t){return n.Ya.add(t)}))})).next((function(){return r.fc(t,e)}))},t.prototype.za=function(){this.Ja=new Set},t.prototype.Ka=function(t){var e=this,n=this.persistence.No().Wo();return Tn.forEach(this.Ya,(function(r){return e.Xa(t,r).next((function(t){t||n.$u(r)}))})).next((function(){return e.Ja=null,n.apply(t)}))},t.prototype.ih=function(t,e){var n=this;return this.Xa(t,e).next((function(t){t?n.Ya.delete(e):n.Ya.add(e)}))},t.prototype.Qa=function(t){return 0},t.prototype.Xa=function(t,e){var n=this;return Tn.zu([function(){return n.persistence.Fo().Ou(t,e)},function(){return n.persistence.Ha(t,e)},function(){return Tn.resolve(n.Ta.Ou(e))}])},t}(),$r=function(){function t(t,e){this.persistence=t,this.Ta=null,this.$a=new Cn((function(t){return yn(t.path)})),this.Wh=new Xn(this,e)}return t.prototype.za=function(){},t.prototype.Ka=function(t){return Tn.resolve()},t.prototype.ce=function(t,e){return this.persistence.Fo().ce(t,e)},t.prototype.$h=function(t){var e=this.Za(t);return this.persistence.Fo().wc(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Za=function(t){var e=0;return this.tc(t,(function(t){e++})).next((function(){return e}))},t.prototype.tc=function(t,e){var n=this;return Tn.forEach(this.$a,(function(r,i){return n.Sa(t,r,i).next((function(t){return t?Tn.resolve():e(i)}))}))},t.prototype.Ao=function(t){this.Ta=t},t.prototype.nc=function(t,e,n){return this.persistence.Fo().nc(t,e,n)},t.prototype.ic=function(t,e){var n=this,r=0,i=this.persistence.No(),o=i.Wo();return i.ja(t,(function(i){return n.Sa(t,i,e).next((function(t){t||(r++,o.$u(i))}))})).next((function(){return o.apply(t)})).next((function(){return r}))},t.prototype.Zs=function(t,e){return this.$a.set(e,t.Zo),Tn.resolve()},t.prototype.removeTarget=function(t,e){var n=e.di(t.Zo);return this.persistence.Fo().nh(t,n)},t.prototype.Du=function(t,e){return this.$a.set(e,t.Zo),Tn.resolve()},t.prototype.Ru=function(t,e){return this.$a.set(e,t.Zo),Tn.resolve()},t.prototype.ih=function(t,e){return this.$a.set(e,t.Zo),Tn.resolve()},t.prototype.Qa=function(t){var e=t.key.toString().length;return t instanceof Xt&&(e+=t.data().bn()),e},t.prototype.Sa=function(t,e,n){var r=this;return Tn.zu([function(){return r.persistence.Ha(t,e)},function(){return Tn.resolve(r.Ta.Ou(e))},function(){return r.persistence.Fo().Ou(t,e)},function(){var t=r.$a.get(e);return Tn.resolve(void 0!==t&&t>n)}])},t.prototype.ec=function(t){return this.persistence.No().Cc(t)},t}(),Kr=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Lc=t,this.Gr=e,this.tf=n,this.nf=r,this.if=i,this.ef=0,this.rf=null,this.uf=Date.now(),this.reset()}return t.prototype.reset=function(){this.ef=0},t.prototype.sf=function(){this.ef=this.if},t.prototype.hf=function(t){var e=this;this.cancel();var n=Math.floor(this.ef+this.cf()),r=Math.max(0,Date.now()-this.uf),i=Math.max(0,n-r);this.ef>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ef+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.rf=this.Lc.fu(this.Gr,i,(function(){return e.uf=Date.now(),t()})),this.ef*=this.nf,this.ef<this.tf&&(this.ef=this.tf),this.ef>this.if&&(this.ef=this.if)},t.prototype.cancel=function(){null!==this.rf&&(this.rf.cancel(),this.rf=null)},t.prototype.cf=function(){return(Math.random()-.5)*this.ef},t}(),Yr=function(){function t(t,e,n,r,i,o){this.Lc=t,this.af=n,this.connection=r,this.ff=i,this.listener=o,this.state=0,this.lf=0,this.df=null,this.stream=null,this.vf=new Kr(t,e)}return t.prototype.wf=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.mf=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?(g(0===this.state,"Already started"),this.auth()):this.pf()},t.prototype.stop=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.wf()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.gf=function(){g(!this.wf(),"Can only inhibit backoff in a stopped state"),this.state=0,this.vf.reset()},t.prototype.bf=function(){var t=this;this.mf()&&null===this.df&&(this.df=this.Lc.fu(this.af,6e4,(function(){return t.yf()})))},t.prototype._f=function(t){this.If(),this.stream.send(t)},t.prototype.yf=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.mf()?[2,this.close(0)]:[2]}))}))},t.prototype.If=function(){this.df&&(this.df.cancel(),this.df=null)},t.prototype.close=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return g(this.wf(),"Only started streams should be closed."),g(3===t||ee(e),"Can't provide an error when not in an error state."),this.If(),this.vf.cancel(),this.lf++,3!==t?this.vf.reset():e&&e.code===S.RESOURCE_EXHAUSTED?(v(e.toString()),v("Using maximum backoff delay to prevent overloading the backend."),this.vf.sf()):e&&e.code===S.UNAUTHENTICATED&&this.ff.I(),null!==this.stream&&(this.Tf(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ef(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.Tf=function(){},t.prototype.auth=function(){var t=this;g(0===this.state,"Must be in initial state to auth"),this.state=1;var e=this.Df(this.lf),n=this.lf;this.ff.getToken().then((function(e){t.lf===n&&t.Sf(e)}),(function(n){e((function(){var e=new A(S.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Rf(e)}))}))},t.prototype.Sf=function(t){var e=this;g(1===this.state,"Trying to start stream in a non-starting state");var n=this.Df(this.lf);this.stream=this.Cf(t),this.stream.Af((function(){n((function(){return g(1===e.state,"Expected stream to be in state Starting, but was "+e.state),e.state=2,e.listener.Af()}))})),this.stream.Ef((function(t){n((function(){return e.Rf(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.pf=function(){var t=this;g(3===this.state,"Should only perform backoff when in Error state"),this.state=4,this.vf.hf((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){return g(4===this.state,"Backoff elapsed but state is now: "+this.state),this.state=0,this.start(),g(this.wf(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.Rf=function(t){return g(this.wf(),"Can't handle server close on non-started stream"),d("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Df=function(t){var e=this;return function(n){e.Lc.$r((function(){return e.lf===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Jr=function(t){function e(e,n,r,i,o){var s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this;return s.serializer=i,s}return o.__extends(e,t),e.prototype.Cf=function(t){return this.connection.Pf("Listen",t)},e.prototype.onMessage=function(t){this.vf.reset();var e=this.serializer.Ze(t),n=this.serializer.nr(t);return this.listener.kf(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.je,e.addTarget=this.serializer.Yn(t);var n=this.serializer.Tr(t);n&&(e.labels=n),this._f(e)},e.prototype.Nf=function(t){var e={};e.database=this.serializer.je,e.removeTarget=t,this._f(e)},e}(Yr),Xr=function(t){function e(e,n,r,i,o){var s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this;return s.serializer=i,s.Of=!1,s.lastStreamToken=ge.ai,s}return o.__extends(e,t),Object.defineProperty(e.prototype,"Ff",{get:function(){return this.Of},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.Of=!1,t.prototype.start.call(this)},e.prototype.Tf=function(){this.Of&&this.Vf([])},e.prototype.Cf=function(t){return this.connection.Pf("Write",t)},e.prototype.onMessage=function(t){if(g(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.Re(t.streamToken),this.Of){this.vf.reset();var e=this.serializer.lr(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.Uf(n,e)}return g(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.Of=!0,this.listener.xf()},e.prototype.jf=function(){g(this.mf(),"Writing handshake requires an opened stream"),g(!this.Of,"Handshake already completed");var t={};t.database=this.serializer.je,this._f(t)},e.prototype.Vf=function(t){var e=this;g(this.mf(),"Writing mutations requires an opened stream"),g(this.Of,"Handshake must be complete before writing mutations"),g(this.lastStreamToken.bn()>0,"Trying to write mutation without a token");var n={streamToken:this.serializer.Se(this.lastStreamToken),writes:t.map((function(t){return e.serializer.ir(t)}))};this._f(n)},e}(Yr),Zr=function(){function t(t,e,n,r){this.Lc=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.Lf=function(t){return new Xr(this.Lc,this.connection,this.credentials,this.serializer,t)},t.prototype.qf=function(t){return new Jr(this.Lc,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.je,writes:t.map((function(t){return e.serializer.ir(t)}))};return this.Bf("Commit",n).then((function(t){return e.serializer.lr(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.je,documents:t.map((function(t){return e.serializer.Oe(t)}))};return this.Mf("BatchGetDocuments",n).then((function(n){var r=ke();n.forEach((function(t){var n=e.serializer.Ye(t);r=r.lt(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);g(!!e,"Missing entity in write response for "+t),i.push(e)})),i}))},t.prototype.Bf=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.Bf(t,e,r)})).catch((function(t){throw t.code===S.UNAUTHENTICATED&&n.credentials.I(),t}))},t.prototype.Mf=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.Mf(t,e,r)})).catch((function(t){throw t.code===S.UNAUTHENTICATED&&n.credentials.I(),t}))},t}(),ti=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];B("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(W("FieldPath","string",n,t[n]),0===t[n].length)throw new A(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Qf=new lt(t)}return t.documentId=function(){return t.Gf},t.prototype.isEqual=function(e){if(!(e instanceof t))throw et("isEqual","FieldPath",1,e);return this.Qf.isEqual(e.Qf)},t.Gf=new t(lt.st().nt()),t}(),ei=new RegExp("[~\\*/\\[\\]]"),ni=function(){function t(t){this.Wf=t}return t.delete=function(){return j("FieldValue.delete",arguments),ri.instance},t.serverTimestamp=function(){return j("FieldValue.serverTimestamp",arguments),ii.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return q("FieldValue.arrayUnion",arguments,1),new oi(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return q("FieldValue.arrayRemove",arguments,1),new si(t)},t.increment=function(t){return W("FieldValue.increment","number",1,t),V("FieldValue.increment",arguments,1),new ai(t)},t.prototype.isEqual=function(t){return this===t},t}(),ri=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return o.__extends(e,t),e.instance=new e,e}(ni),ii=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return o.__extends(e,t),e.instance=new e,e}(ni),oi=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n.zf=e,n}return o.__extends(e,t),e}(ni),si=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n.zf=e,n}return o.__extends(e,t),e}(ni),ai=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n.Kf=e,n}return o.__extends(e,t),e}(ni),ui=an(ni,"Use FieldValue.<field>() instead."),ci=/^__.*__$/,hi=function(){function t(t,e,n){this.data=t,this.un=e,this.fieldTransforms=n}return t.prototype.Hf=function(t,e){var n=[];return n.push(null!==this.un?new xt(t,this.data,this.un,e):new kt(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Rt(t,this.fieldTransforms)),n},t}(),li=function(){function t(t,e,n){this.data=t,this.un=e,this.fieldTransforms=n}return t.prototype.Hf=function(t,e){var n=[new xt(t,this.data,this.un,e)];return this.fieldTransforms.length>0&&n.push(new Rt(t,this.fieldTransforms)),n},t}();function fi(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw m("Unexpected case for UserDataSource: "+t)}}var pi=function(){function t(t,e,n,r,i,o){this.Jf=t,this.methodName=e,this.path=n,this.Yf=r,void 0===i&&this.Xf(),this.Yf=void 0!==r&&r,this.fieldTransforms=i||[],this.un=o||[]}return t.prototype.$f=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.Jf,this.methodName,n,!1,this.fieldTransforms,this.un);return r.Zf(e),r},t.prototype.tl=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.Jf,this.methodName,n,!1,this.fieldTransforms,this.un);return r.Xf(),r},t.prototype.nl=function(e){return new t(this.Jf,this.methodName,null,!0,this.fieldTransforms,this.un)},t.prototype.il=function(t){var e=null===this.path||this.path.J()?"":" (found in field "+this.path.toString()+")";return new A(S.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.un.find((function(e){return t.$(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.$(e.field)}))},t.prototype.Xf=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.Zf(this.path.get(t))},t.prototype.Zf=function(t){if(0===t.length)throw this.il("Document fields must not be empty");if(fi(this.Jf)&&ci.test(t))throw this.il('Document fields cannot begin and end with "__"')},t}(),di=function(t,e){this.s=t,this.key=e},vi=function(){function t(t){this.el=t}return t.prototype.rl=function(t,e){var n=new pi(0,t,lt.et);mi("Data must be an object, but it was:",n,e);var r=this.ul(e,n);return new hi(r,null,n.fieldTransforms)},t.prototype.sl=function(t,e,n){var r=new pi(2,t,lt.et);mi("Data must be an object, but it was:",r,e);var i,o,s=this.ul(e,r);if(n){for(var a=new mt(lt.G),u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof ti)l=h.Qf;else{if("string"!=typeof h)throw m("Expected stringOrFieldPath to be a string or a FieldPath");l=wi(t,h)}if(!r.contains(l))throw new A(S.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");a=a.add(l)}i=Ct.Jt(a),o=r.fieldTransforms.filter((function(t){return i.Xt(t.field)}))}else i=Ct.Yt(r.un),o=r.fieldTransforms;return new hi(s,i,o)},t.prototype.ol=function(t,e){var n=this,r=new pi(1,t,lt.et);mi("Data must be an object, but it was:",r,e);var i=new mt(lt.G),o=$t.vn();F(e,(function(e,s){var a=wi(t,e),u=r.tl(a);if((s=n.hl(s,u))instanceof ri)i=i.add(a);else{var c=n.ul(s,u);null!=c&&(i=i.add(a),o.set(a,c))}}));var s=Ct.Jt(i);return new li(o.cn(),s,r.fieldTransforms)},t.prototype.cl=function(t,e,n,r){var i=new pi(1,t,lt.et),o=[gi(t,e)],s=[n];if(r.length%2!=0)throw new A(S.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(gi(t,r[a])),s.push(r[a+1]);var u=new mt(lt.G),c=$t.vn();for(a=0;a<o.length;++a){var h=o[a],l=i.tl(h),f=this.hl(s[a],l);if(f instanceof ri)u=u.add(h);else{var p=this.ul(f,l);null!=p&&(u=u.add(h),c.set(h,p))}}var d=Ct.Jt(u);return new li(c.cn(),d,i.fieldTransforms)},t.prototype.al=function(t,e,n){void 0===n&&(n=!1);var r=new pi(n?4:3,t,lt.et),i=this.ul(e,r);return g(null!=i,"Parsed data should not be null."),g(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},t.prototype.hl=function(t,e){try{return this.el(t)}catch(t){var n=_i(t);throw e.il(n)}},t.prototype.ul=function(t,e){if(yi(t=this.hl(t,e)))return mi("Unsupported field value:",e,t),this.fl(t,e);if(t instanceof ni)return this.ll(t,e),null;if(e.path&&e.un.push(e.path),t instanceof Array){if(e.Yf&&4!==e.Jf)throw e.il("Nested arrays are not supported");return this.dl(t,e)}return this.vl(t,e)},t.prototype.fl=function(t,e){var n=this,r=new pt(_);return U(t)?e.path&&e.path.length>0&&e.un.push(e.path):F(t,(function(t,i){var o=n.ul(i,e.$f(t));null!=o&&(r=r.lt(t,o))})),new $t(r)},t.prototype.dl=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=this.ul(o[i],e.nl(r));null==s&&(s=Mt.yn),n.push(s),r++}return new Yt(n)},t.prototype.ll=function(t,e){if(!fi(e.Jf))throw e.il(t.Wf+"() can only be used with update() and set()");if(null===e.path)throw e.il(t.Wf+"() is not currently supported inside arrays");if(t instanceof ri){if(2!==e.Jf)throw 1===e.Jf?(g(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.il("FieldValue.delete() can only appear at the top level of your update data")):e.il("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.un.push(e.path)}else if(t instanceof ii)e.fieldTransforms.push(new Tt(e.path,wt.instance));else if(t instanceof oi){var n=this.wl(t.Wf,t.zf),r=new _t(n);e.fieldTransforms.push(new Tt(e.path,r))}else if(t instanceof si){n=this.wl(t.Wf,t.zf);var i=new bt(n);e.fieldTransforms.push(new Tt(e.path,i))}else if(t instanceof ai){var o=this.al("FieldValue.increment",t.Kf),s=new Et(o);e.fieldTransforms.push(new Tt(e.path,s))}else m("Unknown FieldValue type: "+t)},t.prototype.vl=function(t,e){if(null===t)return Mt.yn;if("number"==typeof t)return re(t)?new Vt(t):new qt(t);if("boolean"==typeof t)return Ft.of(t);if("string"==typeof t)return new Ht(t);if(t instanceof Date)return new Bt(st.fromDate(t));if(t instanceof st)return new Bt(new st(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof ot)return new Qt(t);if(t instanceof hn)return new Gt(t);if(t instanceof di)return new zt(t.s,t.key);throw e.il("Unsupported field value: "+X(t))},t.prototype.wl=function(t,e){var n=this;return e.map((function(e,r){var i=new pi(3,t,lt.et);return n.ul(e,i.nl(r))}))},t}();function yi(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof st||t instanceof ot||t instanceof hn||t instanceof di||t instanceof ni)}function mi(t,e,n){if(!yi(n)||!J(n)){var r=X(n);throw e.il("an object"===r?t+" a custom object":t+" "+r)}}function gi(t,e){if(e instanceof ti)return e.Qf;if("string"==typeof e)return wi(t,e);throw new A(S.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function wi(t,e){try{return function(t){if(t.search(ei)>=0)throw new A(S.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(ti.bind.apply(ti,o.__spreadArrays([void 0],t.split("."))))}catch(e){throw new A(S.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Qf}catch(r){var n=_i(r);throw new A(S.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function _i(t){return t instanceof Error?t.message:t.toString()}var bi=function(){function t(t){this.ml=t,this.pl=Pe(),this.mutations=[],this.gl=!1,this.bl=null,this.yl=new Set}return t.prototype.lookup=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:if(this._l(),this.mutations.length>0)throw new A(S.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.ml.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof Zt||t instanceof Xt?n.Il(t):m("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,e){this.write(e.Hf(t,this.in(t))),this.yl.add(t)},t.prototype.update=function(t,e){try{this.write(e.Hf(t,this.Tl(t)))}catch(t){this.bl=t}this.yl.add(t)},t.prototype.delete=function(t){this.write([new Ot(t,this.in(t))]),this.yl.add(t)},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){switch(n.label){case 0:if(this._l(),this.bl)throw this.bl;return t=this.pl,this.mutations.forEach((function(e){t=t.remove(e.key)})),t.forEach((function(t,n){e.mutations.push(new Dt(t,e.in(t)))})),[4,this.ml.commit(this.mutations)];case 1:return n.sent(),this.gl=!0,[2]}}))}))},t.prototype.Il=function(t){var e;if(t instanceof Xt)e=t.version;else{if(!(t instanceof Zt))throw m("Document in a transaction was a "+t.constructor.name);e=at.q()}var n=this.pl.get(t.key);if(null!==n){if(!e.isEqual(n))throw new A(S.ABORTED,"Document version changed between two reads.")}else this.pl=this.pl.lt(t.key,e)},t.prototype.in=function(t){var e=this.pl.get(t);return!this.yl.has(t)&&e?At.updateTime(e):At.NONE},t.prototype.Tl=function(t){var e=this.pl.get(t);if(!this.yl.has(t)&&e){if(e.isEqual(at.q()))throw new A(S.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return At.updateTime(e)}return At.exists(!0)},t.prototype.write=function(t){this._l(),this.mutations=this.mutations.concat(t)},t.prototype._l=function(){g(!this.gl,"A transaction object cannot be used after its update callback has been invoked.")},t}(),Ei=function(){function t(t,e){this.Qr=t,this.El=e,this.state="Unknown",this.Dl=0,this.Sl=null,this.Rl=!0}return t.prototype.Cl=function(){var t=this;0===this.Dl&&(this.Al("Unknown"),g(null===this.Sl,"onlineStateTimer shouldn't be started yet"),this.Sl=this.Qr.fu("online_state_timeout",1e4,(function(){return t.Sl=null,g("Unknown"===t.state,"Timer should be canceled if we transitioned to a different state."),t.Pl("Backend didn't respond within 10 seconds."),t.Al("Offline"),Promise.resolve()})))},t.prototype.kl=function(t){"Online"===this.state?(this.Al("Unknown"),g(0===this.Dl,"watchStreamFailures must be 0"),g(null===this.Sl,"onlineStateTimer must be null")):(this.Dl++,this.Dl>=1&&(this.Nl(),this.Pl("Connection failed 1 times. Most recent error: "+t.toString()),this.Al("Offline")))},t.prototype.set=function(t){this.Nl(),this.Dl=0,"Online"===t&&(this.Rl=!1),this.Al(t)},t.prototype.Al=function(t){t!==this.state&&(this.state=t,this.El(t))},t.prototype.Pl=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rl?(v(e),this.Rl=!1):d("OnlineStateTracker",e)},t.prototype.Nl=function(){null!==this.Sl&&(this.Sl.cancel(),this.Sl=null)},t}(),Ii=function(){function t(t,e,n,r,i){var s=this;this.zh=t,this.ml=e,this.Ol=[],this.Fl={},this.Vl=null,this.networkEnabled=!1,this.isPrimary=!1,this.Ul=i,this.Ul.xl((function(t){n.$r((function(){return o.__awaiter(s,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.jl()?(d("RemoteStore","Restarting streams for network reachability change."),[4,this.Ll()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.ql=new Ei(n,r),this.Bl=this.ml.qf({Af:this.Ml.bind(this),Ef:this.Ql.bind(this),kf:this.Gl.bind(this)}),this.Wl=this.ml.Lf({Af:this.zl.bind(this),Ef:this.Kl.bind(this),xf:this.Hl.bind(this),Uf:this.Uf.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.jl()?(t=this.Wl,[4,this.zh.Vs()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.Jl()?this.Yl():this.ql.set("Unknown"),[4,this.Xl()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.ql.set("Offline"),[2]}}))}))},t.prototype.$l=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.Wl.stop()];case 1:return t.sent(),[4,this.Bl.stop()];case 2:return t.sent(),this.Ol.length>0&&(d("RemoteStore","Stopping write stream with "+this.Ol.length+" pending writes"),this.Ol=[]),this.Zl(),[2]}}))}))},t.prototype.shutdown=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return d("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.Ul.shutdown(),this.ql.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){P(this.Fl,t.targetId)||(this.Fl[t.targetId]=t,this.Jl()?this.Yl():this.Bl.mf()&&this.td(t))},t.prototype.nd=function(t){g(P(this.Fl,t),"unlisten called on target no currently watched: "+t),delete this.Fl[t],this.Bl.mf()&&this.ed(t),U(this.Fl)&&(this.Bl.mf()?this.Bl.bf():this.jl()&&this.ql.set("Unknown"))},t.prototype.ye=function(t){return this.Fl[t]||null},t.prototype.be=function(t){return this.rd.be(t)},t.prototype.td=function(t){this.Vl.Xi(t.targetId),this.Bl.watch(t)},t.prototype.ed=function(t){this.Vl.Xi(t),this.Bl.Nf(t)},t.prototype.Yl=function(){g(this.Jl(),"startWatchStream() called when shouldStartWatchStream() is false."),this.Vl=new $e(this),this.Bl.start(),this.ql.Cl()},t.prototype.Jl=function(){return this.jl()&&!this.Bl.wf()&&!U(this.Fl)},t.prototype.jl=function(){return this.isPrimary&&this.networkEnabled},t.prototype.Zl=function(){this.Vl=null},t.prototype.Ml=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){return M(this.Fl,(function(e,n){t.td(n)})),[2]}))}))},t.prototype.Ql=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return void 0===t&&g(!this.Jl(),"Watch stream was stopped gracefully while still needed."),this.Zl(),this.Jl()?(this.ql.kl(t),this.Yl()):this.ql.set("Unknown"),[2]}))}))},t.prototype.Gl=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.ql.set("Online"),t instanceof ze&&2===t.state&&t.cause?[2,this.ud(t)]:(t instanceof We?this.Vl.ue(t):t instanceof Ge?this.Vl.de(t):(g(t instanceof ze,"Expected watchChange to be an instance of WatchTargetChange"),this.Vl.he(t)),e.isEqual(at.MIN)?[3,3]:[4,this.zh.Jo()]);case 1:return n=r.sent(),e.h(n)>=0?[4,this.sd(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.sd=function(t){var e=this;g(!t.isEqual(at.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.Vl.me(t);return M(n.Si,(function(n,r){if(r.resumeToken.bn()>0){var i=e.Fl[n];i&&(e.Fl[n]=i.vi(r.resumeToken,t))}})),n.Ri.forEach((function(t){var n=e.Fl[t];if(n){e.Fl[t]=n.vi(ge.ai,n.li),e.ed(t);var r=new Ie(n.target,t,1,n.sequenceNumber);e.td(r)}})),this.rd.Yo(n)},t.prototype.ud=function(t){var e=this;g(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return P(this.Fl,t)?(delete this.Fl[t],this.Vl.removeTarget(t),[2,this.rd.od(t,n)]):[2]}))}))}))})),r},t.prototype.Xl=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:return this.hd()?[4,this.zh.sh(this.Ol.length>0?this.Ol[this.Ol.length-1].batchId:-1)]:[3,4];case 1:return null!==(t=e.sent())?[3,2]:(0===this.Ol.length&&this.Wl.bf(),[3,4]);case 2:return this.ad(t),[4,this.Xl()];case 3:e.sent(),e.label=4;case 4:return this.fd()&&this.ld(),[2]}}))}))},t.prototype.hd=function(){return this.jl()&&this.Ol.length<10},t.prototype.dd=function(){return this.Ol.length},t.prototype.ad=function(t){g(this.hd(),"addToWritePipeline called when pipeline is full"),this.Ol.push(t),this.Wl.mf()&&this.Wl.Ff&&this.Wl.Vf(t.mutations)},t.prototype.fd=function(){return this.jl()&&!this.Wl.wf()&&this.Ol.length>0},t.prototype.ld=function(){g(this.fd(),"startWriteStream() called when shouldStartWriteStream() is false."),this.Wl.start()},t.prototype.zl=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.Wl.jf(),[2]}))}))},t.prototype.Hl=function(){var t=this;return this.zh.Us(this.Wl.lastStreamToken).then((function(){for(var e=0,n=t.Ol;e<n.length;e++)t.Wl.Vf(n[e].mutations)})).catch(zn)},t.prototype.Uf=function(t,e){var n=this;g(this.Ol.length>0,"Got result for empty write pipeline");var r=this.Ol.shift(),i=bn.from(r,t,e,this.Wl.lastStreamToken);return this.rd.vd(i).then((function(){return n.Xl()}))},t.prototype.Kl=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(n){return void 0===t&&g(!this.fd(),"Write stream was stopped gracefully while still needed."),t&&this.Ol.length>0?[2,(this.Wl.Ff?this.wd(t):this.md(t)).then((function(){e.fd()&&e.ld()}))]:[2]}))}))},t.prototype.md=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return Te(t.code)?(d("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.Wl.lastStreamToken),this.Wl.lastStreamToken=ge.ai,[2,this.zh.Us(ge.ai).catch(zn)]):[2]}))}))},t.prototype.wd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){return Te(i=t.code)&&i!==S.ABORTED?(e=this.Ol.shift(),this.Wl.gf(),[2,this.rd.pd(e.batchId,t).then((function(){return n.Xl()}))]):[2];var i}))}))},t.prototype.gd=function(){return new bi(this.ml)},t.prototype.Ll=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.ql.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.bd=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.jl()?(d("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Ll()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.yd=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.$l()];case 3:e.sent(),this.ql.set("Unknown"),e.label=4;case 4:return[2]}}))}))},t}();function Ci(t,e){return g(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+t+"_"+e}function Ti(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.l()&&(r+="_"+e.uid),r}function Si(t,e){return"firestore_targets_"+t+"_"+e}var Ai=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,g(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t._d=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new A(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(v("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Id=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ni=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,g(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t._d=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new A(r.error.code,r.error.message)),i?new t(e,r.state,o):(v("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Id=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),ki=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t._d=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ue(),s=0;i&&s<r.activeTargetIds.length;++s)i=re(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(v("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),xi=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t._d=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(v("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ri=function(){function t(){this.activeTargetIds=Ue()}return t.prototype.Td=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ed=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Id=function(){var t={activeTargetIds:this.activeTargetIds.tt(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Oi=function(){function t(e,n,r,i,o){if(this.Lc=e,this.platform=n,this.persistenceKey=r,this.Dd=i,this.rd=null,this.El=null,this.jr=null,this.Sd={},this.Rd=this.Cd.bind(this),this.Co=!1,this.Ad=[],!t.cs(this.platform))throw new A(S.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.Pd=Ci(this.persistenceKey,this.Dd),this.kd=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Sd[this.Dd]=new Ri,this.Nd=new RegExp("^firestore_clients_"+s+"_([^_]*)$"),this.Od=new RegExp("^firestore_mutations_"+s+"_(\\d+)(?:_(.*))?$"),this.Fd=new RegExp("^firestore_targets_"+s+"_(\\d+)$"),this.Vd=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.platform.window.addEventListener("storage",this.Rd)}return t.cs=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,i,s,a,u,c,h,l=this;return o.__generator(this,(function(o){switch(o.label){case 0:return g(!this.Co,"WebStorageSharedClientState already started"),g(null!==this.rd,"syncEngine property must be set before calling start()"),g(null!==this.El,"onlineStateHandler property must be set before calling start()"),[4,this.rd.gh()];case 1:for(t=o.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Dd&&(i=this.getItem(Ci(this.persistenceKey,r)))&&(s=ki._d(r,i))&&(this.Sd[s.clientId]=s);for(this.Ud(),(a=this.storage.getItem(this.Vd))&&(u=this.xd(a))&&this.jd(u),c=0,h=this.Ad;c<h.length;c++)this.Cd(h[c]);return this.Ad=[],this.platform.window.addEventListener("unload",(function(){return l.shutdown()})),this.Co=!0,[2]}}))}))},t.prototype.Br=function(t){this.setItem(this.kd,JSON.stringify(t))},t.prototype.Ld=function(){var t=Ue();return F(this.Sd,(function(e,n){t=t.Mt(n.activeTargetIds)})),t},t.prototype.qd=function(t){for(var e in this.Sd)if(this.Sd.hasOwnProperty(e)&&this.Sd[e].activeTargetIds.has(t))return!0;return!1},t.prototype.Bd=function(t){this.Md(t,"pending")},t.prototype.Qd=function(t,e,n){this.Md(t,e,n),this.Gd(t)},t.prototype.Wd=function(t){var e="not-current";if(this.qd(t)){var n=this.storage.getItem(Si(this.persistenceKey,t));if(n){var r=Ni._d(t,n);r&&(e=r.state)}}return this.zd.Td(t),this.Ud(),e},t.prototype.Kd=function(t){this.zd.Ed(t),this.Ud()},t.prototype.Hd=function(t){return this.zd.activeTargetIds.has(t)},t.prototype.Jd=function(t){this.removeItem(Si(this.persistenceKey,t))},t.prototype.Yd=function(t,e,n){this.Xd(t,e,n)},t.prototype.Lo=function(t,e,n){var r=this;e.forEach((function(t){r.Gd(t)})),this.currentUser=t,n.forEach((function(t){r.Bd(t)}))},t.prototype.$d=function(t){this.Zd(t)},t.prototype.shutdown=function(){this.Co&&(this.platform.window.removeEventListener("storage",this.Rd),this.removeItem(this.Pd),this.Co=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){d("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Cd=function(t){var e=this;if(t.storageArea===this.storage){if(d("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Pd)return void v("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Lc.$r((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,n,r,i,s,a;return o.__generator(this,(function(o){if(!this.Co)return this.Ad.push(t),[2];if(null===t.key)return[2];if(this.Nd.test(t.key)){if(null==t.newValue)return n=this.tv(t.key),[2,this.nv(n,null)];if(e=this.iv(t.key,t.newValue))return[2,this.nv(e.clientId,e)]}else if(this.Od.test(t.key)){if(null!==t.newValue&&(r=this.ev(t.key,t.newValue)))return[2,this.rv(r)]}else if(this.Fd.test(t.key)){if(null!==t.newValue&&(i=this.uv(t.key,t.newValue)))return[2,this.sv(i)]}else if(t.key===this.Vd){if(null!==t.newValue&&(s=this.xd(t.newValue)))return[2,this.jd(s)]}else t.key===this.kd&&(g(!!this.jr,"Missing sequenceNumberHandler"),(a=function(t){var e=fn.Mr;if(null!=t)try{var n=JSON.parse(t);g("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){v("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==fn.Mr&&this.jr(a));return[2]}))}))}))}},Object.defineProperty(t.prototype,"zd",{get:function(){return this.Sd[this.Dd]},enumerable:!0,configurable:!0}),t.prototype.Ud=function(){this.setItem(this.Pd,this.zd.Id())},t.prototype.Md=function(t,e,n){var r=new Ai(this.currentUser,t,e,n),i=Ti(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Id())},t.prototype.Gd=function(t){var e=Ti(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Zd=function(t){this.storage.setItem(this.Vd,JSON.stringify({clientId:this.Dd,onlineState:t}))},t.prototype.Xd=function(t,e,n){var r=Si(this.persistenceKey,t),i=new Ni(t,e,n);this.setItem(r,i.Id())},t.prototype.tv=function(t){var e=this.Nd.exec(t);return e?e[1]:null},t.prototype.iv=function(t,e){var n=this.tv(t);return g(null!==n,"Cannot parse client state key '"+t+"'"),ki._d(n,e)},t.prototype.ev=function(t,e){var n=this.Od.exec(t);g(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]);return Ai._d(new T(void 0!==n[2]?n[2]:null),r,e)},t.prototype.uv=function(t,e){var n=this.Fd.exec(t);g(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Ni._d(r,e)},t.prototype.xd=function(t){return xi._d(t)},t.prototype.rv=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(d("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.rd.ov(t.batchId,t.state,t.error)]}))}))},t.prototype.sv=function(t){return this.rd.hv(t.targetId,t.state,t.error)},t.prototype.nv=function(t,e){var n=this,r=this.Ld();e?this.Sd[t]=e:delete this.Sd[t];var i=this.Ld(),s=[],a=[];return i.forEach((function(t){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(e){return r.has(t)||s.push(t),[2]}))}))})),r.forEach((function(t){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(e){return i.has(t)||a.push(t),[2]}))}))})),this.rd.cv(s,a)},t.prototype.jd=function(t){this.Sd[t.clientId]&&this.El(t.onlineState)},t}(),Di=function(){function t(){this.av=new Ri,this.fv={},this.rd=null,this.El=null,this.jr=null}return t.prototype.Bd=function(t){},t.prototype.Qd=function(t,e,n){},t.prototype.Wd=function(t){return this.av.Td(t),this.fv[t]||"not-current"},t.prototype.Yd=function(t,e,n){this.fv[t]=e},t.prototype.Kd=function(t){this.av.Ed(t)},t.prototype.Hd=function(t){return this.av.activeTargetIds.has(t)},t.prototype.Jd=function(t){delete this.fv[t]},t.prototype.Ld=function(){return this.av.activeTargetIds},t.prototype.qd=function(t){return this.av.activeTargetIds.has(t)},t.prototype.start=function(){return this.av=new Ri,Promise.resolve()},t.prototype.Lo=function(t,e,n){},t.prototype.$d=function(t){},t.prototype.shutdown=function(){},t.prototype.Br=function(t){},t}(),Pi=function(t){this.key=t},Li=function(t){this.key=t},Mi=function(){function t(t,e){this.query=t,this.lv=e,this.dv=null,this.Ni=!1,this.vv=Me(),this.Ii=Me(),this.wv=new je(t.Xn.bind(t))}return Object.defineProperty(t.prototype,"mv",{get:function(){return this.lv},enumerable:!0,configurable:!0}),t.prototype.pv=function(t,e){var n=this,r=e?e.gv:new Ve,i=e?e.wv:this.wv,o=e?e.Ii:this.Ii,s=i,a=!1,u=this.query.ii()&&i.size===this.query.limit?i.last():null,c=this.query.ei()&&i.size===this.query.limit?i.first():null;if(t.pt((function(t,e){var h=i.get(t),l=e instanceof Xt?e:null;l&&(g(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null);var f=!!h&&n.Ii.has(h.key),p=!!l&&(l.en||n.Ii.has(l.key)&&l.hasCommittedMutations),d=!1;h&&l?h.data().isEqual(l.data())?f!==p&&(r.track({type:3,doc:l}),d=!0):n.bv(h,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.query.Xn(l,u)>0||c&&n.query.Xn(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),d=!0):h&&!l&&(r.track({type:1,doc:h}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),this.query.ii()||this.query.ei())for(;s.size>this.query.limit;){var h=this.query.ii()?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return g(!a||!e,"View was refilled using docs that themselves needed refilling."),{wv:s,gv:r,Pa:a,Ii:o}},t.prototype.bv=function(t,e){return t.en&&e.hasCommittedMutations&&!e.en},t.prototype.es=function(t,e,n){var r=this;g(!t.Pa,"Cannot apply changes that need a refill");var i=this.wv;this.wv=t.wv,this.Ii=t.Ii;var o=t.gv.yi();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return m("Unknown ChangeType: "+t)}};return n(t)-n(e)}(t.type,e.type)||r.query.Xn(t.doc,e.doc)})),this.yv(n);var s=e?this._v():[],a=0===this.vv.size&&this.Ni?1:0,u=a!==this.dv;return this.dv=a,0!==o.length||u?{snapshot:new qe(this.query,t.wv,i,o,t.Ii,0===a,u,!1),Iv:s}:{Iv:s}},t.prototype.Tv=function(t){return this.Ni&&"Offline"===t?(this.Ni=!1,this.es({wv:this.wv,gv:new Ve,Ii:this.Ii,Pa:!1},!1)):{Iv:[]}},t.prototype.Ev=function(t){return!this.lv.has(t)&&!!this.wv.has(t)&&!this.wv.get(t).en},t.prototype.yv=function(t){var e=this;t&&(t.Oi.forEach((function(t){return e.lv=e.lv.add(t)})),t.Fi.forEach((function(t){return g(e.lv.has(t),"Modified document "+t+" not found in view.")})),t.Vi.forEach((function(t){return e.lv=e.lv.delete(t)})),this.Ni=t.Ni)},t.prototype._v=function(){var t=this;if(!this.Ni)return[];var e=this.vv;this.vv=Me(),this.wv.forEach((function(e){t.Ev(e.key)&&(t.vv=t.vv.add(e.key))}));var n=[];return e.forEach((function(e){t.vv.has(e)||n.push(new Li(e))})),this.vv.forEach((function(t){e.has(t)||n.push(new Pi(t))})),n},t.prototype.Dv=function(t){this.lv=t.mh,this.vv=Me();var e=this.pv(t.documents);return this.es(e,!0)},t.prototype.Sv=function(){return qe.Di(this.query,this.wv,this.Ii,0===this.dv)},t}(),Fi=function(){function t(t,e,n,r){this.Qr=t,this.Rv=e,this.updateFunction=n,this.Kr=r,this.Cv=5,this.vf=new Kr(this.Qr,"retry_transaction")}return t.prototype.run=function(){this.Av()},t.prototype.Av=function(){var t=this;this.vf.hf((function(){return o.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return o.__generator(this,(function(r){return t=this.Rv.gd(),(e=this.Pv(t))&&e.then((function(e){n.Qr.$r((function(){return t.commit().then((function(){n.Kr.resolve(e)})).catch((function(t){n.kv(t)}))}))})).catch((function(t){n.kv(t)})),[2]}))}))}))},t.prototype.Pv=function(t){try{var e=this.updateFunction(t);return!ee(e)&&e.catch&&e.then?e:(this.Kr.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Kr.reject(t),null}},t.prototype.kv=function(t){var e=this;this.Cv>0&&this.Nv(t)?(this.Cv-=1,this.Qr.$r((function(){return e.Av(),Promise.resolve()}))):this.Kr.reject(t)},t.prototype.Nv=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Te(e)}return!1},t}(),Ui=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ji=function(t){this.key=t,this.Ov=!1},Vi=function(){function t(t,e,n,r){this.zh=t,this.Rv=e,this.Fv=n,this.currentUser=r,this.Vv=null,this.Uv=new Cn((function(t){return t.canonicalId()})),this.xv={},this.jv=new pt(ft.G),this.Lv={},this.qv=new En,this.Bv={},this.Mv=new Map,this.Qv=Hn.uo(),this.isPrimary=void 0,this.onlineState="Unknown"}return Object.defineProperty(t.prototype,"Gv",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){g(null!==t,"SyncEngine listener cannot be null"),g(null===this.Vv,"SyncEngine already has a subscriber."),this.Vv=t},t.prototype.listen=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,s;return o.__generator(this,(function(o){switch(o.label){case 0:return this.Wv("listen()"),(r=this.Uv.get(t))?(this.Fv.Wd(e=r.targetId),n=r.view.Sv(),[3,4]):[3,1];case 1:return[4,this.zh.hh(t.Yn())];case 2:return i=o.sent(),s=this.Fv.Wd(i.targetId),[4,this.zv(t,e=i.targetId,"current"===s)];case 3:n=o.sent(),this.isPrimary&&this.Rv.listen(i),o.label=4;case 4:return this.Vv.kf([n]),[2,e]}}))}))},t.prototype.zv=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,s,a,u,c;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.zh.vh(t,!0)];case 1:return r=o.sent(),i=new Mi(t,r.mh),s=i.pv(r.documents),a=Be.ki(e,n&&"Offline"!==this.onlineState),g(0===(u=i.es(s,!0===this.isPrimary,a)).Iv.length,"View returned limbo docs before target ack from the server."),g(!!u.snapshot,"applyChanges for new view should always return a snapshot"),c=new Ui(t,e,i),this.Uv.set(t,c),this.xv[e]||(this.xv[e]=[]),this.xv[e].push(t),[2,u.snapshot]}}))}))},t.prototype.Kv=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this.zh.vh(t.query,!0)];case 1:return e=r.sent(),n=t.view.Dv(e),this.isPrimary&&this.Hv(t.targetId,n.Iv),[2,n]}}))}))},t.prototype.nd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return o.__generator(this,(function(i){switch(i.label){case 0:return this.Wv("unlisten()"),g(!!(e=this.Uv.get(t)),"Trying to unlisten on query not found:"+t),(n=this.xv[e.targetId]).length>1?(this.xv[e.targetId]=n.filter((function(e){return!e.isEqual(t)})),this.Uv.delete(t),[2]):this.isPrimary?(this.Fv.Kd(e.targetId),this.Fv.qd(e.targetId)?[3,2]:[4,this.zh.dh(e.targetId,!1).then((function(){r.Fv.Jd(e.targetId),r.Rv.nd(e.targetId),r.Jv(e.targetId)})).catch(zn)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.Jv(e.targetId),[4,this.zh.dh(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.Wv("write()"),[4,this.zh.Qo(t)];case 1:return n=r.sent(),this.Fv.Bd(n.batchId),this.Yv(n.batchId,e),[4,this.Xv(n.Ku)];case 2:return r.sent(),[4,this.Rv.Xl()];case 3:return r.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new Fi(t,this.Rv,e,n).run()},t.prototype.Yo=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:this.Wv("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zh.Yo(t)];case 2:return e=r.sent(),F(t.Si,(function(t,e){var r=n.Lv[Number(t)];r&&(g(e.Oi.size+e.Fi.size+e.Vi.size<=1,"Limbo resolution for single document contains multiple changes."),e.Oi.size>0?r.Ov=!0:e.Fi.size>0?g(r.Ov,"Received change for limbo target document without add."):e.Vi.size>0&&(g(r.Ov,"Received remove for limbo target document without add."),r.Ov=!1))})),[4,this.Xv(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,zn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.Tv=function(t,e){if(this.isPrimary&&0===e||!this.isPrimary&&1===e){this.Wv("applyOnlineStateChange()");var n=[];this.Uv.forEach((function(e,r){var i=r.view.Tv(t);g(0===i.Iv.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.Vv.$v(t),this.Vv.kf(n),this.onlineState=t,this.isPrimary&&this.Fv.$d(t)}},t.prototype.od=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s,a,u=this;return o.__generator(this,(function(o){switch(o.label){case 0:return this.Wv("rejectListens()"),this.Fv.Yd(t,"rejected",e),(r=(n=this.Lv[t])&&n.key)?(this.jv=this.jv.remove(r),delete this.Lv[t],i=(i=new pt(ft.G)).lt(r,new Zt(r,at.q())),s=Me().add(r),a=new He(at.MIN,{},new mt(_),i,s),[2,this.Yo(a)]):[3,1];case 1:return[4,this.zh.dh(t,!1).then((function(){return u.Jv(t,e)})).catch(zn)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.ov=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return this.Wv("applyBatchState()"),[4,this.zh.Go(t)];case 1:return null===(r=i.sent())?(d("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.Rv.Xl()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.Zv(t,n||null),this.zh.bh(t)):m("Unknown batchState: "+e),i.label=4;case 4:return[4,this.Xv(r)];case 5:return i.sent(),[2]}}))}))},t.prototype.vd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:this.Wv("applySuccessfulWrite()"),this.Zv(e=t.batch.batchId,null),this.tw(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zh.Os(t)];case 2:return n=r.sent(),this.Fv.Qd(e,"acknowledged"),[4,this.Xv(n)];case 3:return r.sent(),[3,6];case 4:return[4,zn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.pd=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:this.Wv("rejectFailedWrite()"),this.Zv(t,e),this.tw(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zh.Ho(t)];case 2:return n=r.sent(),this.Fv.Qd(t,"rejected",e),[4,this.Xv(n)];case 3:return r.sent(),[3,6];case 4:return[4,zn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.nw=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return this.Rv.jl()||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.zh.Gs()];case 1:return-1===(e=r.sent())?(t.resolve(),[2]):((n=this.Mv.get(e)||[]).push(t),this.Mv.set(e,n),[2])}}))}))},t.prototype.tw=function(t){(this.Mv.get(t)||[]).forEach((function(t){t.resolve()})),this.Mv.delete(t)},t.prototype.iw=function(t){this.Mv.forEach((function(e){e.forEach((function(e){e.reject(new A(S.CANCELLED,t))}))})),this.Mv.clear()},t.prototype.Yv=function(t,e){var n=this.Bv[this.currentUser.v()];n||(n=new pt(_)),n=n.lt(t,e),this.Bv[this.currentUser.v()]=n},t.prototype.Zv=function(t,e){var n=this.Bv[this.currentUser.v()];if(n){var r=n.get(t);r&&(g(t===n.vt(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.Bv[this.currentUser.v()]=n}},t.prototype.Jv=function(t,e){var n=this;void 0===e&&(e=null),this.Fv.Kd(t),g(this.xv[t]&&0!==this.xv[t].length,"There are no queries mapped to target id "+t);for(var r=0,i=this.xv[t];r<i.length;r++){var o=i[r];this.Uv.delete(o),e&&this.Vv.ew(o,e)}if(delete this.xv[t],this.isPrimary){var s=this.qv.Nu(t);this.qv.Pu(t),s.forEach((function(t){n.qv.Ou(t)||n.rw(t)}))}},t.prototype.rw=function(t){var e=this.jv.get(t);null!==e&&(this.Rv.nd(e),this.jv=this.jv.remove(t),delete this.Lv[e])},t.prototype.Hv=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof Pi?(this.qv.Du(i.key,t),this.uw(i)):i instanceof Li?(d("SyncEngine","Document no longer in limbo: "+i.key),this.qv.Ru(i.key,t),this.qv.Ou(i.key)||this.rw(i.key)):m("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.uw=function(t){var e=t.key;if(!this.jv.get(e)){d("SyncEngine","New document in limbo: "+e);var n=this.Qv.next(),r=oe.jn(e.path);this.Lv[n]=new ji(e),this.Rv.listen(new Ie(r.Yn(),n,2,fn.Mr)),this.jv=this.jv.lt(e,n)}},t.prototype.sw=function(){return this.jv},t.prototype.Xv=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s=this;return o.__generator(this,(function(o){switch(o.label){case 0:return n=[],r=[],i=[],this.Uv.forEach((function(o,a){i.push(Promise.resolve().then((function(){var e=a.view.pv(t);return e.Pa?s.zh.vh(a.query,!1).then((function(t){return a.view.pv(t.documents,e)})):e})).then((function(t){var i=a.view.es(t,!0===s.isPrimary,e&&e.Si[a.targetId]);if(s.Hv(a.targetId,i.Iv),i.snapshot){s.isPrimary&&s.Fv.Yd(a.targetId,i.snapshot.fromCache?"not-current":"current"),n.push(i.snapshot);var o=Wn.Io(a.targetId,i.snapshot);r.push(o)}})))})),[4,Promise.all(i)];case 1:return o.sent(),this.Vv.kf(n),[4,this.zh.uh(r)];case 2:return o.sent(),[2]}}))}))},t.prototype.Wv=function(t){g(null!==this.Vv,"Trying to call "+t+" before calling subscribe().")},t.prototype.bd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.iw("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.zh.Lo(t)]):[3,3];case 1:return n=r.sent(),this.Fv.Lo(t,n.Bo,n.Mo),[4,this.Xv(n.qo)];case 2:r.sent(),r.label=3;case 3:return[4,this.Rv.bd()];case 4:return r.sent(),[2]}}))}))},t.prototype.yd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,s,a=this;return o.__generator(this,(function(o){switch(o.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Rv.yd(!0)]);case 1:return o.sent(),i=this.Fv.Ld(),[4,this.ow(i.tt())];case 2:for(e=o.sent(),n=0,r=e;n<r.length;n++)this.Rv.listen(r[n]);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,i=[],s=Promise.resolve(),M(this.xv,(function(t,e){a.Fv.Hd(t)?i.push(t):s=s.then((function(){return a.Jv(t),a.zh.dh(t,!0)})),a.Rv.nd(t)})),[4,s]);case 4:return o.sent(),[4,this.ow(i)];case 5:return o.sent(),this.hw(),[4,this.Rv.yd(!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))},t.prototype.hw=function(){var t=this;M(this.Lv,(function(e){t.Rv.nd(e)})),this.qv.ku(),this.Lv=[],this.jv=new pt(ft.G)},t.prototype.ow=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,s,a,u,c,h,l,f,p,d;return o.__generator(this,(function(o){switch(o.label){case 0:e=[],n=[],r=0,i=t,o.label=1;case 1:return r<i.length?(a=void 0,(u=this.xv[s=i[r]])&&0!==u.length?[4,this.zh.dh(s,!0)]:[3,8]):[3,14];case 2:return o.sent(),[4,this.zh.hh(u[0].Yn())];case 3:a=o.sent(),c=0,h=u,o.label=4;case 4:return c<h.length?(g(!!(f=this.Uv.get(l=h[c])),"No query view found for "+l),[4,this.Kv(f)]):[3,7];case 5:(p=o.sent()).snapshot&&n.push(p.snapshot),o.label=6;case 6:return c++,[3,4];case 7:return[3,12];case 8:return g(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.zh.Th(s)];case 9:return g(!!(d=o.sent()),"Target for id "+s+" not found"),[4,this.zh.hh(d)];case 10:return a=o.sent(),[4,this.zv(this.cw(d),s,!1)];case 11:o.sent(),o.label=12;case 12:e.push(a),o.label=13;case 13:return r++,[3,1];case 14:return this.Vv.kf(n),[2,e]}}))}))},t.prototype.cw=function(t){return new oe(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},t.prototype.gh=function(){return this.zh.gh()},t.prototype.hv=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:if(this.isPrimary)return d("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.xv[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.zh.Eh()];case 2:return r=o.sent(),i=He.Pi(t,"current"===e),[4,this.Xv(r,i)];case 3:return o.sent(),[3,7];case 4:return[4,this.zh.dh(t,!0)];case 5:return o.sent(),this.Jv(t,n),[3,7];case 6:m("Unexpected target state: "+e),o.label=7;case 7:return[2]}}))}))},t.prototype.cv=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s,a,u,c,h,l,f=this;return o.__generator(this,(function(p){switch(p.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,p.label=1;case 1:return n<r.length?(g(!this.xv[l=r[n]],"Trying to add an already active target"),[4,this.zh.Th(l)]):[3,6];case 2:return g(!!(i=p.sent()),"Query data for active target "+l+" not found"),[4,this.zh.hh(i)];case 3:return s=p.sent(),[4,this.zv(this.cw(i),s.targetId,!1)];case 4:p.sent(),this.Rv.listen(s),p.label=5;case 5:return n++,[3,1];case 6:a=function(t){return o.__generator(this,(function(e){switch(e.label){case 0:return u.xv[t]?[4,u.zh.dh(t,!1).then((function(){f.Rv.nd(t),f.Jv(t)})).catch(zn)]:[2,"continue"];case 1:return e.sent(),[2]}}))},u=this,c=0,h=e,p.label=7;case 7:return c<h.length?[5,a(l=h[c])]:[3,10];case 8:p.sent(),p.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.zh.yh(!0),this.Rv.enableNetwork()},t.prototype.disableNetwork=function(){return this.zh.yh(!1),this.Rv.disableNetwork()},t.prototype.be=function(t){var e=this.Lv[t];if(e&&e.Ov)return Me().add(e.key);var n=Me(),r=this.xv[t];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.Uv.get(s);g(!!a,"No query view found for "+s),n=n.Mt(a.view.mv)}return n},t}(),qi=function(){this.aw=null,this.targetId=0,this.listeners=[]},Hi=function(){function t(t){this.rd=t,this.fw=new Cn((function(t){return t.canonicalId()})),this.onlineState="Unknown",this.lw=new Set,this.rd.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.fw.get(e);return r||(n=!0,r=new qi,this.fw.set(e,r)),r.listeners.push(t),g(!t.Tv(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.aw&&t.dw(r.aw)&&this.vw(),n?this.rd.listen(e).then((function(t){return r.targetId=t,t})):Promise.resolve(r.targetId)},t.prototype.nd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){return n=!1,(r=this.fw.get(e=t.query))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.fw.delete(e),[2,this.rd.nd(e)]):[2]}))}))},t.prototype.kf=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=this.fw.get(i.query);if(o){for(var s=0,a=o.listeners;s<a.length;s++)a[s].dw(i)&&(e=!0);o.aw=i}}e&&this.vw()},t.prototype.ew=function(t,e){var n=this.fw.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.fw.delete(t)},t.prototype.$v=function(t){this.onlineState=t;var e=!1;this.fw.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].Tv(t)&&(e=!0)})),e&&this.vw()},t.prototype.ww=function(t){this.lw.add(t),t.next()},t.prototype.mw=function(t){this.lw.delete(t)},t.prototype.vw=function(){this.lw.forEach((function(t){t.next()}))},t}(),Bi=function(){function t(t,e,n){this.query=t,this.pw=e,this.gw=!1,this.bw=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.dw=function(t){if(g(t.docChanges.length>0||t.Ti,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new qe(t.query,t.docs,t._i,e,t.Ii,t.fromCache,t.Ti,!0)}var o=!1;return this.gw?this.yw(t)&&(this.pw.next(t),o=!0):this._w(t,this.onlineState)&&(this.Iw(t),o=!0),this.bw=t,o},t.prototype.onError=function(t){this.pw.error(t)},t.prototype.Tv=function(t){this.onlineState=t;var e=!1;return this.bw&&!this.gw&&this._w(this.bw,t)&&(this.Iw(this.bw),e=!0),e},t.prototype._w=function(t,e){return g(!this.gw,"Determining whether to raise first event but already had first event"),!t.fromCache||(this.options.Tw&&"Offline"!==e?(g(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.J()||"Offline"===e)},t.prototype.yw=function(t){return t.docChanges.length>0||!!(t.Ti||this.bw&&this.bw.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.Iw=function(t){g(!this.gw,"Trying to raise initial events for second time"),t=qe.Di(t.query,t.docs,t.Ii,t.fromCache),this.gw=!0,this.pw.next(t)},t}(),Wi=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.Xc=function(){return Yn.jh(this.cacheSizeBytes)},t}(),Gi=function(){},zi=function(){function t(t,e,n,r){this.platform=t,this.Ew=e,this.credentials=n,this.Qr=r,this.clientId=w.u()}return t.prototype.start=function(t){var e=this;this.Dw();var n=new pn,r=new pn,i=!1;return this.credentials.T((function(o){i?e.Qr.$r((function(){return e.bd(o)})):(i=!0,e.Sw(t,r,o).then((function(t){return e.Rw(o,t)})).then(n.resolve,n.reject))})),this.Qr.$r((function(){return n.promise})),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.Dw(),this.Qr.enqueue((function(){return t.rd.enableNetwork()}))},t.prototype.Sw=function(t,e,n){var r=this;return t instanceof Wi?this.Cw(n,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!r.Aw(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.Pw()})):(e.resolve(),this.Pw())},t.prototype.Aw=function(t){return t instanceof A?t.code===S.FAILED_PRECONDITION||t.code===S.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.Dw=function(){if(this.Qr.uu)throw new A(S.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Cw=function(t,e){var n=this,r=Mr.Ia(this.Ew),i=new on(this.Ew.s,{Te:!0});return Promise.resolve().then((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,s;return o.__generator(this,(function(o){switch(o.label){case 0:if(e.synchronizeTabs&&!Oi.cs(this.platform))throw new A(S.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.Xc(),this.Fv=e.synchronizeTabs?new Oi(this.Qr,this.platform,r,this.clientId,t):new Di,[4,Mr.Yc({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,Lc:this.Qr,serializer:i,Xc:n,qc:this.Fv})];case 1:return s=o.sent(),this.persistence=s,[2,s.As.Wh]}}))}))}))},t.prototype.Pw=function(){return this.persistence=Gr.Wa(this.clientId),this.Fv=new Di,Promise.resolve(null)},t.prototype.Rw=function(t,e){var n=this;return d("FirestoreClient","Initializing. user=",t.uid),this.platform.kw(this.Ew).then((function(r){return o.__awaiter(n,void 0,void 0,(function(){var n,i,s,a,u,c=this;return o.__generator(this,(function(h){switch(h.label){case 0:return n=new qr,this.zh=new Gn(this.persistence,n,t),[4,this.zh.start()];case 1:return h.sent(),e&&(this.Nw=new Jn(e,this.Qr,this.zh)),i=this.platform.Ow(),s=this.platform.Fw(this.Ew.s),a=new Zr(this.Qr,r,this.credentials,s),u=function(t){return c.rd.Tv(t,1)},this.Rv=new Ii(this.zh,a,this.Qr,(function(t){return c.rd.Tv(t,0)}),i),this.rd=new Vi(this.zh,this.Rv,this.Fv,t),this.Fv.El=u,this.Rv.rd=this.rd,this.Fv.rd=this.rd,this.Vw=new Hi(this.rd),[4,this.Fv.start()];case 2:return h.sent(),[4,this.Rv.start()];case 3:return h.sent(),[4,this.persistence.ra((function(t){return o.__awaiter(c,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.rd.yd(t)];case 1:return e.sent(),this.Nw&&(t&&!this.Nw.Co?this.Nw.start():t||this.Nw.stop()),[2]}}))}))}))];case 4:return h.sent(),[4,this.persistence.ua((function(){return o.__awaiter(c,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return h.sent(),[2]}}))}))}))},t.prototype.bd=function(t){return this.Qr.du(),d("FirestoreClient","Credential Changed. Current user: "+t.uid),this.rd.bd(t)},t.prototype.disableNetwork=function(){var t=this;return this.Dw(),this.Qr.enqueue((function(){return t.rd.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.Qr.au((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.Nw&&this.Nw.stop(),[4,this.Rv.shutdown()];case 1:return t.sent(),[4,this.Fv.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.D(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.Dw();var e=new pn;return this.Qr.$r((function(){return t.rd.nw(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.Dw();var i=new Bi(t,e,n);return this.Qr.$r((function(){return r.Vw.listen(i)})),i},t.prototype.nd=function(t){var e=this;this.Uw||this.Qr.$r((function(){return e.Vw.nd(t)}))},t.prototype.xw=function(t){var e=this;return this.Dw(),this.Qr.enqueue((function(){return e.zh.oh(t)})).then((function(t){if(t instanceof Xt)return t;if(t instanceof Zt)return null;throw new A(S.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.jw=function(t){var e=this;return this.Dw(),this.Qr.enqueue((function(){return o.__awaiter(e,void 0,void 0,(function(){var e,n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,this.zh.vh(t,!0)];case 1:return e=i.sent(),n=new Mi(t,e.mh),r=n.pv(e.documents),[2,n.es(r,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.Dw();var n=new pn;return this.Qr.$r((function(){return e.rd.write(t,n)})),n.promise},t.prototype.s=function(){return this.Ew.s},t.prototype.ww=function(t){var e=this;this.Dw(),this.Qr.$r((function(){return e.Vw.ww(t),Promise.resolve()}))},t.prototype.mw=function(t){this.Uw||this.Vw.mw(t)},Object.defineProperty(t.prototype,"Uw",{get:function(){return this.Qr.uu},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.Dw();var n=new pn;return this.Qr.$r((function(){return e.rd.runTransaction(e.Qr,t,n),Promise.resolve()})),n.promise},t}(),Qi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.Lw(this.observer.next,t)},t.prototype.error=function(t){this.Lw(this.observer.error,t)},t.prototype.qw=function(){this.muted=!0},t.prototype.Lw=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();function $i(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ki=Yn.Bh,Yi=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new A(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else z("settings","non-empty string","host",t.host),this.host=t.host,Q("settings","boolean","ssl",t.ssl),this.ssl=L(t.ssl,!0);if(tt("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),Q("settings","object","credentials",t.credentials),this.credentials=t.credentials,Q("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?v("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&v("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=L(t.timestampsInSnapshots,!0),Q("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Yn.Qh;else{if(t.cacheSizeBytes!==Ki&&t.cacheSizeBytes<Yn.Mh)throw new A(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Yn.Mh);this.cacheSizeBytes=t.cacheSizeBytes}Q("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),Ji=function(){function t(e,n){var r=this;if(this.Bw=null,this.Mw=new vn,this.INTERNAL={delete:function(){return o.__awaiter(r,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.Qw(),[4,this.Gw.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var i=e;this.Bw=i,this.Ww=t.zw(i),this.Kw=i.name,this.Hw=new x(n)}else{var s=e;if(!s.projectId)throw new A(S.INVALID_ARGUMENT,"Must provide projectId");this.Ww=new C(s.projectId,s.database),this.Kw="[DEFAULT]",this.Hw=new k}this.Jw=new Yi({}),this.Yw=this.Xw(this.Ww)}return t.prototype.settings=function(t){if(V("Firestore.settings",arguments,1),W("Firestore.settings","object",1,t),P(t,"persistence"))throw new A(S.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Yi(t);if(this.Gw&&!this.Jw.isEqual(e))throw new A(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.Jw=e,void 0!==e.credentials&&(this.Hw=D(e.credentials))},t.prototype.enableNetwork=function(){return this.Qw(),this.Gw.enableNetwork()},t.prototype.disableNetwork=function(){return this.Qw(),this.Gw.disableNetwork()},t.prototype.enablePersistence=function(t){if(this.Gw)throw new A(S.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&v("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=L(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.$w(new Wi(this.Jw.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=Mr.Ia(this.Zw()),n=new pn;return this.Mw.su((function(){return o.__awaiter(t,void 0,void 0,(function(){var t;return o.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this.Gw&&!this.Gw.Uw)throw new A(S.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Mr.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"tm",{get:function(){return this.Qw(),this.Gw.Uw},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.Qw(),this.Gw.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){return this.Qw(),$i(t)?this.nm(t):(W("Firestore.onSnapshotsInSync","function",1,t),this.nm({next:t}))},t.prototype.nm=function(t){var e=this,n=new Qi({next:function(){t.next&&t.next()},error:function(t){throw m("Uncaught Error in onSnapshotsInSync")}});return this.Gw.ww(n),function(){n.qw(),e.Gw.mw(n)}},t.prototype.Qw=function(){return this.Gw||this.$w(new Gi),this.Gw},t.prototype.Zw=function(){return new I(this.Ww,this.Kw,this.Jw.host,this.Jw.ssl,this.Jw.forceLongPolling)},t.prototype.$w=function(t){g(!!this.Jw.host,"FirestoreSettings.host is not set"),g(!this.Gw,"configureClient() called multiple times");var e=this.Zw();return this.Gw=new zi(sn.t(),e,this.Hw,this.Mw),this.Gw.start(t)},t.prototype.Xw=function(t){return new vi((function(e){if(e instanceof to){var n=t,r=e.firestore.Ww;if(!r.isEqual(n))throw new A(S.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new di(t,e.im)}return e}))},t.zw=function(t){var e=t.options;if(!P(e,"projectId"))throw new A(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new A(S.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new C(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Bw)throw new A(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Bw},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return V("Firestore.collection",arguments,1),W("Firestore.collection","non-empty string",1,t),this.Qw(),new so(ct.it(t),this)},t.prototype.doc=function(t){return V("Firestore.doc",arguments,1),W("Firestore.doc","non-empty string",1,t),this.Qw(),to.em(ct.it(t),this)},t.prototype.collectionGroup=function(t){if(V("Firestore.collectionGroup",arguments,1),W("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new A(S.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Qw(),new io(new oe(ct.et,t),this)},t.prototype.runTransaction=function(t){var e=this;return V("Firestore.runTransaction",arguments,1),W("Firestore.runTransaction","function",1,t),this.Qw().transaction((function(n){return t(new Xi(e,n))}))},t.prototype.batch=function(){return this.Qw(),new Zi(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(f()){case 0:return"debug";case 1:return"error";case 2:return"silent";default:return m("Unknown log level: "+f())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(V("Firestore.setLogLevel",arguments,1),W("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":p(0);break;case"error":p(1);break;case"silent":p(2);break;default:throw new A(S.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype.rm=function(){return this.Jw.timestampsInSnapshots},t}(),Xi=function(){function t(t,e){this.um=t,this.sm=e}return t.prototype.get=function(t){var e=this;V("Transaction.get",arguments,1);var n=ho("Transaction.get",t,this.um);return this.sm.lookup([n.im]).then((function(t){if(!t||1!==t.length)return m("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof Zt)return new no(e.um,n.im,null,!1,!1,n.om);if(r instanceof Xt)return new no(e.um,n.im,r,!1,!1,n.om);throw m("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},t.prototype.set=function(t,e,n){H("Transaction.set",arguments,2,3);var r=ho("Transaction.set",t,this.um);n=ao("Transaction.set",n);var i=fo(r.om,e,"Transaction.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.um.Yw.sl(s,o,n.mergeFields):this.um.Yw.rl(s,o);return this.sm.set(r.im,a),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return"string"==typeof e||e instanceof ti?(q("Transaction.update",arguments,3),r=ho("Transaction.update",t,this.um),i=this.um.Yw.cl("Transaction.update",e,n,o)):(V("Transaction.update",arguments,2),r=ho("Transaction.update",t,this.um),i=this.um.Yw.ol("Transaction.update",e)),this.sm.update(r.im,i),this},t.prototype.delete=function(t){V("Transaction.delete",arguments,1);var e=ho("Transaction.delete",t,this.um);return this.sm.delete(e.im),this},t}(),Zi=function(){function t(t){this.um=t,this.hm=[],this.cm=!1}return t.prototype.set=function(t,e,n){H("WriteBatch.set",arguments,2,3),this.am();var r=ho("WriteBatch.set",t,this.um);n=ao("WriteBatch.set",n);var i=fo(r.om,e,"WriteBatch.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.um.Yw.sl(s,o,n.mergeFields):this.um.Yw.rl(s,o);return this.hm=this.hm.concat(a.Hf(r.im,At.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.am(),"string"==typeof e||e instanceof ti?(q("WriteBatch.update",arguments,3),r=ho("WriteBatch.update",t,this.um),i=this.um.Yw.cl("WriteBatch.update",e,n,o)):(V("WriteBatch.update",arguments,2),r=ho("WriteBatch.update",t,this.um),i=this.um.Yw.ol("WriteBatch.update",e)),this.hm=this.hm.concat(i.Hf(r.im,At.exists(!0))),this},t.prototype.delete=function(t){V("WriteBatch.delete",arguments,1),this.am();var e=ho("WriteBatch.delete",t,this.um);return this.hm=this.hm.concat(new Ot(e.im,At.NONE)),this},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.am(),this.cm=!0,this.hm.length>0?[2,this.um.Qw().write(this.hm)]:[2]}))}))},t.prototype.am=function(){if(this.cm)throw new A(S.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),to=function(){function t(t,e,n){this.im=t,this.firestore=e,this.om=n,this.Gw=this.firestore.Qw()}return t.em=function(e,n,r){if(e.length%2!=0)throw new A(S.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.nt()+" has "+e.length);return new t(new ft(e),n,r)},Object.defineProperty(t.prototype,"id",{get:function(){return this.im.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new so(this.im.path.H(),this.firestore,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.im.path.nt()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(V("DocumentReference.collection",arguments,1),W("DocumentReference.collection","non-empty string",1,t),!t)throw new A(S.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=ct.it(t);return new so(this.im.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw et("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this.im.isEqual(e.im)&&this.om===e.om},t.prototype.set=function(t,e){H("DocumentReference.set",arguments,1,2),e=ao("DocumentReference.set",e);var n=fo(this.om,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.Yw.sl(i,r,e.mergeFields):this.firestore.Yw.rl(i,r);return this.Gw.write(o.Hf(this.im,At.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof ti?(q("DocumentReference.update",arguments,2),n=this.firestore.Yw.cl("DocumentReference.update",t,e,r)):(V("DocumentReference.update",arguments,1),n=this.firestore.Yw.ol("DocumentReference.update",t)),this.Gw.write(n.Hf(this.im,At.exists(!0)))},t.prototype.delete=function(){return V("DocumentReference.delete",arguments,0),this.Gw.write([new Ot(this.im,At.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||$i(t[i])||(tt("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),Q("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return $i(t[i])?n=t[i]:(W("DocumentReference.onSnapshot","function",i,t[i]),G("DocumentReference.onSnapshot","function",i+1,t[i+1]),G("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.fm(o,n)},t.prototype.fm=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Qi({next:function(t){if(e.next){g(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n.im);e.next(new no(n.firestore,n.im,r,t.fromCache,t.hasPendingWrites,n.om))}},error:r}),o=this.Gw.listen(oe.jn(this.im.path),i,t);return function(){i.qw(),n.Gw.nd(o)}},t.prototype.get=function(t){var e=this;return H("DocumentReference.get",arguments,0,1),co("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.Qw().xw(e.im).then((function(t){n(new no(e.firestore,e.im,t,!0,t instanceof Xt&&t.en,e.om))}),r):e.lm(n,r,t)}))},t.prototype.lm=function(t,e,n){var r=this.fm({includeMetadataChanges:!0,Tw:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new A(S.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new A(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t.prototype.withConverter=function(e){return new t(this.im,this.firestore,e)},t}(),eo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),no=function(){function t(t,e,n,r,i,o){this.um=t,this.im=e,this.dm=n,this.vm=r,this.wm=i,this.om=o}return t.prototype.data=function(t){if(H("DocumentSnapshot.data",arguments,0,1),t=uo("DocumentSnapshot.data",t),this.dm){if(this.om){var e=new ro(this.um,this.im,this.dm,this.vm,this.wm);return this.om.fromFirestore(e,t)}return this.mm(this.dm.data(),Pt.mn(t,this.um.rm()))}},t.prototype.get=function(t,e){if(H("DocumentSnapshot.get",arguments,1,2),e=uo("DocumentSnapshot.get",e),this.dm){var n=this.dm.data().field(gi("DocumentSnapshot.get",t));if(null!==n)return this.pm(n,Pt.mn(e,this.um.rm()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this.im.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new to(this.im,this.um,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.dm},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new eo(this.wm,this.vm)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw et("isEqual","DocumentSnapshot",1,e);return this.um===e.um&&this.vm===e.vm&&this.im.isEqual(e.im)&&(null===this.dm?null===e.dm:this.dm.isEqual(e.dm))&&this.om===e.om},t.prototype.mm=function(t,e){var n=this,r={};return t.forEach((function(t,i){r[t]=n.pm(i,e)})),r},t.prototype.pm=function(t,e){if(t instanceof $t)return this.mm(t,e);if(t instanceof Yt)return this.gm(t,e);if(t instanceof zt){var n=t.value(e),r=this.um.Qw().s();return t.s.isEqual(r)||v("Document "+this.im.path+" contains a document reference within a different database ("+t.s.projectId+"/"+t.s.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new to(n,this.um,this.om)}return t.value(e)},t.prototype.gm=function(t,e){var n=this;return t.Ht.map((function(t){return n.pm(t,e)}))},t}(),ro=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return g(void 0!==n,"Document in a QueryDocumentSnapshot should exist"),n},e}(no),io=function(){function t(t,e,n){this.bm=t,this.firestore=e,this.om=n}return t.prototype.where=function(e,n,r){V("Query.where",arguments,3),Z("Query.where",3,r);var i,o=["<","<=","==",">=",">","array-contains","in","array-contains-any"];K("Query.where",o,2,n);var s=gi("Query.where",e),a=se.it(n);if(s.ut()){if(a===se.ARRAY_CONTAINS||a===se.ARRAY_CONTAINS_ANY)throw new A(S.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+a.toString()+"' queries on FieldPath.documentId().");if(a===se.IN){this.ym(r,a);for(var u=[],c=0,h=r;c<h.length;c++){var l=h[c];u.push(this._m(l))}i=new Yt(u)}else i=this._m(r)}else a!==se.IN&&a!==se.ARRAY_CONTAINS_ANY||this.ym(r,a),i=this.firestore.Yw.al("Query.where",r,a===se.IN);var f=ae.create(s,a,i);return this.Im(f),new t(this.bm.Bn(f),this.firestore,this.om)},t.prototype.orderBy=function(e,n){var r;if(H("Query.orderBy",arguments,1,2),G("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=pe.ASCENDING;else{if("desc"!==n)throw new A(S.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=pe.DESCENDING}if(null!==this.bm.startAt)throw new A(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.bm.endAt)throw new A(S.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=gi("Query.orderBy",e),o=new ve(i,r);return this.Tm(o),new t(this.bm.Qn(o),this.firestore,this.om)},t.prototype.limit=function(e){return V("Query.limit",arguments,1),W("Query.limit","number",1,e),nt("Query.limit",1,e),new t(this.bm.Gn(e),this.firestore,this.om)},t.prototype.limitToLast=function(e){return V("Query.limitToLast",arguments,1),W("Query.limitToLast","number",1,e),nt("Query.limitToLast",1,e),new t(this.bm.Wn(e),this.firestore,this.om)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];q("Query.startAt",arguments,1);var i=this.Em("Query.startAt",e,n,!0);return new t(this.bm.zn(i),this.firestore,this.om)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];q("Query.startAfter",arguments,1);var i=this.Em("Query.startAfter",e,n,!1);return new t(this.bm.zn(i),this.firestore,this.om)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];q("Query.endBefore",arguments,1);var i=this.Em("Query.endBefore",e,n,!0);return new t(this.bm.Kn(i),this.firestore,this.om)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];q("Query.endAt",arguments,1);var i=this.Em("Query.endAt",e,n,!1);return new t(this.bm.Kn(i),this.firestore,this.om)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw et("isEqual","Query",1,e);return this.firestore===e.firestore&&this.bm.isEqual(e.bm)},t.prototype.withConverter=function(e){return new t(this.bm,this.firestore,e)},t.prototype.Em=function(t,e,n,r){if(Z(t,1,e),e instanceof no){if(n.length>0)throw new A(S.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new A(S.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.Dm(t,i.dm,r)}var o=[e].concat(n);return this.Sm(t,o,r)},t.prototype.Dm=function(t,e,n){for(var r=[],i=0,o=this.bm.orderBy;i<o.length;i++){var s=o[i];if(s.field.ut())r.push(new zt(this.firestore.Ww,e.key));else{var a=e.field(s.field);if(a instanceof Wt)throw new A(S.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.nt();throw new A(S.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new de(r,n)},t.prototype.Sm=function(t,e,n){var r=this.bm.On;if(e.length>r.length)throw new A(S.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.ut()){if("string"!=typeof s)throw new A(S.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.bm.ui()&&-1!==s.indexOf("/"))throw new A(S.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.bm.path.child(ct.it(s));if(!ft.ht(a))throw new A(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new ft(a);i.push(new zt(this.firestore.Ww,u))}else{var c=this.firestore.Yw.al(t,s);i.push(c)}}return new de(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||$i(t[i])||(tt("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),Q("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),$i(t[i])?n=t[i]:(W("Query.onSnapshot","function",i,t[i]),G("Query.onSnapshot","function",i+1,t[i+1]),G("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.Rm(this.bm),this.fm(r,n)},t.prototype.fm=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Qi({next:function(t){e.next&&e.next(new oo(n.firestore,n.bm,t,n.om))},error:r}),o=this.firestore.Qw(),s=o.listen(this.bm,i,t);return function(){i.qw(),o.nd(s)}},t.prototype.Rm=function(t){if(t.ei()&&0===t.On.length)throw new A(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},t.prototype.get=function(t){var e=this;return H("Query.get",arguments,0,1),co("Query.get",t),this.Rm(this.bm),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.Qw().jw(e.bm).then((function(t){n(new oo(e.firestore,e.bm,t,e.om))}),r):e.lm(n,r,t)}))},t.prototype.lm=function(t,e,n){var r=this.fm({includeMetadataChanges:!0,Tw:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new A(S.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype._m=function(t){if("string"==typeof t){if(""===t)throw new A(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.bm.ui()&&-1!==t.indexOf("/"))throw new A(S.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.bm.path.child(ct.it(t));if(!ft.ht(e))throw new A(S.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new zt(this.firestore.Ww,new ft(e))}if(t instanceof to)return new zt(this.firestore.Ww,t.im);throw new A(S.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+X(t)+".")},t.prototype.ym=function(t,e){if(!Array.isArray(t)||0===t.length)throw new A(S.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new A(S.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new A(S.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new A(S.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Im=function(t){if(t instanceof ae){var e=[se.ARRAY_CONTAINS,se.ARRAY_CONTAINS_ANY],n=[se.IN,se.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.Mn()){var o=this.bm.Ln();if(null!==o&&!o.isEqual(t.field))throw new A(S.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.bm.qn();null!==s&&this.Cm(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.bm.ri(n)),null===a&&r&&(a=this.bm.ri(e)),null!=a)throw new A(S.INVALID_ARGUMENT,a===t.op?"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter.":"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},t.prototype.Tm=function(t){if(null===this.bm.qn()){var e=this.bm.Ln();null!==e&&this.Cm(e,t.field)}},t.prototype.Cm=function(t,e){if(!e.isEqual(t))throw new A(S.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),oo=function(){function t(t,e,n,r){this.um=t,this.Am=e,this.Pm=n,this.om=r,this.km=null,this.Nm=null,this.metadata=new eo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.Pm.docs.J()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Pm.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;H("QuerySnapshot.forEach",arguments,1,2),W("QuerySnapshot.forEach","function",1,t),this.Pm.docs.forEach((function(r){t.call(e,n.Om(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new io(this.Am,this.um,this.om)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(tt("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),Q("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Pm.Ei)throw new A(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.km&&this.Nm===e||(this.km=function(t,e,n,r){if(n._i.J()){var i,o=0;return n.docChanges.map((function(e){var s=new ro(t,e.doc.key,e.doc,n.fromCache,n.Ii.has(e.doc.key),r);return g(0===e.type,"Invalid event type for first snapshot"),g(!i||n.query.Xn(i,e.doc)<0,"Got added events in wrong order"),i=e.doc,{type:"added",doc:s,oldIndex:-1,newIndex:o++}}))}var s=n._i;return n.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var i=new ro(t,e.doc.key,e.doc,n.fromCache,n.Ii.has(e.doc.key),r),o=-1,a=-1;return 0!==e.type&&(g((o=s.indexOf(e.doc.key))>=0,"Index for document not found"),s=s.delete(e.doc.key)),1!==e.type&&(a=(s=s.add(e.doc)).indexOf(e.doc.key)),{type:lo(e.type),doc:i,oldIndex:o,newIndex:a}}))}(this.um,e,this.Pm,this.om),this.Nm=e),this.km},t.prototype.isEqual=function(e){if(!(e instanceof t))throw et("isEqual","QuerySnapshot",1,e);return this.um===e.um&&this.Am.isEqual(e.Am)&&this.Pm.isEqual(e.Pm)&&this.om===e.om},t.prototype.Om=function(t){return new ro(this.um,t.key,t,this.metadata.fromCache,this.Pm.Ii.has(t.key),this.om)},t}();o.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(oo.prototype.docChanges,t,{get:function(){return function(){throw new A(S.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var so=function(t){function e(e,n,r){var i=t.call(this,oe.jn(e),n,r)||this;if(i.Fm=e,e.length%2!=1)throw new A(S.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.nt()+" has "+e.length);return i}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.bm.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.bm.path.H();return t.J()?null:new to(new ft(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.bm.path.nt()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(H("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=w.u()),W("CollectionReference.doc","non-empty string",1,t),""===t)throw new A(S.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=ct.it(t);return to.em(this.bm.path.child(e),this.firestore,this.om)},e.prototype.add=function(t){V("CollectionReference.add",arguments,1);var e=this.om?this.om.toFirestore(t):t;W("CollectionReference.add","object",1,e);var n=this.doc();return n.set(t).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Fm,this.firestore,t)},e}(io);function ao(t,e){if(void 0===e)return{merge:!1};if(tt(t,e,["merge","mergeFields"]),Q(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new A(S.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+X(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new A(S.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+X(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof ti}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new A(S.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function uo(t,e){return void 0===e?{}:(tt(t,e,["serverTimestamps"]),$(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function co(t,e){G(t,"object",1,e),e&&(tt(t,e,["source"]),$(t,0,"source",e.source,["default","server","cache"]))}function ho(t,e,n){if(e instanceof to){if(e.firestore!==n)throw new A(S.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw et(t,"DocumentReference",1,e)}function lo(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return m("Unknown change type: "+t)}}function fo(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var po=an(Ji,"Use firebase.firestore() instead."),vo=an(Xi,"Use firebase.firestore().runTransaction() instead."),yo=an(Zi,"Use firebase.firestore().batch() instead."),mo=an(to,"Use firebase.firestore().doc() instead."),go=an(no),wo=an(ro),_o=an(io),bo=an(oo),Eo=an(so,"Use firebase.firestore().collection() instead."),Io={Firestore:po,GeoPoint:ot,Timestamp:st,Blob:ln,Transaction:vo,WriteBatch:yo,DocumentReference:mo,DocumentSnapshot:go,Query:_o,QueryDocumentSnapshot:wo,QuerySnapshot:bo,CollectionReference:Eo,FieldPath:ti,FieldValue:ui,setLogLevel:Ji.setLogLevel,CACHE_SIZE_UNLIMITED:Ki},Co=function(){function t(){}return t.prototype.xl=function(t){},t.prototype.shutdown=function(){},t}(),To=function(){function t(){var t=this;this.Vm=function(){return t.Um()},this.xm=function(){return t.jm()},this.Lm=[],this.qm()}return t.prototype.xl=function(t){this.Lm.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Vm),window.removeEventListener("offline",this.xm)},t.prototype.qm=function(){window.addEventListener("online",this.Vm),window.addEventListener("offline",this.xm)},t.prototype.Um=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Lm;t<e.length;t++)(0,e[t])(0)},t.prototype.jm=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Lm;t<e.length;t++)(0,e[t])(1)},t.cs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),So=function(){function t(t){this.Bm=t.Bm,this.Mm=t.Mm}return t.prototype.Af=function(t){g(!this.Qm,"Called onOpen on stream twice!"),this.Qm=t},t.prototype.Ef=function(t){g(!this.Gm,"Called onClose on stream twice!"),this.Gm=t},t.prototype.onMessage=function(t){g(!this.Wm,"Called onMessage on stream twice!"),this.Wm=t},t.prototype.close=function(){this.Mm()},t.prototype.send=function(t){this.Bm(t)},t.prototype.zm=function(){g(void 0!==this.Qm,"Cannot call onOpen because no callback was set"),this.Qm()},t.prototype.Km=function(t){g(void 0!==this.Gm,"Cannot call onClose because no callback was set"),this.Gm(t)},t.prototype.Hm=function(t){g(void 0!==this.Wm,"Cannot call onMessage because no callback was set"),this.Wm(t)},t}(),Ao={BatchGetDocuments:"batchGet",Commit:"commit"},No="gl-js/ fire/"+h,ko=function(){function t(t){this.s=t.s,this.Jm=(t.ssl?"https":"http")+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.Ym=function(t,e){if(e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n]);t["X-Goog-Api-Client"]=No},t.prototype.Bf=function(t,e,n){var r=this,i=this.Xm(t);return new Promise((function(s,a){var u=new c.XhrIo;u.listenOnce(c.EventType.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case c.ErrorCode.NO_ERROR:var e=u.getResponseJson();d("Connection","XHR received:",JSON.stringify(e)),s(e);break;case c.ErrorCode.TIMEOUT:d("Connection",'RPC "'+t+'" timed out'),a(new A(S.DEADLINE_EXCEEDED,"Request time out"));break;case c.ErrorCode.HTTP_ERROR:var n=u.getStatus();if(d("Connection",'RPC "'+t+'" failed with status:',n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson().error;if(r&&r.status&&r.message){var i=(o=r.status.toLowerCase().replace("_","-"),Object.values(S).indexOf(o)>=0?o:S.UNKNOWN);a(new A(i,r.message))}else a(new A(S.UNKNOWN,"Server responded with status "+u.getStatus()))}else d("Connection",'RPC "'+t+'" failed'),a(new A(S.UNAVAILABLE,"Connection failed."));break;default:m('RPC "'+t+'" failed with unanticipated webchannel error '+u.getLastErrorCode()+": "+u.getLastError()+", giving up.")}}finally{d("Connection",'RPC "'+t+'" completed.')}var o}));var h=o.__assign({},e);delete h.database;var l=JSON.stringify(h);d("Connection","XHR sending: ",i+" "+l);var f={"Content-Type":"text/plain"};r.Ym(f,n),u.send(i,"POST",l,f,15)}))},t.prototype.Mf=function(t,e,n){return this.Bf(t,e,n)},t.prototype.Pf=function(t,e){var n=[this.Jm,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=c.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Ym(i.initMessageHeaders,e),a.isMobileCordova()||a.isReactNative()||a.isElectron()||a.isIE()||a.isUWP()||a.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");d("Connection","Creating WebChannel: "+o+" "+i);var s=r.createWebChannel(o,i),u=!1,h=!1,l=new So({Bm:function(t){h?d("Connection","Not sending because WebChannel is closed:",t):(u||(d("Connection","Opening WebChannel transport."),s.open(),u=!0),d("Connection","WebChannel sending:",t),s.send(t))},Mm:function(){return s.close()}}),f=function(t,e){s.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(c.WebChannel.EventType.OPEN,(function(){h||d("Connection","WebChannel transport opened.")})),f(c.WebChannel.EventType.CLOSE,(function(){h||(h=!0,d("Connection","WebChannel transport closed"),l.Km())})),f(c.WebChannel.EventType.ERROR,(function(t){h||(h=!0,d("Connection","WebChannel transport errored:",t),l.Km(new A(S.UNAVAILABLE,"The operation could not be completed")))})),f(c.WebChannel.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];g(!!n,"Got a webchannel message without data.");var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){d("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=be[t];if(void 0!==e)return Se(e)}(i),a=r.message;void 0===o&&(o=S.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),h=!0,l.Km(new A(o,a)),s.close()}else d("Connection","WebChannel received:",n),l.Hm(n)}})),setTimeout((function(){l.zm()}),0),l},t.prototype.Xm=function(t){var e=Ao[t];return g(void 0!==e,"Unknown REST mapping for: "+t),this.Jm+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},t}(),xo=function(){function t(){this.xr="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.kw=function(t){return Promise.resolve(new ko(t))},t.prototype.Ow=function(){return To.cs()?new To:new Co},t.prototype.Fw=function(t){return new on(t,{Te:!0})},t.prototype.i=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();function Ro(t){(function(t){var e;t.INTERNAL.registerComponent(new u.Component("firestore",(function(t){var e=t.getProvider("app").getImmediate();return new Ji(e,t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps((g((e=Io)&&"object"==typeof e,"shallowCopy() expects object parameter."),o.__assign({},e))))})(t),t.registerVersion("@firebase/firestore","1.12.2")}sn.Ur(new xo),Ro(i),e.__PRIVATE_registerFirestore=Ro},NSPt:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r,s=n("mrSG"),a=n("zVF4"),u=n("q/0M"),c=n("S+S0"),h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),a.stringify(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:a.jsonEval(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return a.contains(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(n){}return new l},p=f("localStorage"),d=f("sessionStorage"),v=new u.Logger("@firebase/database"),y=(i=1,function(){return i++}),m=function(t){var e=a.stringToByteArray(t),n=new a.Sha1;n.update(e);var r=n.digest();return a.base64.encodeByteArray(r)},g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=g.apply(null,i):n+="object"==typeof i?a.stringify(i):i,n+=" "}return n},w=null,_=!0,b=function(t,e){a.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=u.LogLevel.VERBOSE,w=v.log.bind(v),e&&d.set("logging_enabled",!0)):"function"==typeof t?w=t:(w=null,d.remove("logging_enabled"))},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===w&&!0===d.get("logging_enabled")&&b(!0)),w){var n=g.apply(null,t);w(n)}},I=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];E.apply(void 0,s.__spread([t],e))}},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+g.apply(void 0,s.__spread(t));v.error(n)},T=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+g.apply(void 0,s.__spread(t));throw v.error(n),new Error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+g.apply(void 0,s.__spread(t));v.warn(n)},A=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},N="[MIN_NAME]",k="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===N||e===k)return-1;if(e===N||t===k)return 1;var n=$(t),r=$(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},R=function(t,e){return t===e?0:t<e?-1:1},O=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+a.stringify(e))},D=function(t){if("object"!=typeof t||null===t)return a.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=a.stringify(e[i]),r+=":",r+=D(t[e[i]]);return r+"}"},P=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function L(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M,F,U,j,V,q,H,B,W,G,z=function(t){var e,n,r,i,o;a.assert(!A(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(o=0;o<64;o+=8){var h=parseInt(u.substr(o,8),2).toString(16);1===h.length&&(h="0"+h),c+=h}return c.toLowerCase()},Q=new RegExp("^-?(0*)\\d{1,10}$"),$=function(t){if(Q.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},K=function(t){try{t()}catch(e){setTimeout((function(){throw S("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},Y=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},J=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!0,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),X=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=a.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=a.stringLength(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=a.stringLength(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Z=function(){function t(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=p.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&p.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(a.assert("string"==typeof t,"typeof type must == string"),a.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return L(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),tt=function(t){var e=et(t),n=e.namespace;return"firebase"===e.domain&&T(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||T("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&S("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Z(e.host,e.secure,n,"ws"===e.scheme||"wss"===e.scheme,"",n!==e.subdomain),path:new J(e.pathString)}},et=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof t){var h=t.indexOf("//");h>=0&&(u=t.substring(0,h-1),t=t.substring(h+2));var l=t.indexOf("/");-1===l&&(l=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(l,f)),l<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(l,f)));var p=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=s.__values(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):S("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(h=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(h+1),10)):h=t.length;var d=e.split(".");3===d.length?(n=d[1],o=r=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,h).toLowerCase()&&(n="localhost"),"ns"in p&&(o=p.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},nt=/[\[\].#$\/\u0000-\u001F\u007F]/,rt=/[\[\].#$\u0000-\u001F\u007F]/,it=function(t){return"string"==typeof t&&0!==t.length&&!nt.test(t)},ot=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},st=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!A(t)||t&&"object"==typeof t&&a.contains(t,".sv")},at=function(t,e,n,r,i){i&&void 0===n||ut(a.errorPrefix(t,e,i),n,r)},ut=function(t,e,n){var r=n instanceof J?new X(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(A(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&a.stringLength(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(L(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!it(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),ut(t,n,r),r.pop()})),i&&o)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ct=function(t,e,n,r,i){if(!i||void 0!==n){var o=a.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];L(n,(function(t,e){var n=new J(t);if(ut(o,e,r.child(n)),".priority"===n.getBack()&&!st(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!it(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(J.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},ht=function(t,e,n,r){if(!r||void 0!==n){if(A(n))throw new Error(a.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!st(n))throw new Error(a.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},lt=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(a.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},ft=function(t,e,n,r){if(!(r&&void 0===n||it(n)))throw new Error(a.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},pt=function(t,e,n,r){if(!(r&&void 0===n||ot(n)))throw new Error(a.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},dt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pt(t,e,n,r)},vt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},yt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!it(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ot(t)}(r))throw new Error(a.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},mt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(a.errorPrefix(t,e,r)+"must be a boolean.")},gt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){a.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),a.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){a.validateArgCount("OnDisconnect.remove",0,1,arguments.length),vt("OnDisconnect.remove",this.path_),a.validateCallback("OnDisconnect.remove",1,t,!0);var e=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){a.validateArgCount("OnDisconnect.set",1,2,arguments.length),vt("OnDisconnect.set",this.path_),at("OnDisconnect.set",1,t,this.path_,!1),a.validateCallback("OnDisconnect.set",2,e,!0);var n=new a.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){a.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),vt("OnDisconnect.setWithPriority",this.path_),at("OnDisconnect.setWithPriority",1,t,this.path_,!1),ht("OnDisconnect.setWithPriority",2,e,!1),a.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new a.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(a.validateArgCount("OnDisconnect.update",1,2,arguments.length),vt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ct("OnDisconnect.update",1,t,this.path_,!1),a.validateCallback("OnDisconnect.update",2,e,!0);var i=new a.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),wt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return a.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),_t=(M="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",F=0,U=[],function(t){var e,n=t===F;F=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=M.charAt(t%64),t=Math.floor(t/64);a.assert(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===U[e];e--)U[e]=0;U[e]++}else for(e=0;e<12;e++)U[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=M.charAt(U[e]);return a.assert(20===i.length,"nextPushId: Length should be 20."),i}),bt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Et=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new bt(N,t),r=new bt(N,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return bt.MIN},t}(),It=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return j},set:function(t){j=t},enumerable:!0,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw a.assertionError("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return new bt(k,j)},e.prototype.makePost=function(t,e){return a.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new bt(t,j)},e.prototype.toString=function(){return".key"},e}(Et),Ct=new It,Tt=function(t){return"number"==typeof t?"number:"+z(t):"string:"+t},St=function(t){if(t.isLeafNode()){var e=t.val();a.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&a.contains(e,".sv"),"Priority must be a string or number.")}else a.assert(t===V||t.isEmpty(),"priority of unexpected type.");a.assert(t===V||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},At=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,a.assert(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),St(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return q},set:function(t){q=t},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(a.assert(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Tt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?z(this.value_):this.value_,this.lazyHash_=m(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(a.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return a.assert(i>=0,"Unknown leaf type: "+n),a.assert(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Nt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return new bt(k,new At("[PRIORITY-POST]",B))},e.prototype.makePost=function(t,e){var n=H(t);return new bt(e,new At("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Et)),kt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),xt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Ot.EMPTY_NODE,this.right=null!=o?o:Ot.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ot.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ot.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Rt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new xt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ot=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new kt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new kt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new kt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new kt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Rt,t}(),Dt=Math.log(2),Pt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Dt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Lt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new xt(s,o.node,xt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),h=i(u+1,r);return o=t[u],s=n?n(o):o,new xt(s,o.node,xt.BLACK,c,h)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),h=t[o],l=n?n(h):h;u(new xt(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?a(l,xt.BLACK):(a(l,xt.BLACK),a(l,xt.RED))}return o}(new Pt(t.length));return new Ot(r||e,o)},Mt={},Ft=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return a.assert(Mt&&Nt,"ChildrenNode.ts has not been loaded"),W=W||new t({".priority":Mt},{".priority":Nt})},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var e=a.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ot?e:null},t.prototype.hasIndex=function(t){return a.contains(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){a.assert(e!==Ct,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,u=n.getIterator(bt.Wrap),c=u.getNext();c;)o=o||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=o?Lt(i,e.getCompare()):Mt;var h=e.toString(),l=s.__assign({},this.indexSet_);l[h]=e;var f=s.__assign({},this.indexes_);return f[h]=r,new t(f,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(a.map(this.indexes_,(function(t,i){var o=a.safeGet(r.indexSet_,i);if(a.assert(o,"Missing index implementation for "+i),t===Mt){if(o.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(bt.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),Lt(s,o.getCompare())}return Mt}var h=n.get(e.name),l=t;return h&&(l=l.remove(new bt(e.name,h))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(a.map(this.indexes_,(function(t){if(t===Mt)return t;var r=n.get(e.name);return r?t.remove(new bt(e.name,r)):t})),this.indexSet_)},t}();function Ut(t,e){return x(t.name,e.name)}function jt(t,e){return x(t,e)}var Vt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&St(this.priorityNode_),this.children_.isEmpty()&&a.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return G||(G=new t(new Ot(jt),null,Ft.Default))},enumerable:!0,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||G},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?G:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(a.assert(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new bt(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?G:this.priorityNode_;return new t(i,s,o)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;a.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Nt,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Tt(this.getPriority().val())+":"),this.forEachChild(Nt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":m(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new bt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new bt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new bt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===qt?-1:0},t.prototype.withIndex=function(e){if(e===Ct||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ct||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Nt),r=e.getIterator(Nt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ct?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),qt=new(function(t){function e(){return t.call(this,new Ot(jt),Vt.EMPTY_NODE,Ft.Default)||this}return s.__extends(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Vt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Vt));function Ht(t,e){if(void 0===e&&(e=null),null===t)return Vt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),a.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new At(t,Ht(e));if(t instanceof Array){var n=Vt.EMPTY_NODE;return L(t,(function(e,r){if(a.contains(t,e)&&"."!==e.substring(0,1)){var i=Ht(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Ht(e))}var r=[],i=!1;if(L(t,(function(t,e){if("."!==t.substring(0,1)){var n=Ht(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new bt(t,n)))}})),0===r.length)return Vt.EMPTY_NODE;var o=Lt(r,Ut,(function(t){return t.name}),jt);if(i){var s=Lt(r,Nt.getCompare());return new Vt(o,Ht(e),new Ft({".priority":s},{".priority":Nt}))}return new Vt(o,Ht(e),Ft.Default)}Object.defineProperties(bt,{MIN:{value:new bt(N,Vt.EMPTY_NODE)},MAX:{value:new bt(k,qt)}}),It.__EMPTY_NODE=Vt.EMPTY_NODE,At.__childrenNodeConstructor=Vt,V=qt,function(t){B=t}(qt),function(t){H=t}(Ht);var Bt,Wt,Gt,zt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s.__extends(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return bt.MIN},e.prototype.maxPost=function(){return bt.MAX},e.prototype.makePost=function(t,e){var n=Ht(t);return new bt(e,n)},e.prototype.toString=function(){return".value"},e}(Et)),Qt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,a.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return s.__extends(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Ht(t),r=Vt.EMPTY_NODE.updateChild(this.indexPath_,n);return new bt(e,r)},e.prototype.maxPost=function(){var t=Vt.EMPTY_NODE.updateChild(this.indexPath_,qt);return new bt(k,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Et),$t=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return a.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return a.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return a.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return a.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){a.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),pt("DataSnapshot.child",1,e,!1);var n=new J(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Nt)},t.prototype.hasChild=function(t){a.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),pt("DataSnapshot.hasChild",1,t,!1);var e=new J(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return a.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(a.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),a.validateCallback("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Nt))}))},t.prototype.hasChildren=function(){return a.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),t.prototype.numChildren=function(){return a.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return a.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),Kt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+a.stringify(this.snapshot.exportVal())},t}(),Yt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Jt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Kt("value",this,new $t(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),Xt=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return a.contains(this.callbacks_,e="children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Yt(this,t,e):null},t.prototype.createEvent=function(t,e){a.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Kt(t.type,this,new $t(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){a.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Zt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return a.assert(Bt,"Reference.ts has not been loaded"),Bt},set:function(t){Bt=t},enumerable:!0,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ct){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==N)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==k)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Nt){if(null!=e&&!st(e)||null!=n&&!st(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(a.assert(t.getIndex()instanceof Qt||t.getIndex()===zt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return a.validateArgCount("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){a.validateArgCount("Query.on",2,4,arguments.length),lt("Query.on",1,e,!1),a.validateCallback("Query.on",2,n,!1);var o=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,o.cancel,o.context);else{var s={};s[e]=n,this.onChildEvent(s,o.cancel,o.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Jt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new Xt(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){a.validateArgCount("Query.off",0,3,arguments.length),lt("Query.off",1,t,!0),a.validateCallback("Query.off",2,e,!0),a.validateContextObject("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var o=e||null;r=new Jt(o,null,n||null)}else t&&(e&&((i={})[t]=e),r=new Xt(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.once=function(e,n,r,i){var o=this;a.validateArgCount("Query.once",1,4,arguments.length),lt("Query.once",1,e,!1),a.validateCallback("Query.once",2,n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new a.Deferred;c.promise.catch((function(){}));var h=function(t){u&&(u=!1,o.off(e,h),n&&n.bind(s.context)(t),c.resolve(t))};return this.on(e,h,(function(t){o.off(e,h),s.cancel&&s.cancel.bind(s.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(a.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(a.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(a.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');pt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new J(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new Qt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){a.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Ct);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){a.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Nt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){a.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(zt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),a.validateArgCount("Query.startAt",0,2,arguments.length),at("Query.startAt",1,e,this.path,!0),ft("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),a.validateArgCount("Query.endAt",0,2,arguments.length),at("Query.endAt",1,e,this.path,!0),ft("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(a.validateArgCount("Query.equalTo",1,2,arguments.length),at("Query.equalTo",1,t,this.path,!1),ft("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return a.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return a.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=D(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(a.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),o=this.queryIdentifier()===e.queryIdentifier();return r&&i&&o},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,a.validateCallback(t,3,r.cancel,!0),r.context=n,a.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(a.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),t}(),te=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Nt,(function(t,e){n.remember(new J(t),e)})),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new J(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),ee=function(t,e){return t&&"object"==typeof t?(a.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t},ne=function(t,e){var n,r=t.getPriority().val(),i=ee(r,e);if(t.isLeafNode()){var o=t,s=ee(o.getValue(),e);return s!==o.getValue()||i!==o.getPriority().val()?new At(s,Ht(i)):t}var a=t;return n=a,i!==a.getPriority().val()&&(n=n.updatePriority(new At(i))),a.forEachChild(Nt,(function(t,r){var i=ne(r,e);i!==r&&(n=n.updateImmediateChild(t,i))})),n},re=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),ie=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,a.assert(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),oe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=re.ACK_USER_WRITE,this.source=ie.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return a.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new J(e));return new t(J.Empty,n,this.revert)}return a.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),se=function(){function t(t,e){void 0===e&&(Wt||(Wt=new Ot(R)),e=Wt),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return L(e,(function(t,e){n=n.set(new J(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:J.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new J(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(J.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(t.child(r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,J.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,J.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(J.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(t.child(n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t.Empty=new t(null),t}(),ae=function(){function t(t,e){this.source=t,this.path=e,this.type=re.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,J.Empty):new t(this.source,this.path.popFront())},t}(),ue=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=re.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,J.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ce=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=re.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new J(e));return n.isEmpty()?null:n.value?new ue(this.source,J.Empty,n.value):new t(this.source,J.Empty,n)}return a.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),he=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),le=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new he(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new he(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new he(Vt.EMPTY_NODE,!1,!1),new he(Vt.EMPTY_NODE,!1,!1)),t}(),fe=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),pe=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){a.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(fe.childRemovedChange(e,s)):a.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(fe.childAddedChange(e,n)):o.trackChildChange(fe.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Nt,(function(t,r){e.hasChild(t)||n.trackChildChange(fe.childRemovedChange(t,r))})),e.isLeafNode()||e.forEachChild(Nt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(fe.childChangedChange(e,r,i))}else n.trackChildChange(fe.childAddedChange(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Vt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),de=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;a.assert(e===fe.CHILD_ADDED||e===fe.CHILD_CHANGED||e===fe.CHILD_REMOVED,"Only child changes supported for tracking"),a.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===fe.CHILD_ADDED&&i===fe.CHILD_REMOVED)this.changeMap.set(n,fe.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===fe.CHILD_REMOVED&&i===fe.CHILD_ADDED)this.changeMap.delete(n);else if(e===fe.CHILD_REMOVED&&i===fe.CHILD_CHANGED)this.changeMap.set(n,fe.childRemovedChange(n,r.oldSnap));else if(e===fe.CHILD_CHANGED&&i===fe.CHILD_ADDED)this.changeMap.set(n,fe.childAddedChange(n,t.snapshotNode));else{if(e!==fe.CHILD_CHANGED||i!==fe.CHILD_CHANGED)throw a.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,fe.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),ve=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),ye=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new he(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),me=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),ge=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){a.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),a.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var o,s,u=new de;if(n.type===re.OVERWRITE){var c=n;c.source.fromUser?o=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(a.assert(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),o=this.applyServerOverwrite_(e,c.path,c.snap,r,i,s,u))}else if(n.type===re.MERGE){var h=n;h.source.fromUser?o=this.applyUserMerge_(e,h.path,h.children,r,i,u):(a.assert(h.source.fromServer,"Unknown source."),s=h.source.tagged||e.getServerCache().isFiltered(),o=this.applyServerMerge_(e,h.path,h.children,r,i,s,u))}else if(n.type===re.ACK_USER_WRITE){var l=n;o=l.revert?this.revertUserWrite_(e,l.path,r,i,u):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,u)}else{if(n.type!==re.LISTEN_COMPLETE)throw a.assertionError("Unknown operation type: "+n.type);o=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,o,f),new me(o,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(fe.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,u=void 0;if(e.isEmpty())if(a.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),h=n.calcCompleteEventChildren(c instanceof Vt?c:Vt.EMPTY_NODE);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=e.getFront();if(".priority"===f){a.assert(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();u=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,u);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){u=t.getServerCache().getNode();var m=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),u);y=null!=m?o.getNode().getImmediateChild(f).updateChild(v,m):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l).updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,ve,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new ye(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new ye(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):Vt.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())&&(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),r.foreach((function(r,c){var h=n.child(r);t.cacheHasChild_(e,h.getFront())||(u=a.applyUserOverwrite_(u,h,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:se.Empty.setTree(e,n);var h=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(h.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new J(e),l,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!h.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(l,n);c=a.applyServerOverwrite_(c,new J(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=se.Empty;return a.getNode().forEachChild(Ct,(function(t,e){u=u.set(new J(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=se.Empty;return n.foreach((function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,ve,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new ye(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var h=void 0;if(t.getServerCache().isFullyInitialized())h=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();a.assert(l instanceof Vt,"serverChildren would be complete if leaf node"),h=n.calcCompleteEventChildren(l)}c=this.filter_.updateFullNode(u,h=h,i)}else{var f=e.getFront(),p=n.calcCompleteChild(f,t.getServerCache());null==p&&t.getServerCache().isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?this.filter_.updateChild(u,f,p,e.popFront(),s,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,Vt.EMPTY_NODE,e.popFront(),s,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(J.Empty),t.updateEventSnap(c,o,this.filter_.filtersNodes())},t}(),we=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach((function(t){t.type===fe.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(fe.childMovedChange(t.childName,t.snapshotNode))})),this.generateEventsForType_(i,fe.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,fe.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,fe.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,fe.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,fe.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter((function(t){return t.type===e}));s.sort(this.compareChanges_.bind(this)),s.forEach((function(e){var n=o.materializeSingleChange_(e,i);r.forEach((function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))}))}))},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type?t:(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_),t)},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw a.assertionError("Should only compare child_ events.");var n=new bt(t.childName,t.snapshotNode),r=new bt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),_e=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new pe(n.getIndex()),i=n.getNodeFilter();this.processor_=new ge(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(Vt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(Vt.EMPTY_NODE,s.getNode(),null),c=new he(a,o.isFullyInitialized(),r.filtersNodes()),h=new he(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new le(h,c),this.eventGenerator_=new we(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){a.assert(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)}))}if(t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===re.MERGE&&null!==t.source.queryId&&(a.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),a.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),a.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Nt,(function(t,e){n.push(fe.childAddedChange(t,e))})),e.isFullyInitialized()&&n.push(fe.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),be=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return a.assert(Gt,"Reference.ts has not been loaded"),Gt},set:function(t){a.assert(!Gt,"__referenceConstructor has already been defined"),Gt=t},enumerable:!0,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var u=this.views.get(o);return a.assert(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var h=s.__values(this.views.values()),l=h.next();!l.done;l=h.next())c=c.concat((u=l.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof Vt?(a=n.calcCompleteEventChildren(r),u=!1):(a=Vt.EMPTY_NODE,u=!1);var c=new le(new he(a,u,!1),new he(r,i,!1));s=new _e(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var i,o,a=e.queryIdentifier(),u=[],c=[],h=this.hasCompleteView();if("default"===a)try{for(var l=s.__values(this.views.entries()),f=l.next();!f.done;f=l.next()){var p,d=s.__read(f.value,2),v=d[0];c=c.concat((p=d[1]).removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(v),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery()))}}catch(y){i={error:y}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(p=this.views.get(a))&&(c=c.concat(p.removeEventRegistration(n,r)),p.isEmpty()&&(this.views.delete(a),p.getQuery().getQueryParams().loadsAllData()||u.push(p.getQuery())));return h&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=s.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(a){t={error:a}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=s.__values(this.views.values()),o=i.next();!o.done;o=i.next())r=r||o.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=s.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Ee=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new se(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=J.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new se(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return L(e,(function(e,r){n=n.addWrite(t.child(e),r)})),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,se.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(J.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Nt,(function(e,n){t.push(new bt(e,n))})):this.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new bt(e,n.value))})),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new se(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(a.assert(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t(e.child(n),o,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(e.child(".priority"),i)),r}(J.Empty,this.writeTree_,t)},t.Empty=new t(new se(null)),t}(),Ie=function(){function t(){this.visibleWrites_=Ee.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Ce(t,this)},t.prototype.addOverwrite=function(t,e,n,r){a.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){a.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));a.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&s>=0;){var u=this.allWrites_[s];u.visible&&(s>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(o=!0)),s--}return!!i&&(o?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):L(r.children,(function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))})),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(J.Empty)?t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))}),e).apply(n||Vt.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(J.Empty)?a.apply(n||Vt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=Vt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Nt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Nt,(function(t,e){var r=i.childCompoundWrite(new J(t)).apply(e);n=n.updateImmediateChild(t,r)})),i.getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){a.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(J.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,J.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Ee.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,u=void 0;if(o.snap)n.contains(s)?(u=J.relativePath(n,s),r=r.addWrite(u,o.snap)):s.contains(n)&&(u=J.relativePath(s,n),r=r.addWrite(J.Empty,o.snap.getChild(u)));else{if(!o.children)throw a.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))u=J.relativePath(n,s),r=r.addWrites(u,o.children);else if(s.contains(n))if((u=J.relativePath(s,n)).isEmpty())r=r.addWrites(J.Empty,o.children);else{var c=a.safeGet(o.children,u.getFront());if(c){var h=c.getChild(u.popFront());r=r.addWrite(J.Empty,h)}}}}}return r},t}(),Ce=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),Te=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=se.Empty,this.pendingWriteTree_=new Ie,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ue(ie.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=se.fromObject(e);return this.applyOperationToSyncPoints_(new ce(ie.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=se.Empty;return null!=n.snap?r=r.set(J.Empty,!0):L(n.children,(function(t,e){r=r.set(new J(t),e)})),this.applyOperationToSyncPoints_(new oe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ue(ie.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=se.fromObject(e);return this.applyOperationToSyncPoints_(new ce(ie.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new ae(ie.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=J.relativePath(s,e),c=new ue(ie.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=J.relativePath(s,e),c=se.fromObject(n),h=new ce(ie.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,h)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=J.relativePath(o,e),u=new ae(ie.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=J.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()}));var s,u=this.syncPointTree_.get(r);u?(o=o||u.hasCompleteView(),i=i||u.getCompleteServerCache(J.Empty)):(u=new be,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?s=!0:(s=!1,i=Vt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(J.Empty);n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var h=t.makeQueryKey_(e);a.assert(!this.queryToTagMap.has(h),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(h,l),this.tagToQueryMap.set(l,h)}var f=this.pendingWriteTree_.childWrites(r),p=u.addEventRegistration(e,n,f,i,s);if(!c&&!o){var d=u.viewForQuery(e);p=p.concat(this.setupListener_(e,d))}return p},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var h=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),l=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(h&&!l){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var p=this.collectDistinctViewsForSubTree_(f),d=0;d<p.length;++d){var v=p[d],y=v.getQuery(),m=this.createListenerForView_(v);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),m.hashFn,m.onComplete)}}!l&&c.length>0&&!r&&(h?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=J.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),L(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),o=this.createListenerForView_(n),s=this.listenProvider_.startListening(t.queryForListening_(e),i,o.hashFn,o.onComplete),u=this.syncPointTree_.subtree(r);if(i)a.assert(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),L(n,(function(t,e){r=r.concat(e)})),r})),h=0;h<c.length;++h){var l=c[h];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return s},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Vt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return a.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new J(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);a.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(J.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(J.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(J.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(J.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(J.Empty));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Se=function(){function t(){this.rootNode_=Vt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),Ae=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(E("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';S(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Ne=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),a.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return a.deepCopy(this.counters_)},t}(),ke=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Ne),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),xe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=s.__assign({},t);return this.last_&&L(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Re=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new xe(t);var n=1e4+2e4*Math.random();Y(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;L(e,(function(e,i){i>0&&a.contains(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),Y(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Oe=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new De(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.equals(t)}))},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_((function(e){return e.contains(t)||t.contains(e)}))},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),De=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();w&&E("event: "+e.toString()),K(n)}}},t.prototype.getPath=function(){return this.path_},t}(),Pe=function(){function t(t){this.allowedEvents_=t,this.listeners_={},a.assert(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=s.__spread(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){a.assert(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Le=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return s.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return a.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Pe),Me=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||a.isMobileCordova()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return s.__extends(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return a.assert("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Pe),Fe=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&K((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ue=function(){function t(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=I(t),this.stats_=ke.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Fe(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(a.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new je((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=s.__read(t,5),i=r[0],o=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=s.__read(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(a.isNodeSdk()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=a.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=a.base64Encode(e),r=P(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!a.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=a.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),je=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,a.isNodeSdk())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){E("frame writing exception"),u.stack&&E(u.stack),E(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||E("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;a.isNodeSdk()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){E("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Ve="",qe=null;"undefined"!=typeof MozWebSocket?qe=MozWebSocket:"undefined"!=typeof WebSocket&&(qe=WebSocket);var He=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=I(this.connId),this.stats_=ke.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!a.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,p.set("previous_websocket_failure",!0);try{if(a.isNodeSdk()){var r={headers:{"User-Agent":"Firebase/5/"+Ve+"/"+process.platform+"/"+(a.CONSTANTS.NODE_ADMIN?"AdminNode":"Node")}},i=process.env,o=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new qe(this.connURL,[],r)}else this.mySock=new qe(this.connURL)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==qe&&!t.forceDisallow_},t.previouslyFailed=function(){return p.isInMemoryStorage||!0===p.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){p.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=a.jsonEval(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(a.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=a.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=P(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Be=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Ue,He]},enumerable:!0,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=He&&He.isAvailable(),o=i&&!He.previouslyFailed();if(e.webSocketOnly&&(i||S("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[He];else{var a=this.transports_=[];try{for(var u=s.__values(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var h=c.value;h&&h.isAvailable()&&a.push(h)}}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),We=function(){function t(t,e,n,r,i,o,s){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=I("c:"+this.id+":"),this.transportManager_=new Be(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Y((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=O("t",t),n=O("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=O("t",t),n=O("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=O("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?C("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):C("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&S("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Y((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Y((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(p.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),Ge=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ze=function(t){function e(n,r,i,o,s,u){var c=t.call(this)||this;if(c.repoInfo_=n,c.onDataUpdate_=r,c.onConnectStatus_=i,c.onServerInfoUpdate_=o,c.authTokenProvider_=s,c.authOverride_=u,c.id=e.nextPersistentConnectionId_++,c.log_=I("p:"+c.id+":"),c.interruptReasons_={},c.listens=new Map,c.outstandingPuts_=[],c.outstandingPutCount_=0,c.onDisconnectRequestQueue_=[],c.connected_=!1,c.reconnectDelay_=1e3,c.maxReconnectDelay_=3e5,c.securityDebugCallback_=null,c.lastSessionId=null,c.establishConnectionTimer_=null,c.visible_=!1,c.requestCBHash_={},c.requestNumber_=0,c.realtime_=null,c.authToken_=null,c.forceTokenRefresh_=!1,c.invalidAuthTokenCount_=0,c.firstConnection_=!0,c.lastConnectionAttemptTime_=null,c.lastConnectionEstablishedTime_=null,u&&!a.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return c.scheduleConnect_(0),Le.getInstance().on("visible",c.onVisible_,c),-1===n.host.indexOf("fblocal")&&Me.getInstance().on("online",c.onOnline_,c),c}return s.__extends(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r,a:t,b:e};this.log_(a.stringify(i)),a.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),a.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),a.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&a.contains(t,"w")){var n=a.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();S("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||a.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=a.isValidFormat(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),a.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+a.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):C("Unrecognized action received from server: "+a.stringify(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;a.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this,s=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,r())};this.realtime_={close:h,sendRequest:function(t){a.assert(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}};var l=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(l).then((function(e){u?E("getToken() completed but was canceled"):(E("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,c=new We(i,o.repoInfo_,t,n,r,(function(t){S(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")}),s))})).then(null,(function(t){o.log_("Failed to get token: "+t),u||(a.CONSTANTS.NODE_ADMIN&&S(t),h())}))}},e.prototype.interrupt=function(t){E("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){E("Resuming connection for reason: "+t),delete this.interruptReasons_[t],a.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return D(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new J(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){E("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=s.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,s.__values(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},e.prototype.sendConnectStats_=function(){var t={},e="js";a.CONSTANTS.NODE_ADMIN?e="admin_node":a.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+Ve.replace(/\./g,"-")]=1,a.isMobileCordova()?t["framework.cordova"]=1:a.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Me.getInstance().currentlyOnline();return a.isEmpty(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(Ge),Qe=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=I("p:rest:"),i.listens_={},i}return s.__extends(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(a.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var h=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",h,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(s,n,!1,r),a.safeGet(o.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var o=i&&i.accessToken;o&&(e.auth=o);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+a.querystring(e);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=a.jsonEval(u.responseText)}catch(e){S("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&S("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()}))},e}(Ge),$e=function(){function t(t,e,n,r){var i=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Oe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new te,this.persistentConnection_=null;var o=new Ae(n,r);if(this.stats_=ke.getCollection(t),e||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Qe(this.repoInfo_,this.onDataUpdate_.bind(this),o),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var s=n.options.databaseAuthVariableOverride;if(null!=s){if("object"!=typeof s)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{a.stringify(s)}catch(u){throw new Error("Invalid authOverride provided: "+u)}}this.persistentConnection_=new ze(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),o,s),this.server_=this.persistentConnection_}o.addTokenChangeListener((function(t){i.server_.refreshAuthToken(t)})),this.statsReporter_=ke.getOrCreateReporter(t,(function(){return new Re(i.stats_,i.server_)})),this.transactionsInit_(),this.infoData_=new Se,this.infoSyncTree_=new Te({startListening:function(t,e,n,r){var o=[],s=i.infoData_.getNode(t.path);return s.isEmpty()||(o=i.infoSyncTree_.applyServerOverwrite(t.path,s),setTimeout((function(){r("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Te({startListening:function(t,e,n,r){return i.server_.listen(t,n,e,(function(e,n){var o=r(e,n);i.eventQueue_.raiseEventsForChangedPath(t.path,o)})),[]},stopListening:function(t,e){i.server_.unlisten(t,e)}})}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new J(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new J(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=a.map(e,(function(t){return Ht(t)}));o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var u=Ht(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=a.map(e,(function(t){return Ht(t)}));o=this.serverSyncTree_.applyServerMerge(i,c)}else{var h=Ht(e);o=this.serverSyncTree_.applyServerOverwrite(i,h)}var l=i;o.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;L(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new J("/.info/"+t),r=Ht(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Ht(e,n),a=ne(s,o),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(t,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||S("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(L(e,(function(t,e){i=!1;var n=Ht(e);s[t]=ne(n,o)})),i)E("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||S("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)})),L(e,(function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)})),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=function(t,e){var n=new te;return t.forEachTree(new J(""),(function(t,r){n.remember(t,ne(r,e))})),n}(this.onDisconnect_,e),r=[];n.forEachTree(J.Empty,(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new te,this.eventQueue_.raiseEventsForChangedPath(J.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Ht(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Ht(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(a.isEmpty(e))return E("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&L(e,(function(e,n){var i=Ht(n);r.onDisconnect_.remember(t.child(e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new xe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);L(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),E.apply(void 0,s.__spread([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&K((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new on(this))},enumerable:!0,configurable:!0}),t}(),Ke=function(){function t(e){this.indexedFilter_=new pe(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new bt(e,n))||(n=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Vt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Vt.EMPTY_NODE);var i=this;return e.forEachChild(Nt,(function(t,e){i.matches(new bt(t,e))||(r=r.updateImmediateChild(t,Vt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Ye=function(){function t(t){this.rangedFilter_=new Ke(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new bt(e,n))||(n=Vt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Vt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Vt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)s=i.getNext(),!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,Vt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var u=t;a.assert(u.numChildren()===this.limit_,"");var c=new bt(e,n),h=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),p=r.getChildAfterChild(this.index_,h,this.reverse_);null!=p&&(p.name===e||u.hasChild(p.name));)p=r.getChildAfterChild(this.index_,p,this.reverse_);var d=null==p?1:o(p,c);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(fe.childChangedChange(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(fe.childRemovedChange(e,f));var v=u.updateImmediateChild(e,Vt.EMPTY_NODE);return null!=p&&this.rangedFilter_.matches(p)?(null!=i&&i.trackChildChange(fe.childAddedChange(p.name,p.node)),v.updateImmediateChild(p.name,p.node)):v}return n.isEmpty()?t:l&&o(h,c)>=0?(null!=i&&(i.trackChildChange(fe.childRemovedChange(h.name,h.node)),i.trackChildChange(fe.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(h.name,Vt.EMPTY_NODE)):t},t}(),Je=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return a.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:N},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return a.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:k},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return a.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Nt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Nt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new pe(this.getIndex()):this.hasLimit()?new Ye(this):new Ke(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===Nt?e=n.PRIORITY_INDEX:this.index_===zt?e=n.VALUE_INDEX:this.index_===Ct?e=n.KEY_INDEX:(a.assert(this.index_ instanceof Qt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=a.stringify(e),this.startSet_&&(r[n.START_AT]=a.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+a.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=a.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+a.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),Xe=function(t){function e(e,n){if(!(e instanceof $e))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,Je.DEFAULT,!1)||this}return s.__extends(e,t),e.prototype.getKey=function(){return a.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return a.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof J||(null===this.path.getFront()?dt("Reference.child",1,t,!1):pt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){a.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){a.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){a.validateArgCount("Reference.set",1,2,arguments.length),vt("Reference.set",this.path),at("Reference.set",1,t,this.path,!1),a.validateCallback("Reference.set",2,e,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(a.validateArgCount("Reference.update",1,2,arguments.length),vt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,S("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ct("Reference.update",1,t,this.path,!1),a.validateCallback("Reference.update",2,e,!0);var i=new a.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(a.validateArgCount("Reference.setWithPriority",2,3,arguments.length),vt("Reference.setWithPriority",this.path),at("Reference.setWithPriority",1,t,this.path,!1),ht("Reference.setWithPriority",2,e,!1),a.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new a.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return a.validateArgCount("Reference.remove",0,1,arguments.length),vt("Reference.remove",this.path),a.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(a.validateArgCount("Reference.transaction",1,3,arguments.length),vt("Reference.transaction",this.path),a.validateCallback("Reference.transaction",1,t,!1),a.validateCallback("Reference.transaction",2,e,!0),mt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new a.Deferred;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new wt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){a.validateArgCount("Reference.setPriority",1,2,arguments.length),vt("Reference.setPriority",this.path),ht("Reference.setPriority",1,t,!1),a.validateCallback("Reference.setPriority",2,e,!0);var n=new a.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){a.validateArgCount("Reference.push",0,2,arguments.length),vt("Reference.push",this.path),at("Reference.push",1,t,this.path,!0),a.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=_t(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then((function(){return s})):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),o},e.prototype.onDisconnect=function(){return vt("Reference.onDisconnect",this.path),new gt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),e}(Zt);Zt.__referenceConstructor=Xe,be.__referenceConstructor=Xe;var Ze=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),tn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Ze),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof J?e:new J(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,a.safeGet(r.node_.children,i)||new Ze),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){a.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;L(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new J(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=a.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),en=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});$e.MAX_TRANSACTION_RETRIES_=25,$e.prototype.transactionsInit_=function(){this.transactionQueueTree_=new tn},$e.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},o=new Xe(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:y(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var h=new $t(s.currentInputSnapshot,new Xe(this,s.path),Nt);s.onComplete(null,!1,h)}}else{ut("transaction failed: Data returned ",c,s.path),s.status=en.RUN;var l=this.transactionQueueTree_.subTree(t),f=l.getValue()||[];f.push(s),l.setValue(f);var p=void 0;"object"==typeof c&&null!==c&&a.contains(c,".priority")?(p=a.safeGet(c,".priority"),a.assert(st(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(this.serverSyncTree_.calcCompleteEventCache(t)||Vt.EMPTY_NODE).getPriority().val(),p=p;var d=this.generateServerValues(),v=Ht(c,p),m=ne(v,d);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=m,s.currentWriteId=this.getNextWriteId_();var g=this.serverSyncTree_.applyUserOverwrite(t,m,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,g),this.sendReadyTransactions_()}},$e.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Vt.EMPTY_NODE},$e.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);a.assert(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===en.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},$e.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),o=i,s=i.hash(),u=0;u<e.length;u++){var c=e[u];a.assert(c.status===en.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=en.SENT,c.retryCount++;var h=J.relativePath(t,c.path);o=o.updateChild(h,c.currentOutputSnapshotRaw)}var l=o.val(!0),f=t;this.server_.put(f.toString(),l,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=en.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new Xe(n,e[s].path),c=new $t(a,u,Nt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)K(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===en.SENT_NEEDS_ABORT?en.NEEDS_ABORT:en.RUN;else for(S("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=en.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),s)},$e.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},$e.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===en.RUN})).map((function(t){return t.currentWriteId})),o=0;o<t.length;o++){var s=t[o],u=J.relativePath(e,s.path),c=!1,h=void 0;if(a.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===en.NEEDS_ABORT)c=!0,h=s.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===en.RUN)if(s.retryCount>=$e.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var l=this.getLatestState_(s.path,i);s.currentInputSnapshot=l;var f=t[o].update(l.val());if(void 0!==f){ut("transaction failed: Data returned ",f,s.path);var p=Ht(f);"object"==typeof f&&null!=f&&a.contains(f,".priority")||(p=p.updatePriority(l.getPriority()));var d=s.currentWriteId,v=this.generateServerValues(),y=ne(p,v);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(d),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(s.path,y,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[o].status=en.COMPLETED,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete))if("nodata"===h){var m=new Xe(this,t[o].path),g=new $t(t[o].currentInputSnapshot,m,Nt);n.push(t[o].onComplete.bind(null,null,!1,g))}else n.push(t[o].onComplete.bind(null,new Error(h),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),o=0;o<n.length;o++)K(n[o]);this.sendReadyTransactions_()}},$e.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},$e.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},$e.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},$e.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==en.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},$e.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},$e.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)e[o].status===en.SENT_NEEDS_ABORT||(e[o].status===en.SENT?(a.assert(i===o-1,"All SENT items should be at beginning of queue."),i=o,e[o].status=en.SENT_NEEDS_ABORT,e[o].abortReason="set"):(a.assert(e[o].status===en.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),o=0;o<n.length;o++)K(n[o])}};var nn,rn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return nn||(nn=new t),nn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var i=s.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,s.__values(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(l){t={error:l}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var i=s.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,s.__values(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(l){t={error:l}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},t.prototype.databaseFromApp=function(t,e,n){var r=n||t.options.databaseURL;void 0===r&&T("Can't determine Firebase Database URL.  Be sure to include databaseURL option when calling firebase.initializeApp().");var i=tt(r),o=i.repoInfo,s=void 0;return"undefined"!=typeof process&&(s=process.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(o=(i=tt(r="http://"+s+"?ns="+o.namespace)).repoInfo),yt("Invalid Firebase Database URL",1,i),i.path.isEmpty()||T("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},t.prototype.deleteRepo=function(t){var e=a.safeGet(this.repos_,t.app.name);e&&a.safeGet(e,t.repoInfo_.toURLString())===t||T("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},t.prototype.createRepo=function(t,e,n){var r=a.safeGet(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=a.safeGet(r,t.toURLString());return i&&T("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new $e(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),on=function(){function t(t){this.repo_=t,t instanceof $e||T("Don't call new Database() directly - please use firebase.database()."),this.root_=new Xe(t,J.Empty),this.INTERNAL=new sn(this)}return Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),t.prototype.ref=function(t){return this.checkDeleted_("ref"),a.validateArgCount("database.ref",0,1,arguments.length),t instanceof Xe?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),a.validateArgCount(e,1,1,arguments.length);var n=tt(t);yt(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&T(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repo_&&T("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){a.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){a.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"}},t}(),sn=function(){function t(t){this.database=t}return t.prototype.delete=function(){return s.__awaiter(this,void 0,void 0,(function(){return s.__generator(this,(function(t){return this.database.checkDeleted_("delete"),rn.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]}))}))},t}(),an=Object.freeze({__proto__:null,forceLongPolling:function(){He.forceDisallow(),Ue.forceAllow()},forceWebSockets:function(){Ue.forceDisallow()},isWebSocketsAvailable:function(){return He.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),un=ze;ze.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},ze.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var cn=Object.freeze({__proto__:null,DataConnection:un,RealTimeConnection:We,hijackHash:function(t){var e=ze.prototype.put;return ze.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){ze.prototype.put=e}},ConnectionTarget:Z,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){rn.getInstance().forceRestClient(t)}}),hn=on.ServerValue;function ln(e){Ve=e.SDK_VERSION;var n=e.INTERNAL.registerComponent(new c.Component("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return rn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Xe,Query:Zt,Database:on,DataSnapshot:$t,enableLogging:b,INTERNAL:an,ServerValue:hn,TEST_ACCESS:cn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.5.24"),a.isNodeSdk()&&(t.exports=n)}ln(o),e.DataSnapshot=$t,e.Database=on,e.OnDisconnect=gt,e.Query=Zt,e.Reference=Xe,e.ServerValue=hn,e.enableLogging=b,e.registerDatabase=ln},"S+S0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("zVF4"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(h){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(h){}}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=a,e.Provider=s},Wcq6:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.12.0","app"),t.exports=i},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return s})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return h})),n.d(e,"__generator",(function(){return l})),n.d(e,"__exportStar",(function(){return f})),n.d(e,"__values",(function(){return p})),n.d(e,"__read",(function(){return d})),n.d(e,"__spread",(function(){return v})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__await",(function(){return m})),n.d(e,"__asyncGenerator",(function(){return g})),n.d(e,"__asyncDelegator",(function(){return w})),n.d(e,"__asyncValues",(function(){return _})),n.d(e,"__makeTemplateObject",(function(){return b})),n.d(e,"__importStar",(function(){return E})),n.d(e,"__importDefault",(function(){return I})),n.d(e,"__classPrivateFieldGet",(function(){return C})),n.d(e,"__classPrivateFieldSet",(function(){return T}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function g(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof m?Promise.resolve(n.value.v).then(u,c):h(o[0][2],n)}catch(r){h(o[0][3],r)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function b(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function I(t){return t&&t.__esModule?t:{default:t}}function C(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function T(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,"LogLevel",(function(){return s})),n.d(e,"Logger",(function(){return l})),n.d(e,"setLogLevel",(function(){return f})),n.d(e,"setUserLogHandler",(function(){return p}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){var e="string"==typeof t?a[t]:t;o.forEach((function(t){t.logLevel=e}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n("mrSG"),s=n("zVF4"),a=n("S+S0"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new s.ErrorFactory("app","Firebase",c),l=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),f=new u.Logger("@firebase/app"),p=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",(function(){return u}),"PUBLIC"));try{for(var c=o.__values(this.firebase_.INTERNAL.components.values()),h=c.next();!h.done;h=c.next())this._addComponent(h.value)}catch(l){r={error:l}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var d=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if(s.contains(e,a))throw h.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=l[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(u.join(" "))}c(new a.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.12.0",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!s.contains(e,t=t||"[DEFAULT]"))throw h.create("no-app",{appName:t});return e[t]}function c(a){var u,c,l=a.name;if(n.has(l))return f.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===a.type?r[l]:null;if(n.set(l,a),"PUBLIC"===a.type){var p=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[l])throw h.create("invalid-app-argument",{appName:l});return t[l]()};void 0!==a.serviceProps&&s.deepExtend(p,a.serviceProps),r[l]=p,t.prototype[l]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,l);return n.apply(this,a.multipleInstances?t:[])}}try{for(var d=o.__values(Object.keys(e)),v=d.next();!v.done;v=d.next())e[v.value]._addComponent(a)}catch(y){u={error:y}}finally{try{v&&!v.done&&(c=d.return)&&c.call(d)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[l]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){s.deepExtend(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(s.isBrowser()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=d.initializeApp;d.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.isNode()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),m.apply(void 0,t)};var g=d;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.0",void 0),t.registerVersion("fire-js","")}(g),e.default=g,e.firebase=g},x7I3:function(t,e,n){"use strict";n.r(e),n.d(e,"ErrorCode",(function(){return ar})),n.d(e,"EventType",(function(){return ur})),n.d(e,"WebChannel",(function(){return cr})),n.d(e,"XhrIo",(function(){return hr})),n.d(e,"createWebChannelTransport",(function(){return sr}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o=o||{},s=i;function a(t){return"string"==typeof t}function u(t){return"number"==typeof t}function c(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function h(){}function l(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function f(t){return"array"==l(t)}function p(t){var e=l(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:g).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var b=Date.now||function(){return+new Date};function E(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function I(){this.j=this.j,this.i=this.i}I.prototype.j=!1,I.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[v]||(this[v]=++y))},I.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var C=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=a(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function S(t){return Array.prototype.concat.apply([],arguments)}function A(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function N(t){return/^[\s\xa0]*$/.test(t)}var k,x=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function R(t,e){return-1!=t.indexOf(e)}function O(t,e){return t<e?-1:t>e?1:0}t:{var D=s.navigator;if(D){var P=D.userAgent;if(P){k=P;break t}}k=""}function L(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function M(t){var e,n={};for(e in t)n[e]=t[e];return n}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function j(t){return j[" "](t),t}j[" "]=h;var V,q,H=R(k,"Opera"),B=R(k,"Trident")||R(k,"MSIE"),W=R(k,"Edge"),G=W||B,z=R(k,"Gecko")&&!(R(k.toLowerCase(),"webkit")&&!R(k,"Edge"))&&!(R(k,"Trident")||R(k,"MSIE"))&&!R(k,"Edge"),Q=R(k.toLowerCase(),"webkit")&&!R(k,"Edge");function $(){var t=s.document;return t?t.documentMode:void 0}t:{var K="",Y=(q=k,z?/rv:([^\);]+)(\)|;)/.exec(q):W?/Edge\/([\d\.]+)/.exec(q):B?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(q):Q?/WebKit\/(\S+)/.exec(q):H?/(?:Version)[ \/]?(\S+)/.exec(q):void 0);if(Y&&(K=Y?Y[1]:""),B){var J=$();if(null!=J&&J>parseFloat(K)){V=String(J);break t}}V=K}var X,Z={};function tt(t){return function(t,e){var n=Z;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=x(String(V)).split("."),r=x(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=O(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||O(0==s[2].length,0==a[2].length)||O(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var et=s.document;X=et&&B?$()||("CSS1Compat"==et.compatMode?parseInt(V,10):5):void 0;var nt=!B||9<=Number(X),rt=B&&!tt("9"),it=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(n){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function st(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(z){t:{try{j(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:at[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.Ia=!1},E(st,ot);var at={2:"touch",3:"pen",4:"mouse"};st.prototype.b=function(){st.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ut="closure_listenable_"+(1e6*Math.random()|0),ct=0;function ht(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++ct,this.X=this.Z=!1}function lt(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function ft(t){this.src=t,this.a={},this.b=0}function pt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=C(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(lt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}ft.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=dt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ht(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var vt="closure_lm_"+(1e6*Math.random()|0),yt={};function mt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(f(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=Ct(r),e&&e[ut]?e.Aa(n,r,d(i)?!!i.capture:!!i,o):gt(e,n,r,!0,i,o)}(t,e,n,r,i);if(f(e)){for(var o=0;o<e.length;o++)mt(t,e[o],n,r,i);return null}return n=Ct(n),t&&t[ut]?t.za(e,n,d(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i;if(s&&!nt)return null;var a=Et(t);if(a||(t[vt]=a=new ft(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=bt,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_t(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function wt(t){if(!u(t)&&t&&!t.X){var e=t.src;if(e&&e[ut])pt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_t(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Et(e))?(pt(n,t),0==n.b&&(n.src=null,e[vt]=null)):lt(t)}}}function _t(t){return t in yt?yt[t]:yt[t]="on"+t}function bt(t,e){return!!t.X||function(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&wt(t),n.call(r,e)}(t,nt?new st(e,this):e=new st(e||c("window.event"),this))}function Et(t){return(t=t[vt])instanceof ft?t:null}var It="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ct(t){return"function"==l(t)?t:(t[It]||(t[It]=function(e){return t.handleEvent(e)}),t[It])}function Tt(){I.call(this),this.c=new ft(this),this.J=this,this.B=null}function St(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&pt(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ia}E(Tt,I),Tt.prototype[ut]=!0,(r=Tt.prototype).addEventListener=function(t,e,n,r){mt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(f(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=d(i)?!!i.capture:!!i,r=Ct(r),e&&e[ut]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=dt(s=e.a[n],r,i,o))&&(lt(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=Et(e))&&(n=e.a[n.toString()],e=-1,n&&(e=dt(n,r,i,o)),(r=-1<e?n[e]:null)&&wt(r))}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(a(t))t=new ot(t,n);else if(t instanceof ot)t.target=t.target||n;else{var i=t;U(t=new ot(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=St(s,r,!0,t)&&i}if(i=St(s=t.a=n,r,!0,t)&&i,i=St(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=St(s=t.a=e[o],r,!1,t)&&i;return i},r.G=function(){if(Tt.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)lt(n[r]);delete e.a[t],e.b--}}this.B=null},r.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var At=s.JSON.stringify;function Nt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function kt(){this.b=this.a=null}Nt.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var xt,Rt=new Nt((function(){return new Dt}),(function(t){t.reset()}));function Ot(){var t=Ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Dt(){this.next=this.b=this.a=null}function Pt(t){s.setTimeout((function(){throw t}),0)}function Lt(t,e){xt||function(){var t=s.Promise.resolve(void 0);xt=function(){t.then(Ut)}}(),Mt||(xt(),Mt=!0),Ft.add(t,e)}kt.prototype.add=function(t,e){var n=Rt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Dt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Dt.prototype.reset=function(){this.next=this.b=this.a=null};var Mt=!1,Ft=new kt;function Ut(){for(var t;t=Ot();){try{t.a.call(t.b)}catch(n){Pt(n)}var e=Rt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Mt=!1}function jt(t,e){Tt.call(this),this.b=t||1,this.a=e||s,this.f=w(this.gb,this),this.g=b()}function Vt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function qt(t,e,n){if("function"==l(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Ht(t,e,n){I.call(this),this.f=null!=n?w(t,n):t,this.c=e,this.b=w(this.$a,this),this.a=[]}function Bt(t){t.U=qt(t.b,t.c),t.f.apply(null,t.a)}function Wt(t){I.call(this),this.b=t,this.a={}}E(jt,Tt),(r=jt.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var t=b()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Vt(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=b())},r.G=function(){jt.N.G.call(this),Vt(this),delete this.a},E(Ht,I),(r=Ht.prototype).ea=!1,r.U=null,r.Ta=function(t){this.a=arguments,this.U?this.ea=!0:Bt(this)},r.G=function(){Ht.N.G.call(this),this.U&&(s.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.$a=function(){this.U=null,this.ea&&(this.ea=!1,Bt(this))},E(Wt,I);var Gt=[];function zt(t,e,n,r){f(n)||(n&&(Gt[0]=n.toString()),n=Gt);for(var i=0;i<n.length;i++){var o=mt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Qt(t){L(t.a,(function(t,e){this.a.hasOwnProperty(e)&&wt(t)}),t),t.a={}}function $t(){}Wt.prototype.G=function(){Wt.N.G.call(this),Qt(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=new Tt;function Yt(t){ot.call(this,"serverreachability",t)}function Jt(t){Kt.dispatchEvent(new Yt(Kt,t))}function Xt(t){ot.call(this,"statevent",t)}function Zt(t){Kt.dispatchEvent(new Xt(Kt,t))}function te(t){ot.call(this,"timingevent",t)}function ee(t,e){if("function"!=l(t))throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){t()}),e)}E(Yt,ot),E(Xt,ot),E(te,ot);var ne={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},re={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function ie(){}function oe(){}ie.prototype.a=null;var se,ae={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function ue(){ot.call(this,"d")}function ce(){ot.call(this,"c")}function he(){}function le(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Wt(this),this.O=fe,this.P=new jt(t=G?125:void 0),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}E(ue,ot),E(ce,ot),E(he,ie),se=new he;var fe=45e3,pe={},de={};function ve(t,e,n){t.F=1,t.f=Ve(De(e)),t.l=n,t.H=!0,me(t,null)}function ye(t,e,n,r){t.F=1,t.f=Ve(De(e)),t.l=null,t.H=n,me(t,r)}function me(t,e){t.v=b(),_e(t),t.D=De(t.f),je(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Ht(w(t.Ja,t,t.a),t.J)),zt(t.I,t.a,"readystatechange",t.cb),e=t.h?M(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Jt(1)}function ge(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=we(t,n);if(i==de){4==e&&(t.c=4,Zt(14),r=!1);break}if(i==pe){t.c=4,Zt(15),r=!1;break}Te(t,i)}4==e&&0==n.length&&(t.c=1,Zt(16),r=!1),t.b=t.b&&r,r||(Ce(t),Ie(t))}function we(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?de:(n=Number(e.substring(n,r)),isNaN(n)?pe:(r+=1)+n>e.length?de:(e=e.substr(r,n),t.A=r+n,e))}function _e(t){t.R=b()+t.O,be(t,t.O)}function be(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=ee(w(t.ab,t),e)}function Ee(t){t.i&&(s.clearTimeout(t.i),t.i=null)}function Ie(t){t.g.Ca()||t.m||t.g.na(t)}function Ce(t){Ee(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,Vt(t.P),Qt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Te(t,e){try{t.g.Fa(t,e),Jt(4)}catch(n){}}function Se(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||a(t))T(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(p(t)||a(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(a(t))return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ae(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ae)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ne(t,e){xe(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&ke(t))}function ke(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];xe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)xe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function xe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=le.prototype).setTimeout=function(t){this.O=t},r.cb=function(t){t=t.target;var e=this.B;e&&3==Dn(t)?e.Ta():this.Ja(t)},r.Ja=function(t){try{if(t==this.a)t:{var e=Dn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||3==e&&!G&&!this.a.aa())){this.m||4!=e||7==n||Jt(8==n||0>=r?3:2),Ee(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var s=Pn(this.a,"X-HTTP-Initial-Response");if(s&&!N(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.c=3,Zt(12),Ce(this),Ie(this);break t}this.s=!0,Te(this,a)}this.H?(ge(this,e,o),G&&this.b&&3==e&&(zt(this.I,this.P,"tick",this.bb),this.P.start())):Te(this,o),4==e&&Ce(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,_e(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Zt(12)):(this.c=0,Zt(13)),Ce(this),Ie(this)}}}catch(u){}},r.bb=function(){if(this.a){var t=Dn(this.a),e=this.a.aa();this.A<e.length&&(Ee(this),ge(this,t,e),this.b&&4!=t&&_e(this))}},r.cancel=function(){this.m=!0,Ce(this)},r.ab=function(){this.i=null;var t=b();0<=t-this.R?(2!=this.F&&(Jt(3),Zt(17)),Ce(this),this.c=2,Ie(this)):be(this,this.R-t)},(r=Ae.prototype).C=function(){ke(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.K=function(){return ke(this),this.a.concat()},r.get=function(t,e){return xe(this.b,t)?this.b[t]:e},r.set=function(t,e){xe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Re=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Oe(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof Oe?(this.h=void 0!==e?e:t.h,Pe(this,t.f),this.j=t.j,Le(this,t.b),Me(this,t.i),this.a=t.a,Fe(this,tn(t.c)),this.g=t.g):t&&(n=String(t).match(Re))?(this.h=!!e,Pe(this,n[1]||"",!0),this.j=qe(n[2]||""),Le(this,n[3]||"",!0),Me(this,n[4]),this.a=qe(n[5]||"",!0),Fe(this,n[6]||"",!0),this.g=qe(n[7]||"")):(this.h=!!e,this.c=new Ke(null,this.h))}function De(t){return new Oe(t)}function Pe(t,e,n){t.f=n?qe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Le(t,e,n){t.b=n?qe(e,!0):e}function Me(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Fe(t,e,n){e instanceof Ke?(t.c=e,function(t,e){e&&!t.f&&(Ye(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Je(this,e),Ze(this,n,t))}),t)),t.f=e}(t.c,t.h)):(n||(e=He(e,Qe)),t.c=new Ke(e,t.h))}function Ue(t,e,n){t.c.set(e,n)}function je(t,e,n){f(n)||(n=[String(n)]),Ze(t.c,e,n)}function Ve(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^b()).toString(36)),t}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function He(t,e,n){return a(t)?(t=encodeURI(t).replace(e,Be),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Be(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Oe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(He(e,We,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(He(e,We,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(He(n,"/"==n.charAt(0)?ze:Ge,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",He(n,$e)),t.join("")},Oe.prototype.resolve=function(t){var e=De(this),n=!!t.f;n?Pe(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Le(e,t.b):n=null!=t.i;var r=t.a;if(n)Me(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(R(i,"./")||R(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Fe(e,tn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var We=/[#\/\?@]/g,Ge=/[#\?:]/g,ze=/[#\?]/g,Qe=/[#\?@]/g,$e=/#/g;function Ke(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ye(t){t.a||(t.a=new Ae,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Je(t,e){Ye(t),e=en(t,e),xe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ne(t.a,e))}function Xe(t,e){return Ye(t),e=en(t,e),xe(t.a.b,e)}function Ze(t,e,n){Je(t,e),0<n.length&&(t.c=null,t.a.set(en(t,e),A(n)),t.b+=n.length)}function tn(t){var e=new Ke;return e.c=t.c,t.a&&(e.a=new Ae(t.a),e.b=t.b),e}function en(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nn(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function rn(t){var e=t.a.F.a;if(null!=e)Zt(4),e?(Zt(10),zn(t.a,t,!1)):(Zt(11),zn(t.a,t,!0));else{t.b=new le(t,void 0,void 0),t.b.h=t.h,e=Jn(e=t.a,e.Y()?t.f:null,t.i),Zt(4),je(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Ue(e,n,r),ye(t.b,e,!1,t.f)}}function on(){this.a=this.b=null}function sn(){this.a=new Ae}function an(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[v]||(t[v]=++y)):e.charAt(0)+t}function un(t,e){this.b=t,this.a=e}function cn(t){this.g=t||hn,t=s.PerformanceNavigationTiming?0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(s.ka&&s.ka.Da&&s.ka.Da()&&s.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new sn),this.b=null,this.c=[]}(r=Ke.prototype).add=function(t,e){Ye(this),this.c=null,t=en(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.forEach=function(t,e){Ye(this),this.a.forEach((function(n,r){T(n,(function(n){t.call(e,n,r,this)}),this)}),this)},r.K=function(){Ye(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.C=function(t){Ye(this);var e=[];if(a(t))Xe(this,t)&&(e=S(e,this.a.get(en(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=S(e,t[n])}return e},r.set=function(t,e){return Ye(this),this.c=null,Xe(this,t=en(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},E((function(){}),(function(){})),(r=nn.prototype).M=null,r.$=function(t){return this.a.$(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Ca=function(){return!1},r.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Pn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Pn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(i){return(e=this.a).m=this.c,void Kn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Kn(e,2)}else 1==this.M&&(this.g?Zt(6):"11111"==e?(Zt(5),this.g=!0,(!B||10<=Number(X))&&(this.c=200,this.b.cancel(),Zt(11),zn(this.a,this,!0))):(Zt(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,rn(this)):1==this.M&&(this.g?(Zt(11),zn(this.a,this,!0)):(Zt(10),zn(this.a,this,!1)));else{0==this.M?Zt(8):1==this.M&&Zt(9);var t=this.a;t.m=this.c,Kn(t,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},sn.prototype.add=function(t){this.a.set(an(t),t)},sn.prototype.C=function(){return this.a.C()};var hn=10;function ln(t,e){!t.a&&(R(e,"spdy")||R(e,"quic")||R(e,"h2"))&&(t.f=t.g,t.a=new sn,t.b&&(vn(t,t.b),t.b=null))}function fn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function pn(t){return t.b?1:t.a?t.a.a.c:0}function dn(t,e){return t.b?t=t.b==e:t.a?(e=an(e),t=xe(t.a.a.b,e)):t=!1,t}function vn(t,e){t.a?t.a.add(e):t.b=e}function yn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=an(e),n=xe(t.a.a.b,n)),n&&Ne(t.a.a,an(e)))}function mn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return T(t.a.C(),(function(t){e=e.concat(t.j)})),e}return A(t.c)}function gn(){}function wn(){this.a=new gn}function _n(t,e,n){var r=n||"";try{Se(t,(function(t,n){var i=t;d(t)&&(i=At(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function bn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}cn.prototype.cancel=function(){this.c=mn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(T(this.a.C(),(function(t){t.cancel()})),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},gn.prototype.stringify=function(t){return s.JSON.stringify(t,void 0)},gn.prototype.parse=function(t){return s.JSON.parse(t,void 0)};var En=s.JSON.parse;function In(t){Tt.call(this),this.headers=new Ae,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Cn,this.D=this.F=!1}E(In,Tt);var Cn="",Tn=/^https?$/i,Sn=["POST","PUT"];function An(t){return"content-type"==t.toLowerCase()}function Nn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,kn(t),Rn(t)}function kn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function xn(t){if(t.b&&void 0!==o&&(!t.s[1]||4!=Dn(t)||2!=t.T()))if(t.l&&4==Dn(t))qt(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==Dn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.A).match(Re)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!Tn.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var c=2<Dn(t)?t.a.statusText:""}catch(h){c=""}t.f=c+" ["+t.T()+"]",kn(t)}}finally{Rn(t)}}}function Rn(t,e){if(t.a){On(t);var n=t.a,r=t.s[0]?h:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){}}}function On(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(s.clearTimeout(t.m),t.m=null)}function Dn(t){return t.a?t.a.readyState:0}function Pn(t,e){return t.a?t.a.getResponseHeader(e):null}function Ln(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return L(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),a(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Ue(t,e,n),t}function Mn(t){this.f=[],this.F=new on,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!c("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=c("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=c("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=c("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=c("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new cn(t&&t.concurrentRequestLimit),this.ja=new wn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Fn(t){if(Un(t),3==t.u){var e=t.P++,n=De(t.B);Ue(n,"SID",t.H),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),Hn(t,n),(e=new le(t,e,void 0)).F=2,e.f=Ve(De(n)),n=!1,s.navigator&&s.navigator.sendBeacon&&(n=s.navigator.sendBeacon(e.f.toString(),"")),!n&&s.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=b(),_e(e)}Yn(t)}function Un(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(s.clearTimeout(t.l),t.l=null),Qn(t),t.b.cancel(),t.h&&(u(t.h)&&s.clearTimeout(t.h),t.h=null)}function jn(t,e){t.f.push(new un(t.Qa++,e)),3==t.u&&Vn(t)}function Vn(t){fn(t.b)||t.h||(t.h=!0,Lt(t.Ha,t),t.A=0)}function qn(t,e){var n;n=e?e.W:t.P++;var r=De(t.B);Ue(r,"SID",t.H),Ue(r,"RID",n),Ue(r,"AID",t.O),Hn(t,r),t.g&&t.i&&Ln(r,t.g,t.i),n=new le(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=Bn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),vn(t.b,n),ve(n,r,e)}function Hn(t,e){t.c&&Se({},(function(t,n){Ue(e,n,t)}))}function Bn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?w(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{_n(h,s,"req"+c+"_")}catch(l){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function Wn(t){t.a||t.l||(t.S=1,Lt(t.Ga,t),t.v=0)}function Gn(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=ee(w(t.Ga,t),$n(t,t.v)),t.v++,0))}function zn(t,e,n){var r=e.l;r&&ln(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Jn(t,null,t.ha),Vn(t)}function Qn(t){null!=t.s&&(s.clearTimeout(t.s),t.s=null)}function $n(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function Kn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=w(t.eb,t);n||(n=new Oe("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||Pe(n,"https"),Ve(n)),function(t,e){var n=new $t;if(s.Image){var r=new Image;r.onload=_(bn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=_(bn,n,r,"TestLoadImage: error",!1,e),r.onabort=_(bn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=_(bn,n,r,"TestLoadImage: timeout",!1,e),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zt(2);t.u=0,t.c&&t.c.ta(e),Yn(t),Un(t)}function Yn(t){t.u=0,t.m=-1,t.c&&(0==mn(t.b).length&&0==t.f.length||(t.b.c.length=0,A(t.f),t.f.length=0),t.c.sa())}function Jn(t,e,n){var r=function(t){return t instanceof Oe?De(t):new Oe(t,void 0)}(n);if(""!=r.b)e&&Le(r,e+"."+r.b),Me(r,r.i);else{var i=s.location;r=function(t,e,n,r){var i=new Oe(null,void 0);return t&&Pe(i,t),e&&Le(i,e),n&&Me(i,n),r&&(i.a=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&L(t.V,(function(t,e){Ue(r,e,t)})),n=t.I,(e=t.j)&&n&&Ue(r,e,n),Ue(r,"VER",t.wa),Hn(t,r),r}function Xn(){}function Zn(){if(B&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function tr(t,e){Tt.call(this),this.a=new Mn(e),this.g=t,this.m=e&&e.fb?e.fb:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!N(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!N(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new rr(this)}function er(t){ue.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function nr(){ce.call(this),this.status=1}function rr(t){this.a=t}(r=In.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:se),this.a.onreadystatechange=w(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(o){return void Nn(this,o)}t=n||"";var i=new Ae(this.headers);r&&Se(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=An,n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:a(t)?t.charAt(e):t[e]}(i.K()),n=s.FormData&&t instanceof s.FormData,!(0<=C(Sn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{On(this),0<this.o&&((this.D=function(t){return B&&tt(9)&&u(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=w(this.Ba,this)):this.m=qt(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){Nn(this,o)}},r.Ba=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Rn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Rn(this,!0)),In.N.G.call(this)},r.Ea=function(){this.j||(this.w||this.l||this.g?xn(this):this.Za())},r.Za=function(){xn(this)},r.T=function(){try{return 2<Dn(this)?this.a.status:-1}catch(q){return-1}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(q){return""}},r.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),En(e)}},r.ya=function(){return this.h},r.Xa=function(){return a(this.f)?this.f:String(this.f)},(r=Mn.prototype).wa=8,r.u=1,r.Ca=function(){return 0==this.u},r.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new le(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?U(r=M(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&a(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Bn(this,n,e),Ue(i=De(this.B),"RID",t),Ue(i,"CVER",22),this.o&&this.j&&Ue(i,"X-HTTP-Session-Id",this.j),Hn(this,i),this.g&&r&&Ln(i,this.g,r),vn(this.b,n),this.W?(Ue(i,"$req",e),Ue(i,"SID","null"),n.S=!0,ve(n,i,null)):ve(n,i,e),this.u=2}}else 3==this.u&&(t?qn(this,t):0==this.f.length||fn(this.b)||qn(this))},r.Ga=function(){this.l=null,this.a=new le(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=De(this.pa);Ue(t,"RID","rpc"),Ue(t,"SID",this.H),Ue(t,"CI",this.ia?"0":"1"),Ue(t,"AID",this.O),Hn(this,t),Ue(t,"TYPE","xmlhttp"),this.g&&this.i&&Ln(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),ye(this.a,t,!0,this.ga)},r.Fa=function(t,e){if(0!=this.u&&(this.a==t||dn(this.b,t)))if(this.m=t.o,!t.s&&dn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(o){n=null}if(f(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Qn(this),this.a.cancel(),this.a=null}Gn(this),Zt(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ee(w(this.Ya,this),6e3));if(1>=pn(this.b)&&this.fa){try{this.fa()}catch(o){}this.fa=void 0}}else Kn(this,11)}else if((t.s||this.a==t)&&Qn(this),!N(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&u(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Pn(r,"X-Client-Wire-Protocol"))&&ln(this.b,i),this.j&&(r=Pn(r,"X-HTTP-Session-Id")))&&(this.I=r,Ue(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Jn(this,this.Y()?this.ga:null,this.ha),r.s?(yn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(Ee(r),_e(r)),this.a=r):Wn(this),0<this.f.length&&Vn(this)}else"stop"!=r[0]&&"close"!=r[0]||Kn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Kn(this,7):Fn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Gn(this),Zt(19))},r.na=function(t){var e=null;if(this.a==t){Qn(this),this.a=null;var n=2}else{if(!dn(this.b,t))return;e=t.j,yn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=b()-t.v,Kt.dispatchEvent(new te(Kt,t.l?t.l.length:0,e,this.A)),Vn(this)):Wn(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(pn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)||(t.h=ee(w(t.Ha,t,e),$n(t,t.A)),t.A++,0)))}(this,t)||2==n&&Gn(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Kn(this,5);break;case 4:Kn(this,10);break;case 3:Kn(this,6);break;default:Kn(this,2)}}},r.eb=function(t){Zt(t?2:1)},r.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new In(this.Ka)).F=this.R,t},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=Xn.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Sa=function(){},Zn.prototype.a=function(t,e){return new tr(t,e)},E(tr,Tt),(r=tr.prototype).addEventListener=function(t,e,n,r){tr.N.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){tr.N.removeEventListener.call(this,t,e,n,r)},r.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Zt(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new nn(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Ln(e,t.g,t.i)),(t=t.w).i=n,e=Jn(t.a,null,t.i),Zt(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,rn(t)):(je(e,"MODE","init"),!t.a.o&&t.a.j&&je(e,"X-HTTP-Session-Id",t.a.j),t.b=new le(t,void 0,void 0),t.b.h=t.h,ye(t.b,e,!1,null),t.M=0)},r.close=function(){Fn(this.a)},r.Wa=function(t){if(a(t)){var e={};e.__data__=t,jn(this.a,e)}else this.h?((e={}).__data__=At(t),jn(this.a,e)):jn(this.a,t)},r.G=function(){this.a.c=null,delete this.f,Fn(this.a),delete this.a,tr.N.G.call(this)},E(er,ue),E(nr,ce),E(rr,Xn),rr.prototype.va=function(){this.a.dispatchEvent("a")},rr.prototype.ua=function(t){this.a.dispatchEvent(new er(t))},rr.prototype.ta=function(t){this.a.dispatchEvent(new nr(t))},rr.prototype.sa=function(){this.a.dispatchEvent("b")};var ir=_((function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r}),Zn);Zn.prototype.createWebChannel=Zn.prototype.a,tr.prototype.send=tr.prototype.Wa,tr.prototype.open=tr.prototype.Va,tr.prototype.close=tr.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE="complete",oe.EventType=ae,ae.OPEN="a",ae.CLOSE="b",ae.ERROR="c",ae.MESSAGE="d",Tt.prototype.listen=Tt.prototype.za,In.prototype.listenOnce=In.prototype.Aa,In.prototype.getLastError=In.prototype.Xa,In.prototype.getLastErrorCode=In.prototype.ya,In.prototype.getStatus=In.prototype.T,In.prototype.getResponseJson=In.prototype.Ua,In.prototype.getResponseText=In.prototype.aa,In.prototype.send=In.prototype.ca;var or={createWebChannelTransport:ir,ErrorCode:ne,EventType:re,WebChannel:oe,XhrIo:In},sr=or.createWebChannelTransport,ar=or.ErrorCode,ur=or.EventType,cr=or.WebChannel,hr=or.XhrIo;e.default=or},zUnb:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.r(e);let i=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else i&&console.log("RxJS: Back to a better error behavior. Thank you. <3");i=t},get useDeprecatedSynchronousErrorHandling(){return i}};function s(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(o.useDeprecatedSynchronousErrorHandling)throw t;s(t)},complete(){}},u=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const h=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let l=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:i,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(r(i))try{i.call(this)}catch(s){e=s instanceof h?f(s.errors):[s]}if(u(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(c(n))try{n.unsubscribe()}catch(s){e=e||[],s instanceof h?e=e.concat(f(s.errors)):e.push(s)}}}if(e)throw new h(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function f(t){return t.reduce((t,e)=>t.concat(e instanceof h?e.errors:e),[])}const p=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class d extends l{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof d?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new v(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new v(this,t,e,n)}}[p](){return this}static create(t,e,n){const r=new d(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class v extends d{constructor(t,e,n,i){let o;super(),this._parentSubscriber=t;let s=this;r(e)?o=e:e&&(o=e.next,n=e.error,i=e.complete,e!==a&&(s=Object.create(e),r(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=o,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=o;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):s(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;s(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw n;s(n)}}__tryOrSetError(t,e,n){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return o.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(s(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const y=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function m(){}function g(...t){return w(t)}function w(t){return t?1===t.length?t[0]:function(e){return t.reduce((t,e)=>e(t),e)}:m}let _=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:r}=this,i=function(t,e,n){if(t){if(t instanceof d)return t;if(t[p])return t[p]()}return t||e||n?new d(t,e,n):new d(a)}(t,e,n);if(i.add(r?r.call(i,this.source):this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(t){try{return this._subscribe(t)}catch(e){o.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof d?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=b(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[y](){return this}pipe(...t){return 0===t.length?this:w(t)(this)}toPromise(t){return new(t=b(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function b(t){if(t||(t=o.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const E=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class I extends l{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class C extends d{constructor(t){super(t),this.destination=t}}let T=(()=>{class t extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[p](){return new C(this)}lift(t){const e=new S(this,this);return e.operator=t,e}next(t){if(this.closed)throw new E;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new E;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new E;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new E;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new E;return this.hasError?(t.error(this.thrownError),l.EMPTY):this.isStopped?(t.complete(),l.EMPTY):(this.observers.push(t),new I(this,t))}asObservable(){const t=new _;return t.source=this,t}}return t.create=(t,e)=>new S(t,e),t})();class S extends T{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):l.EMPTY}}function A(t){return t&&"function"==typeof t.schedule}class N extends d{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}const k=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()};function x(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const R=x(),O=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function D(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const P=t=>{if(t&&"function"==typeof t[y])return r=t,t=>{const e=r[y]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(O(t))return k(t);if(D(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,s),t);if(t&&"function"==typeof t[R])return e=t,t=>{const n=e[R]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected.`+" You can provide an Observable, Promise, Array, or Iterable.")}var e,n,r};function L(t,e,n,r,i=new N(t,n,r)){if(!i.closed)return e instanceof _?e.subscribe(i):P(e)(i)}class M extends d{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}function F(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new U(t,e))}}class U{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new j(t,this.project,this.thisArg))}}class j extends d{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function V(t,e){return new _(n=>{const r=new l;let i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}function q(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[y]}(t))return function(t,e){return new _(n=>{const r=new l;return r.add(e.schedule(()=>{const i=t[y]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(D(t))return function(t,e){return new _(n=>{const r=new l;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(O(t))return V(t,e);if(function(t){return t&&"function"==typeof t[R]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new _(n=>{const r=new l;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[R](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof _?t:new _(P(t))}function H(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(H((n,r)=>q(t(n,r)).pipe(F((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new B(t,n)))}class B{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new W(t,this.project,this.concurrent))}}class W extends M{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const r=new N(this,e,n),i=this.destination;i.add(r);const o=L(this,t,void 0,void 0,r);o!==r&&i.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function G(t){return t}function z(t=Number.POSITIVE_INFINITY){return H(G,t)}function Q(t,e){return e?V(t,e):new _(k(t))}function $(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return A(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof _?t[0]:z(e)(Q(t,n))}function K(){return function(t){return t.lift(new Y(t))}}class Y{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new J(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class J extends d{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class X extends _{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new l,t.add(this.source.subscribe(new tt(this.getSubject(),this))),t.closed&&(this._connection=null,t=l.EMPTY)),t}refCount(){return K()(this)}}const Z=(()=>{const t=X.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class tt extends C{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function et(){return new T}function nt(){return t=>{return K()((e=et,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,Z);return r.source=t,r.subjectFactory=n,r})(t));var e}}function rt(t){return{toString:t}.toString()}function it(t,e,n){return rt(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const ot=it("Inject",t=>({token:t})),st=it("Optional"),at=it("Self"),ut=it("SkipSelf");var ct=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function ht(t){for(let e in t)if(t[e]===ht)return e;throw Error("Could not find renamed property on target object.")}function lt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function ft(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function pt(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function dt(t){return vt(t,t[mt])||vt(t,t[_t])}function vt(t,e){return e&&e.token===t?e:null}function yt(t){return t&&(t.hasOwnProperty(gt)||t.hasOwnProperty(bt))?t[gt]:null}const mt=ht({"\u0275prov":ht}),gt=ht({"\u0275inj":ht}),wt=ht({"\u0275provFallback":ht}),_t=ht({ngInjectableDef:ht}),bt=ht({ngInjectorDef:ht});function Et(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Et).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function It(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Ct=ht({__forward_ref__:ht});function Tt(t){return t.__forward_ref__=Tt,t.toString=function(){return Et(this())},t}function St(t){return"function"==typeof(e=t)&&e.hasOwnProperty(Ct)&&e.__forward_ref__===Tt?t():t;var e}const At="undefined"!=typeof globalThis&&globalThis,Nt="undefined"!=typeof window&&window,kt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,xt="undefined"!=typeof global&&global,Rt=At||xt||Nt||kt,Ot=ht({"\u0275cmp":ht}),Dt=ht({"\u0275dir":ht}),Pt=ht({"\u0275pipe":ht}),Lt=ht({"\u0275mod":ht}),Mt=ht({"\u0275loc":ht}),Ft=ht({"\u0275fac":ht}),Ut=ht({__NG_ELEMENT_ID__:ht});class jt{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ft({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Vt=new jt("INJECTOR",-1),qt={},Ht=/\n/gm,Bt=ht({provide:String,useValue:ht});let Wt,Gt=void 0;function zt(t){const e=Gt;return Gt=t,e}function Qt(t){const e=Wt;return Wt=t,e}function $t(t,e=ct.Default){if(void 0===Gt)throw new Error("inject() must be called from an injection context");return null===Gt?Yt(t,void 0,e):Gt.get(t,e&ct.Optional?null:void 0,e)}function Kt(t,e=ct.Default){return(Wt||$t)(St(t),e)}function Yt(t,e,n){const r=dt(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&ct.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${Et(t)}]`)}function Jt(t){const e=[];for(let n=0;n<t.length;n++){const r=St(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=ct.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof st||"Optional"===i.ngMetadataName||i===st?n|=ct.Optional:i instanceof ut||"SkipSelf"===i.ngMetadataName||i===ut?n|=ct.SkipSelf:i instanceof at||"Self"===i.ngMetadataName||i===at?n|=ct.Self:t=i instanceof ot||i===ot?i.token:i}e.push(Kt(t,n))}else e.push(Kt(r))}return e}class Xt{get(t,e=qt){if(e===qt){const e=new Error(`NullInjectorError: No provider for ${Et(t)}!`);throw e.name="NullInjectorError",e}return e}}class Zt{}class te{}function ee(t,e){t.forEach(t=>Array.isArray(t)?ee(t,e):e(t))}function ne(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function re(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ie(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function oe(t,e,n){let r=ae(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function se(t,e){const n=ae(t,e);if(n>=0)return t[1|n]}function ae(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const ue=function(){var t={OnPush:0,Default:1};return t[t.OnPush]="OnPush",t[t.Default]="Default",t}(),ce=function(){var t={Emulated:0,Native:1,None:2,ShadowDom:3};return t[t.Emulated]="Emulated",t[t.Native]="Native",t[t.None]="None",t[t.ShadowDom]="ShadowDom",t}(),he={},le=[];let fe=0;function pe(t){return rt(()=>{const e=t.type,n=e.prototype,r={},i={type:e,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onChanges:null,onInit:n.ngOnInit||null,doCheck:n.ngDoCheck||null,afterContentInit:n.ngAfterContentInit||null,afterContentChecked:n.ngAfterContentChecked||null,afterViewInit:n.ngAfterViewInit||null,afterViewChecked:n.ngAfterViewChecked||null,onDestroy:n.ngOnDestroy||null,onPush:t.changeDetection===ue.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||le,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||ce.Emulated,id:"c",styles:t.styles||le,_:null,setInput:null,schemas:t.schemas||null,tView:null},o=t.directives,s=t.features,a=t.pipes;return i.id+=fe++,i.inputs=ge(t.inputs,r),i.outputs=ge(t.outputs),s&&s.forEach(t=>t(i)),i.directiveDefs=o?()=>("function"==typeof o?o():o).map(de):null,i.pipeDefs=a?()=>("function"==typeof a?a():a).map(ve):null,i})}function de(t){return _e(t)||function(t){return t[Dt]||null}(t)}function ve(t){return function(t){return t[Pt]||null}(t)}const ye={};function me(t){const e={type:t.type,bootstrap:t.bootstrap||le,declarations:t.declarations||le,imports:t.imports||le,exports:t.exports||le,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&rt(()=>{ye[t.id]=t.type}),e}function ge(t,e){if(null==t)return he;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const we=pe;function _e(t){return t[Ot]||null}function be(t,e){return t.hasOwnProperty(Ft)?t[Ft]:null}function Ee(t,e){const n=t[Lt]||null;if(!n&&!0===e)throw new Error(`Type ${Et(t)} does not have '\u0275mod' property.`);return n}function Ie(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ce(t){return Array.isArray(t)&&!0===t[1]}function Te(t){return 0!=(8&t.flags)}function Se(t){return 2==(2&t.flags)}function Ae(t){return 1==(1&t.flags)}function Ne(t){return null!==t.template}function ke(t){return 0!=(512&t[2])}let xe=void 0;function Re(t){return!!t.listen}const Oe={createRenderer:(t,e)=>void 0!==xe?xe:"undefined"!=typeof document?document:void 0};function De(t){for(;Array.isArray(t);)t=t[0];return t}function Pe(t,e){return De(e[t+19])}function Le(t,e){return De(e[t.index])}function Me(t,e){return t.data[e+19]}function Fe(t,e){const n=e[t];return Ie(n)?n:n[0]}function Ue(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function je(t){return 4==(4&t[2])}function Ve(t){return 128==(128&t[2])}function qe(t,e){return null===t||null==e?null:t[e]}function He(t){t[18]=0}const Be={lFrame:un(null),bindingsEnabled:!0,checkNoChangesMode:!1};function We(){return Be.bindingsEnabled}function Ge(){return Be.lFrame.lView}function ze(){return Be.lFrame.tView}function Qe(){return Be.lFrame.previousOrParentTNode}function $e(t,e){Be.lFrame.previousOrParentTNode=t,Be.lFrame.isParent=e}function Ke(){return Be.lFrame.isParent}function Ye(){Be.lFrame.isParent=!1}function Je(){return Be.checkNoChangesMode}function Xe(t){Be.checkNoChangesMode=t}function Ze(){return Be.lFrame.bindingIndex++}function tn(t){const e=Be.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function en(t,e){const n=Be.lFrame;n.bindingIndex=n.bindingRootIndex=t,n.currentDirectiveIndex=e}function nn(){return Be.lFrame.currentQueryIndex}function rn(t){Be.lFrame.currentQueryIndex=t}function on(t,e){const n=an();Be.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function sn(t,e){const n=an(),r=t[1];Be.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function an(){const t=Be.lFrame,e=null===t?null:t.child;return null===e?un(t):e}function un(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentSanitizer:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function cn(){const t=Be.lFrame;return Be.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const hn=cn;function ln(){const t=cn();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.currentSanitizer=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function fn(){return Be.lFrame.selectedIndex}function pn(t){Be.lFrame.selectedIndex=t}function dn(){const t=Be.lFrame;return Me(t.tView,t.selectedIndex)}function vn(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n];e.afterContentInit&&(t.contentHooks||(t.contentHooks=[])).push(-n,e.afterContentInit),e.afterContentChecked&&((t.contentHooks||(t.contentHooks=[])).push(n,e.afterContentChecked),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,e.afterContentChecked)),e.afterViewInit&&(t.viewHooks||(t.viewHooks=[])).push(-n,e.afterViewInit),e.afterViewChecked&&((t.viewHooks||(t.viewHooks=[])).push(n,e.afterViewChecked),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,e.afterViewChecked)),null!=e.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(n,e.onDestroy)}}function yn(t,e,n){wn(t,e,3,n)}function mn(t,e,n,r){(3&t[2])===n&&wn(t,e,n,r)}function gn(t,e){let n=t[2];(3&n)===e&&(n&=1023,n+=1,t[2]=n)}function wn(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(_n(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function _n(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>10<t[18]>>16&&(3&t[2])===e&&(t[2]+=1024,o.call(s)):o.call(s)}class bn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function En(t,e,n){const r=Re(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Cn(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function In(t){return 3===t||4===t||6===t}function Cn(t){return 64===t.charCodeAt(0)}function Tn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Sn(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Sn(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function An(t){return-1!==t}function Nn(t){return 32767&t}function kn(t){return t>>16}function xn(t,e){let n=kn(t),r=e;for(;n>0;)r=r[15],n--;return r}function Rn(t){return"string"==typeof t?t:null==t?"":""+t}function On(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Rn(t)}const Dn=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Rt))();function Pn(t){return t instanceof Function?t():t}let Ln=!0;function Mn(t){const e=Ln;return Ln=t,e}let Fn=0;function Un(t,e){const n=Vn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,jn(r.data,t),jn(e,null),jn(r.blueprint,null));const i=qn(t,e),o=t.injectorIndex;if(An(i)){const t=Nn(i),n=xn(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function jn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Vn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function qn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function Hn(t,e,n){!function(t,e,n){let r="string"!=typeof n?n[Ut]:n.charCodeAt(0)||0;null==r&&(r=n[Ut]=Fn++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function Bn(t,e,n,r=ct.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t[Ut];return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){on(e,t);try{const t=i();if(null!=t||r&ct.Optional)return t;throw new Error(`No provider for ${On(n)}!`)}finally{hn()}}else if("number"==typeof i){if(-1===i)return new Yn(t,e);let o=null,s=Vn(t,e),a=-1,u=r&ct.Host?e[16][6]:null;for((-1===s||r&ct.SkipSelf)&&(a=-1===s?qn(t,e):e[s+8],Kn(r,!1)?(o=e[1],s=Nn(a),e=xn(a,e)):s=-1);-1!==s;){a=e[s+8];const t=e[1];if($n(i,s,t.data)){const t=Gn(s,e,n,o,r,u);if(t!==Wn)return t}Kn(r,e[1].data[s+8]===u)&&$n(i,s,e)?(o=t,s=Nn(a),e=xn(a,e)):s=-1}}}if(r&ct.Optional&&void 0===i&&(i=null),0==(r&(ct.Self|ct.Host))){const t=e[9],o=Qt(void 0);try{return t?t.get(n,i,r&ct.Optional):Yt(n,i,r&ct.Optional)}finally{Qt(o)}}if(r&ct.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${On(n)}]`)}const Wn={};function Gn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=zn(a,s,n,null==r?Se(a)&&Ln:r!=s&&3===a.type,i&ct.Host&&o===a);return null!==u?Qn(e,s,u,a):Wn}function zn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=65535&o,u=t.directiveStart,c=o>>16,h=i?a+c:t.directiveEnd;for(let l=r?a:a+c;l<h;l++){const t=s[l];if(l<u&&n===t||l>=u&&t.type===n)return l}if(i){const t=s[u];if(t&&Ne(t)&&t.type===n)return u}return null}function Qn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof bn){const s=i;if(s.resolving)throw new Error(`Circular dep for ${On(o[n])}`);const a=Mn(s.canSeeViewProviders);let u;s.resolving=!0,s.injectImpl&&(u=Qt(s.injectImpl)),on(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{onChanges:r,onInit:i,doCheck:o}=e;r&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)),i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{s.injectImpl&&Qt(u),Mn(a),s.resolving=!1,hn()}}return i}function $n(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function Kn(t,e){return!(t&ct.Self||t&ct.Host&&e)}class Yn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Bn(this._tNode,this._lView,t,void 0,e)}}function Jn(t){return t.ngDebugContext}function Xn(t){return t.ngOriginalError}function Zn(t,...e){t.error(...e)}class tr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||Zn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?Jn(t)?Jn(t):this._findContext(Xn(t)):null}_findOriginalError(t){let e=Xn(t);for(;e&&Xn(e);)e=Xn(e);return e}}class er{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity}`+" (see http://g.co/ng/security#xss)"}}function nr(t){return t instanceof er?t.changingThisBreaksApplicationSecurity:t}let rr=!0,ir=!1;function or(){return ir=!0,rr}const sr=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,ar=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i,ur=function(){var t={NONE:0,HTML:1,STYLE:2,SCRIPT:3,URL:4,RESOURCE_URL:5};return t[t.NONE]="NONE",t[t.HTML]="HTML",t[t.STYLE]="STYLE",t[t.SCRIPT]="SCRIPT",t[t.URL]="URL",t[t.RESOURCE_URL]="RESOURCE_URL",t}();function cr(t){const e=function(){const t=Ge();return t&&t[12]}();return e?e.sanitize(ur.URL,t)||"":function(t,e){const n=function(t){return t instanceof er&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}(t,"URL")?nr(t):(n=Rn(t),(n=String(n)).match(sr)||n.match(ar)?n:(or()&&console.warn(`WARNING: sanitizing unsafe URL value ${n} (see http://g.co/ng/security#xss)`),"unsafe:"+n));var n}function hr(t,e){t.__ngContext__=e}function lr(t){throw new Error(`Multiple components match node with tagname ${t.tagName}`)}function fr(){throw new Error("Cannot mix multi providers and regular providers")}function pr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function dr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==pr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function vr(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function yr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(In(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!vr(t,u,n)||""===u&&1===e.length){if(mr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!dr(t.attrs,c,n)){if(mr(r))return!1;s=!0}continue}const h=gr(8&r?"class":u,i,0==t.type&&"ng-template"!==t.tagName,n);if(-1===h){if(mr(r))return!1;s=!0;continue}if(""!==c){let t;t=h>o?"":i[h+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==pr(e,c,0)||2&r&&c!==t){if(mr(r))return!1;s=!0}}}}else{if(!s&&!mr(r)&&!mr(u))return!1;if(s&&mr(u))continue;s=!1,r=u|1&r}}return mr(r)||s}function mr(t){return 0==(1&t)}function gr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){if(t[n]===e)return n;n++}return-1}(e,t)}function wr(t,e,n=!1){for(let r=0;r<e.length;r++)if(yr(t,e[r],n))return!0;return!1}function _r(t,e){return t?":not("+e.trim()+")":e}function br(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||mr(s)||(e+=_r(o,i),i=""),r=s,o=o||!mr(r);n++}return""!==i&&(e+=_r(o,i)),e}const Er={};function Ir(t){const e=t[3];return Ce(e)?e[3]:e}function Cr(t){Tr(ze(),Ge(),fn()+t,Je())}function Tr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&yn(e,r,n)}else{const r=t.preOrderHooks;null!==r&&mn(e,r,0,n)}pn(n)}function Sr(t,e){return t<<17|e<<2}function Ar(t){return t>>17&32767}function Nr(t){return 2|t}function kr(t){return(131068&t)>>2}function xr(t,e){return-131069&t|e<<2}function Rr(t){return 1|t}function Or(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];rn(i),n.contentQueries(2,e[o],o)}}}function Dr(t,e,n){return Re(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Pr(t,e,n,r,i,o,s,a,u,c){const h=e.blueprint.slice();return h[0]=i,h[2]=140|r,He(h),h[3]=h[15]=t,h[8]=n,h[10]=s||t&&t[10],h[11]=a||t&&t[11],h[12]=u||t&&t[12]||null,h[9]=c||t&&t[9]||null,h[6]=o,h[16]=2==e.type?t[16]:h,h}function Lr(t,e,n,r,i,o){const s=n+19,a=t.data[s]||function(t,e,n,r,i,o){const s=Qe(),a=Ke(),u=a?s:s&&s.parent,c=t.data[n]=Gr(0,u&&u!==e?u:null,r,n,i,o);return null===t.firstChild&&(t.firstChild=c),s&&(!a||null!=s.child||null===c.parent&&2!==s.type?a||(s.next=c):s.child=c),c}(t,e,s,r,i,o);return $e(a,!0),a}function Mr(t,e,n){sn(e,e[6]);try{const r=t.viewQuery;null!==r&&di(1,r,n);const i=t.template;null!==i&&jr(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Or(t,e),t.staticViewQueries&&di(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)ci(t,e[n])}(e,o)}finally{e[2]&=-5,ln()}}function Fr(t,e,n,r){const i=e[2];if(256==(256&i))return;sn(e,e[6]);const o=Je();try{He(e),Be.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&jr(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&yn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&mn(e,n,0,null),gn(e,0)}if(function(t){let e=t[13];for(;null!==e;){let n;if(Ce(e)&&(n=e[2])>>1==-1){for(let t=9;t<e.length;t++){const n=e[t],r=n[1];Ve(n)&&Fr(r,n,r.template,n[8])}0!=(1&n)&&ai(e,t[16])}e=e[4]}}(e),null!==t.contentQueries&&Or(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&yn(e,n)}else{const n=t.contentHooks;null!==n&&mn(e,n,1),gn(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,pn(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(en(r,i),s(2,e[i])),i++)}}}finally{pn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ui(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&di(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&yn(e,n)}else{const n=t.viewHooks;null!==n&&mn(e,n,2),gn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73)}finally{ln()}}function Ur(t,e,n,r){const i=e[10],o=!Je(),s=je(e);try{o&&!s&&i.begin&&i.begin(),s&&Mr(t,e,r),Fr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function jr(t,e,n,r,i){const o=fn();try{pn(-1),2&r&&e.length>19&&Tr(t,e,0,Je()),n(r,i)}finally{pn(o)}}function Vr(t,e,n){if(Te(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}function qr(t,e,n){We()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Un(n,e),hr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Ne(r);o&&ri(e,n,r);const u=Qn(e,t,a,n);hr(u,e),null!==s&&ii(0,a-i,u,r,0,s),o&&(Fe(n.index,e)[8]=u)}}(t,e,n,Le(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-19;try{pn(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Jr(r,i):s&&o.push(null)}}finally{pn(-1)}}(t,e,n))}function Hr(t,e,n=Le){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Br(t){return t.tView||(t.tView=Wr(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts))}function Wr(t,e,n,r,i,o,s,a,u,c){const h=19+r,l=h+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Er);return n}(h,l);return f[1]={type:t,id:e,blueprint:f,template:n,queries:null,viewQuery:a,node:null,data:f.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:l,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:c}}function Gr(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,residualStyles:void 0,classes:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function zr(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Qr(t,e,n,r,i,o,s,a){const u=Le(e,n);let c,h=e.inputs;!a&&null!=h&&(c=h[r])?(wi(t,n,c,r,i),Se(e)&&function(t,e){const n=Fe(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.tagName||"",r):i,Re(o)?o.setProperty(u,r,i):Cn(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function $r(t,e,n,r){let i=!1;if(We()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];wr(n,s.selectors,!1)&&(i||(i=[]),Hn(Un(n,e),t,s.type),Ne(s)?(2&n.flags&&lr(n),Zr(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,ei(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}Xr(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Tn(n.mergedAttrs,c.hostAttrs),ni(t,e,c),ti(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128),!a&&(c.onChanges||c.onInit||c.doCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-19),a=!0),u||!c.onChanges&&!c.doCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-19),u=!0),Kr(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],e=t.inputs;o.push(null!==i?oi(e,i):null),s=zr(e,u,s),a=zr(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),Yr(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Tn(n.mergedAttrs,n.attrs),i}function Kr(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Yr(t,e,n){for(let r=0;r<n;r++)e.push(Er),t.blueprint.push(Er),t.data.push(null)}function Jr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Xr(t,e,n){const r=19-e.index,i=t.data.length-(65535&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function Zr(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ti(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Ne(e)&&(n[""]=t)}}function ei(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ni(t,e,n){t.data.push(n);const r=n.factory||(n.factory=be(n.type)),i=new bn(r,Ne(n),null);t.blueprint.push(i),e.push(i)}function ri(t,e,n){const r=Le(e,t),i=Br(n),o=t[10],s=hi(t,Pr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n)));t[e.index]=s}function ii(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function oi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function si(t,e,n,r){return new Array(t,!0,-2,e,null,null,r,n,null)}function ai(t,e){const n=t[5];for(let r=0;r<n.length;r++){const t=n[r],i=t[3][3][16];if(i!==e&&0==(16&i[2])){const e=t[1];Fr(e,t,e.template,t[8])}}}function ui(t,e){const n=Fe(e,t);if(Ve(n)&&80&n[2]){const t=n[1];Fr(t,n,t.template,n[8])}}function ci(t,e){const n=Fe(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Mr(r,n,n[8])}function hi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function li(t){for(;t;){t[2]|=64;const e=Ir(t);if(ke(t)&&!e)return t;t=e}return null}function fi(t,e,n){const r=e[10];r.begin&&r.begin();try{Fr(t,e,t.template,n)}catch(i){throw gi(e,i),i}finally{r.end&&r.end()}}function pi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Ue(n),i=r[1];Ur(i,r,i.template,n)}}(t[8])}function di(t,e,n){rn(0),e(t,n)}const vi=(()=>Promise.resolve(null))();function yi(t){return t[7]||(t[7]=[])}function mi(t){return t.cleanup||(t.cleanup=[])}function gi(t,e){const n=t[9],r=n?n.get(tr,null):null;r&&r.handleError(e)}function wi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function _i(t,e){const n=e[3];return-1===t.index?Ce(n)?n:null:n}function bi(t,e){const n=_i(t,e);return n?Di(e[11],n[7]):null}function Ei(t,e,n,r,i){if(null!=r){let o,s=!1;Ce(r)?o=r:Ie(r)&&(s=!0,r=r[0]);const a=De(r);0===t&&null!==n?null==i?Ri(e,n,a):xi(e,n,a,i||null):1===t&&null!==n?xi(e,n,a,i||null):2===t?function(t,e,n){const r=Di(t,e);r&&function(t,e,n,r){Re(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==De(n)&&Ei(e,t,r,o,i);for(let s=9;s<n.length;s++){const i=n[s];Ui(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function Ii(t,e,n,r){const i=bi(t.node,e);i&&Ui(t,e,e[11],n?1:2,i,r)}function Ci(t,e){const n=t[5],r=n.indexOf(e);n.splice(r,1)}function Ti(t,e){if(t.length<=9)return;const n=9+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Ci(i,r),e>0&&(t[n-1][4]=r[4]);const o=re(t,9+e);Ii(r[1],r,!1,null);const s=o[5];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Si(t,e){if(!(256&e[2])){const n=e[11];Re(n)&&n.destroyNode&&Ui(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ni(t[1],t);for(;e;){let n=null;if(Ie(e))n=e[13];else{const t=e[9];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Ie(e)&&Ni(e[1],e),e=Ai(e,t);null===e&&(e=t),Ie(e)&&Ni(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ai(t,e){let n;return Ie(t)&&(n=t[6])&&2===n.type?_i(n,t):t[3]===e?null:t[3]}function Ni(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];t instanceof bn||n[r+1].call(t)}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):De(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&Re(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&Ce(e[3])){r!==e[3]&&Ci(r,e);const n=e[5];null!==n&&n.detachView(t)}}}function ki(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?bi(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return Le(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==ce.ShadowDom&&n!==ce.Native)return null}return Le(r,n)}function xi(t,e,n,r){Re(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function Ri(t,e,n){Re(t)?t.appendChild(e,n):e.appendChild(n)}function Oi(t,e,n,r){null!==r?xi(t,e,n,r):Ri(t,e,n)}function Di(t,e){return Re(t)?t.parentNode(e):e.parentNode}function Pi(t,e){if(2===t.type){const n=_i(t,e);return null===n?null:Mi(n.indexOf(e,9)-9,n)}return 4===t.type||5===t.type?Le(t,e):null}function Li(t,e,n,r){const i=ki(t,r,e);if(null!=i){const t=e[11],o=Pi(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)Oi(t,i,n[e],o);else Oi(t,i,n,o)}}function Mi(t,e){const n=9+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return Le(n,e);if(0===r)return Mi(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return Ce(t)?Mi(-1,t):De(t)}}{const r=e[16],i=r[6],o=Ir(r),s=i.projection[n.projection];return null!=s?t(o,s):t(e,n.next)}}return null}(t,r)}return e[7]}function Fi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&hr(De(a),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(Fi(t,e,n.child,r,i,o,!1),Ei(e,t,i,a,o)):1===u?ji(t,e,r,n,i,o):Ei(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function Ui(t,e,n,r,i,o){Fi(n,r,t.node.child,e,i,o,!1)}function ji(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Ei(e,t,i,a[u],o);else Fi(t,e,a,s[3],i,o,!0)}function Vi(t,e,n){Re(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function qi(t,e,n){Re(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Hi{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null,this._tViewNode=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(De(s)),Ce(s))for(let e=9;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(4===a||5===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6],s=Ir(e);let a=o.projection[r.projection];null!==a&&null!==s&&t(s[1],s,a,i,!0)}r=o?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Si(this._lView[1],this._lView)}onDestroy(t){var e,n,r;e=this._lView[1],r=t,yi(n=this._lView).push(r),e.firstCreatePass&&mi(e).push(n[7].length-1,null)}markForCheck(){li(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Xe(!0);try{fi(t,e,n)}finally{Xe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Ui(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Bi extends Hi{constructor(t){super(t),this._view=t}detectChanges(){pi(this._view)}checkNoChanges(){!function(t){Xe(!0);try{pi(t)}finally{Xe(!1)}}(this._view)}get context(){return null}}let Wi,Gi,zi;function Qi(t,e,n){return Wi||(Wi=class extends t{}),new Wi(Le(e,n))}function $i(t,e,n,r){return Gi||(Gi=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Pr(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[5];null!==r&&(n[5]=r.createEmbeddedView(e)),Mr(e,n,t);const i=new Hi(n);return i._tViewNode=n[6],i}}),0===n.type?new Gi(r,n,Qi(e,n,r)):null}function Ki(t,e,n,r){let i;zi||(zi=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Qi(e,this._hostTNode,this._hostView)}get injector(){return new Yn(this._hostTNode,this._hostView)}get parentInjector(){const t=qn(this._hostTNode,this._hostView),e=xn(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=kn(t),i=e,o=e[6];for(;r>1;)i=i[15],o=i[6],r--;return o}(t,this._hostView,this._hostTNode);return An(t)&&null!=n?new Yn(n,e):new Yn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-9}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Zt,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Ce(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new zi(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=9+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-9?(e[4]=n[i],ne(n,9+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[5],r=e[3][3][16];16!=(16&r[2])&&e[16]!==r&&(t[2]|=1),null===n?t[5]=[e]:n.push(e)}(s,e);const a=e[5];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,i),Ii(r,n,!0,Mi(i,this._lContainer)),t.attachToViewContainerRef(this),ne(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1);(function(t,e){const n=Ti(t,e);n&&Si(n[1],n)})(this._lContainer,e),re(this._lContainer[8],e)}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Ti(this._lContainer,e);return n&&null!=re(this._lContainer[8],e)?new Hi(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Ce(o))i=o,function(t,e){t[2]=-2}(i);else{let t;if(4===n.type)t=De(o);else if(t=r[11].createComment(""),ke(r)){const e=r[11],i=Le(n,r);xi(e,Di(e,i),t,function(t,e){return Re(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Li(r[1],r,t,n);r[n.index]=i=si(o,r,t,n),hi(r,i)}return new zi(i,n,r)}let Yi=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ji(),t})();const Ji=function(t=!1){return function(t,e,n){if(!n&&Se(t)){const n=Fe(t.index,e);return new Hi(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Hi(e[16],e):null}(Qe(),Ge(),t)},Xi=new jt("Set Injector scope."),Zi={},to={},eo=[];let no=void 0;function ro(){return void 0===no&&(no=new Xt),no}function io(t,e=null,n=null,r){return new oo(t,n,e||ro(),r)}class oo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&ee(e,n=>this.processProvider(n,t,e)),ee([t],t=>this.processInjectorType(t,[],i)),this.records.set(Vt,uo(void 0,this));const o=this.records.get(Xi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:Et(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=qt,n=ct.Default){this.assertNotDestroyed();const r=zt(this);try{if(!(n&ct.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof jt)&&dt(t);e=n&&this.injectableDefInScope(n)?uo(so(t),Zi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&ct.Self?ro():this.parent).get(t,e=n&ct.Optional&&e===qt?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(Et(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=Et(e);if(Array.isArray(e))i=e.map(Et).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):Et(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(Ht,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{zt(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(Et(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=St(t)))return!1;let r=yt(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=yt(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{ee(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];ee(r,t=>this.processProvider(t,n,r||eo))}}this.injectorDefTypes.add(o),this.records.set(o,uo(r.factory,Zi));const a=r.providers;if(null!=a&&!s){const e=t;ee(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=ho(t=St(t))?t:St(t&&t.provide);const i=function(t,e,n){return co(t)?uo(void 0,t.useValue):uo(ao(t,e,n),Zi)}(t,e,n);if(ho(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&fr()}else{let e=this.records.get(r);e?void 0===e.multi&&fr():(e=uo(void 0,Zi,!0),e.factory=()=>Jt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===to?function(t){throw new Error(`Cannot instantiate cyclic dependency! ${t}`)}(Et(t)):e.value===Zi&&(e.value=to,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function so(t){const e=dt(t),n=null!==e?e.factory:be(t);if(null!==n)return n;const r=yt(t);if(null!==r)return r.factory;if(t instanceof jt)throw new Error(`Token ${Et(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=ie(e,"?");throw new Error(`Can't resolve all parameters for ${Et(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[mt]||t[_t]||t[wt]&&t[wt]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\n`+`This will become an error in v10. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function ao(t,e,n){let r=void 0;if(ho(t)){const e=St(t);return be(e)||so(e)}if(co(t))r=()=>St(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...Jt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Kt(St(t.useExisting));else{const i=St(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${Et(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return be(i)||so(i);r=()=>new i(...Jt(t.deps))}var i;return r}function uo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function co(t){return null!==t&&"object"==typeof t&&Bt in t}function ho(t){return"function"==typeof t}const lo=function(t,e,n){return function(t,e=null,n=null,r){const i=io(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let fo=(()=>{class t{static create(t,e){return Array.isArray(t)?lo(t,e,""):lo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=qt,t.NULL=new Xt,t.\u0275prov=ft({token:t,providedIn:"any",factory:()=>Kt(Vt)}),t.__NG_ELEMENT_ID__=-1,t})();const po=new jt("AnalyzeForEntryComponents");let vo=new Map;const yo=new Set;function mo(t){return"string"==typeof t?t:t.text()}function go(t,e){let n=t.styles,r=t.classes,i=0;for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?i=t:1==i?r=It(r,t):2==i&&(n=It(n,t+": "+e[++o]+";"))}null!==n&&(t.styles=n),null!==r&&(t.classes=r)}let wo=null;function _o(){if(!wo){const t=Rt.Symbol;if(t&&t.iterator)wo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(wo=n)}}}return wo}function bo(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function Eo(t){return!!Io(t)&&(Array.isArray(t)||!(t instanceof Map)&&_o()in t)}function Io(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Co(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function To(t,e,n,r){const i=Ge();return Co(i,Ze(),e)&&(ze(),function(t,e,n,r,i,o){const s=Le(t,e),a=e[11];if(null==r)Re(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?Rn(r):i(r,t.tagName||"",n);Re(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(dn(),i,t,e,n,r)),To}function So(t,e,n,r,i,o,s,a){const u=Ge(),c=ze(),h=t+19,l=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,h=Lr(e,n[6],t,0,s||null,qe(c,a));$r(e,n,h,qe(c,u)),vn(e,h);const l=h.tViews=Wr(2,-1,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c),f=Gr(0,null,2,-1,null,null);return f.injectorIndex=h.injectorIndex,l.node=f,null!==e.queries&&(e.queries.template(e,h),l.queries=e.queries.embeddedTView(h)),h}(t,c,u,e,n,r,i,o,s):c.data[h];$e(l,!1);const f=u[11].createComment("");Li(c,u,f,l),hr(f,u),hi(u,u[h]=si(f,u,f,l)),Ae(l)&&qr(c,u,l),null!=s&&Hr(u,l,a)}function Ao(t,e=ct.Default){const n=Ge();return null==n?Kt(t,e):Bn(Qe(),n,St(t),e)}function No(){throw new Error("invalid")}function ko(t,e,n){const r=Ge();return Co(r,Ze(),e)&&Qr(ze(),dn(),r,t,e,r[11],n,!1),ko}function xo(t,e,n,r,i){const o=i?"class":"style";wi(t,n,e.inputs[o],o,r)}function Ro(t,e,n,r){const i=Ge(),o=ze(),s=19+t,a=i[11],u=i[s]=Dr(e,a,Be.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=qe(a,o),c=Lr(e,n[6],t,3,i,u);return $r(e,n,c,qe(a,s)),null!==c.mergedAttrs&&go(c,c.mergedAttrs),null!==e.queries&&e.queries.elementStart(e,c),c}(t,o,i,0,e,n,r):o.data[s];$e(c,!0);const h=c.mergedAttrs;null!==h&&En(a,u,h);const l=c.classes;null!==l&&qi(a,u,l);const f=c.styles;null!==f&&Vi(a,u,f),Li(o,i,u,c),0===Be.lFrame.elementDepthCount&&hr(u,i),Be.lFrame.elementDepthCount++,Ae(c)&&(qr(o,i,c),Vr(o,c,i)),null!==r&&Hr(i,c)}function Oo(){let t=Qe();Ke()?Ye():(t=t.parent,$e(t,!1));const e=t;Be.lFrame.elementDepthCount--;const n=ze();n.firstCreatePass&&(vn(n,t),Te(t)&&n.queries.elementEnd(t)),null!==e.classes&&function(t){return 0!=(16&t.flags)}(e)&&xo(n,e,Ge(),e.classes,!0),null!==e.styles&&function(t){return 0!=(32&t.flags)}(e)&&xo(n,e,Ge(),e.styles,!1)}function Do(t,e,n,r){Ro(t,e,n,r),Oo()}function Po(t){return!!t&&"function"==typeof t.then}function Lo(t,e,n=!1,r){const i=Ge(),o=ze(),s=Qe();return function(t,e,n,r,i,o,s=!1,a){const u=Ae(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),h=yi(e);let l=!0;if(3===r.type){const f=Le(r,e),p=a?a(f):he,d=p.target||f,v=h.length,y=a?t=>a(De(t[r.index])).target:r.index;if(Re(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,l=!1;else{o=Fo(r,e,o,!1);const t=n.listen(p.name||d,i,o);h.push(o,t),c&&c.push(i,y,v,v+1)}}else o=Fo(r,e,o,!0),d.addEventListener(i,o,s),h.push(o),c&&c.push(i,y,v,s)}const f=r.outputs;let p;if(l&&null!==f&&(p=f[i])){const t=p.length;if(t)for(let n=0;n<t;n+=2){const t=e[p[n]][p[n+1]].subscribe(o),s=h.length;h.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Lo}function Mo(t,e,n){try{return!1!==e(n)}catch(r){return gi(t,r),!1}}function Fo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Fe(t.index,e):e;0==(32&e[2])&&li(s);let a=Mo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=Mo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Uo(t=1){return function(t){return(Be.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Be.lFrame.contextLView))[8]}(t)}const jo=[];function Vo(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Ar(o):kr(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];qo(t[a],e)&&(u=!0,t[a+1]=r?Rr(n):Nr(n)),a=r?Ar(n):kr(n)}u&&(t[n+1]=r?Nr(o):Rr(o))}function qo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ae(t,e)>=0}const Ho={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Bo(t){return t.substring(Ho.key,Ho.keyEnd)}function Wo(t,e){const n=Ho.textEnd;return n===e?-1:(e=Ho.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Ho.key=e,n),Go(t,e,n))}function Go(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function zo(t,e){return function(t,e,n,r){const i=Ge(),o=ze(),s=tn(2);if(o.firstUpdatePass&&Yo(o,t,s,!0),e!==Er&&Co(i,s,e)){let r;null==n&&(r=function(){const t=Be.lFrame;return null===t?null:t.currentSanitizer}())&&(n=r),Zo(o,o.data[fn()+19],i,i[11],t,i[s+1]=function(t,e){return null==t||("function"==typeof e?t=e(t):"string"==typeof e?t+=e:"object"==typeof t&&(t=Et(nr(t)))),t}(e,n),!0,s)}}(t,e,null),zo}function Qo(t){!function(t,e,n,r){const i=ze(),o=tn(2);i.firstUpdatePass&&Yo(i,null,o,!0);const s=Ge();if(n!==Er&&Co(s,o,n)){const r=i.data[fn()+19];if(ns(r,!0)&&!Ko(i,o)){let t=r.classes;null!==t&&(n=It(t,n||"")),xo(i,r,s,n,!0)}else!function(t,e,n,r,i,o,s,a){i===Er&&(i=jo);let u=0,c=0,h=0<i.length?i[0]:null,l=0<o.length?o[0]:null;for(;null!==h||null!==l;){const s=u<i.length?i[u+1]:void 0,f=c<o.length?o[c+1]:void 0;let p=null,d=void 0;h===l?(u+=2,c+=2,s!==f&&(p=l,d=f)):null===l||null!==h&&h<l?(u+=2,p=h):(c+=2,p=l,d=f),null!==p&&Zo(t,e,n,r,p,d,!0,a),h=u<i.length?i[u]:null,l=c<o.length?o[c]:null}}(i,r,s,s[11],s[o+1],s[o+1]=function(t,e,n){if(null==n||""===n)return jo;const r=[],i=nr(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if("object"==typeof i)for(const o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else"string"==typeof i&&e(r,i);return r}(t,e,n),0,o)}}(oe,$o,t)}function $o(t,e){for(let n=function(t){return function(t){Ho.key=0,Ho.keyEnd=0,Ho.value=0,Ho.valueEnd=0,Ho.textEnd=t.length}(t),Wo(t,Go(t,0,Ho.textEnd))}(e);n>=0;n=Wo(e,n))oe(t,Bo(e),!0)}function Ko(t,e){return e>=t.expandoStartIndex}function Yo(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[fn()+19],s=Ko(t,n);ns(o,r)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=Be.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(n=Xo(n=Jo(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Jo(i,t,e,n,r),null===o){let n=function(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==kr(r))return t[Ar(r)]}(t,e,r);void 0!==n&&Array.isArray(n)&&(n=Jo(null,t,e,n[1],r),n=Xo(n,e.attrs,r),function(t,e,n,r){t[Ar(n?e.classBindings:e.styleBindings)]=r}(t,e,r,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Xo(r,t[o].hostAttrs,n);return Xo(r,e.attrs,n)}(t,e,r)}return void 0!==o&&(r?e.residualClasses=o:e.residualStyles=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ar(s),u=kr(s);t[r]=n;let c,h=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ae(t,c)>0)&&(h=!0)}else c=n;if(i)if(0!==u){const e=Ar(t[a+1]);t[r+1]=Sr(e,a),0!==e&&(t[e+1]=xr(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Sr(a,0),0!==a&&(t[a+1]=xr(t[a+1],r)),a=r;else t[r+1]=Sr(u,0),0===a?a=r:t[u+1]=xr(t[u+1],r),u=r;h&&(t[r+1]=Nr(t[r+1])),Vo(t,c,r,!0),Vo(t,c,r,!1),function(t,e,n,r,i){const o=i?t.residualClasses:t.residualStyles;null!=o&&"string"==typeof e&&ae(o,e)>=0&&(n[r+1]=Rr(n[r+1]))}(e,c,t,r,o),s=Sr(a,u),o?e.classBindings=s:e.styleBindings=s}(i,o,e,n,s,r)}}function Jo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Xo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Xo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),oe(t,s,!!n||e[++o]))}return void 0===t?null:t}function Zo(t,e,n,r,i,o,s,a){if(3!==e.type)return;const u=t.data,c=u[a+1];es(1==(1&c)?ts(u,e,n,i,kr(c),s):void 0)||(es(o)||function(t){return 2==(2&t)}(c)&&(o=ts(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Re(t);if(e)i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r);else{const e=-1==r.indexOf("-")?void 0:2;null==i?o?t.removeStyle(n,r,e):n.style.removeProperty(r):o?t.setStyle(n,r,i,e):n.style.setProperty(r,i)}}(r,s,Pe(fn(),n),i,o))}function ts(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let h=n[i+1];h===Er&&(h=c?jo:void 0);let l=c?se(h,r):u===r?h:void 0;if(o&&!es(l)&&(l=se(e,r)),es(l)&&(a=l,s))return a;const f=t[i+1];i=s?Ar(f):kr(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=se(t,r))}return a}function es(t){return void 0!==t}function ns(t,e){return 0!=(t.flags&(e?16:32))}function rs(t,e=""){const n=Ge(),r=ze(),i=t+19,o=r.firstCreatePass?Lr(r,n[6],t,3,null,null):r.data[i],s=n[i]=function(t,e){return Re(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Li(r,n,s,o),$e(o,!1)}function is(t,e,n){const r=Ge(),i=function(t,e,n,r){return Co(t,Ze(),n)?e+Rn(n)+r:Er}(r,t,e,n);return i!==Er&&function(t,e,n){const r=Pe(e,t),i=t[11];Re(i)?i.setValue(r,n):r.textContent=n}(r,fn(),i),is}function os(t,e,n){const r=Ge();return Co(r,Ze(),e)&&Qr(ze(),dn(),r,t,e,r[11],n,!0),os}function ss(t,e){const n=Ue(t)[1],r=n.data.length-1;vn(n,{directiveStart:r,directiveEnd:r+1})}function as(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Ne(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=us(t.inputs),e.declaredInputs=us(t.declaredInputs),e.outputs=us(t.outputs);const n=i.hostBindings;n&&ls(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&cs(t,o),s&&hs(t,s),lt(t.inputs,i.inputs),lt(t.declaredInputs,i.declaredInputs),lt(t.outputs,i.outputs),Ne(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}e.afterContentChecked=e.afterContentChecked||i.afterContentChecked,e.afterContentInit=t.afterContentInit||i.afterContentInit,e.afterViewChecked=t.afterViewChecked||i.afterViewChecked,e.afterViewInit=t.afterViewInit||i.afterViewInit,e.doCheck=t.doCheck||i.doCheck,e.onDestroy=t.onDestroy||i.onDestroy,e.onInit=t.onInit||i.onInit}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===as&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Tn(i.hostAttrs,n=Tn(n,i.hostAttrs))}}(r)}function us(t){return t===he?{}:t===le?[]:t}function cs(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function hs(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function ls(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}class fs{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ps(t){t.type.prototype.ngOnChanges&&(t.setInput=ds,t.onChanges=function(){const t=vs(this),e=t&&t.current;if(e){const n=t.previous;if(n===he)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}})}function ds(t,e,n,r){const i=vs(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:he,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new fs(u&&u.currentValue,e,s===he),t[r]=e}function vs(t){return t.__ngSimpleChanges__||null}function ys(t,e,n,r,i){if(t=St(t),Array.isArray(t))for(let o=0;o<t.length;o++)ys(t[o],e,n,r,i);else{const o=ze(),s=Ge();let a=ho(t)?t:St(t.provide),u=ao(t);const c=Qe(),h=65535&c.providerIndexes,l=c.directiveStart,f=c.providerIndexes>>16;if(ho(t)||!t.multi){const r=new bn(u,i,Ao),p=ws(a,e,i?h:h+f,l);-1===p?(Hn(Un(c,s),o,a),ms(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=65536),n.push(r),s.push(r)):(n[p]=r,s[p]=r)}else{const p=ws(a,e,h+f,l),d=ws(a,e,h,h+f),v=p>=0&&n[p],y=d>=0&&n[d];if(i&&!y||!i&&!v){Hn(Un(c,s),o,a);const h=function(t,e,n,r,i){const o=new bn(t,n,Ao);return o.multi=[],o.index=e,o.componentProviders=0,gs(o,i,r&&!n),o}(i?bs:_s,n.length,i,r,u);!i&&y&&(n[d].providerFactory=h),ms(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=65536),n.push(h),s.push(h)}else ms(o,t,p>-1?p:d),gs(n[i?d:p],u,!i&&r);!i&&r&&y&&n[d].componentProviders++}}}function ms(t,e,n){if(ho(e)||e.useClass){const r=(e.useClass||e).prototype.ngOnDestroy;r&&(t.destroyHooks||(t.destroyHooks=[])).push(n,r)}}function gs(t,e,n){t.multi.push(e),n&&t.componentProviders++}function ws(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function _s(t,e,n,r){return Es(this.multi,[])}function bs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Qn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Es(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Es(i,o);return o}function Es(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Is(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=ze();if(r.firstCreatePass){const i=Ne(t);ys(n,r.data,r.blueprint,i,!0),ys(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}ps.ngInherit=!0;class Cs{}class Ts{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${Et(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Ss=(()=>{class t{}return t.NULL=new Ts,t})(),As=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Ns(t),t})();const Ns=function(t){return Qi(t,Qe(),Ge())};class ks{}const xs=function(){var t={Important:1,DashCase:2};return t[t.Important]="Important",t[t.DashCase]="DashCase",t}();let Rs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Os(),t})();const Os=function(){const t=Ge(),e=Fe(Qe().index,t);return function(t){const e=t[11];if(Re(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Ie(e)?e:t)};let Ds=(()=>{class t{}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>null}),t})();class Ps{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Ls=new Ps("9.0.7");class Ms{constructor(){}supports(t){return Eo(t)}create(t){return new Us(t)}}const Fs=(t,e)=>e;class Us{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Fs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Hs(n,r,i)?e:n,s=Hs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Eo(t))throw new Error(`Error trying to diff '${Et(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&bo(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),bo(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[_o()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&bo(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),bo(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(bo(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(bo(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new js(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new qs),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e?t:(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t,t)}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qs),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class js{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Vs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&bo(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class qs{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Vs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Hs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Bs{constructor(){}supports(t){return t instanceof Map||Io(t)}create(){return new Ws}}class Ws{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Io(t)))throw new Error(`Error trying to diff '${Et(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Gs(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){bo(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Gs{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let zs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ut,new st]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>new t([new Ms])}),t})(),Qs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new ut,new st]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>new t([new Bs])}),t})();const $s=[new Bs],Ks=new zs([new Ms]),Ys=new Qs($s);let Js=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Xs(t,As),t})();const Xs=function(t,e){return $i(t,e,Qe(),Ge())};let Zs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ta(t,As),t})();const ta=function(t,e){return Ki(t,e,Qe(),Ge())},ea={};class na extends Ss{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=_e(t);return new oa(e,this.ngModule)}}function ra(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ia=new jt("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Dn});class oa extends Cs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(br).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ra(this.componentDef.inputs)}get outputs(){return ra(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,ea,i);return o!==ea||r===ea?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(ks,Oe),s=i.get(Ds,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Re(t))return t.selectRootElement(e,n===ce.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Dr(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),h=this.componentDef.onPush?576:528,l="string"==typeof n&&/^#root-ng-internal-isolated-\d+/.test(n),f={components:[],scheduler:Dn,clean:vi,playerHandler:null,flags:0},p=Wr(0,-1,null,1,0,null,null,null,null,null),d=Pr(null,p,f,h,null,null,o,a,s,i);let v,y;sn(d,null);try{const t=function(t,e,n,r,i,o){const s=n[1];n[19]=t;const a=Lr(s,null,0,3,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(go(a,u),null!==t&&(En(i,t,u),null!==a.classes&&qi(i,t,a.classes),null!==a.styles&&Vi(i,t,a.styles)));const c=r.createRenderer(t,e),h=Pr(n,Br(e),null,e.onPush?64:16,n[19],a,r,c,void 0);return s.firstCreatePass&&(Hn(Un(a,n),s,e.type),Zr(s,a),ei(a,n.length,1)),hi(n,h),n[19]=h}(c,this.componentDef,d,o,a);if(c)if(n)En(a,c,["ng-version",Ls.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!mr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&En(a,c,t),e&&e.length>0&&qi(a,c,e.join(" "))}y=Me(d[1],0),e&&(y.projection=e.map(t=>Array.from(t))),v=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Qe();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Xr(t,r,1),ni(t,e,n));const i=Qn(e,t,e.length-1,r);hr(i,e);const o=Le(r,e);return o&&hr(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=Qe();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){pn(a.index-19);const t=n[1];Kr(t,e),Yr(t,n,e.hostVars),Jr(e,s)}return s}(t,this.componentDef,d,f,[ss]),Mr(p,d,null)}finally{ln()}const m=new sa(this.componentType,v,Qi(As,y,d),d,y);return n&&!l||(m.hostView._tViewNode.child=y),m}}class sa extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Bi(r),this.hostView._tViewNode=function(t,e,n,r){let i=t.node;return null==i&&(t.node=i=Gr(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new Yn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}var aa=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ua={};function ca(t){return t in ua||(ua[t]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[t]),ua[t]}const ha=function(){var t={LocaleId:0,DayPeriodsFormat:1,DayPeriodsStandalone:2,DaysFormat:3,DaysStandalone:4,MonthsFormat:5,MonthsStandalone:6,Eras:7,FirstDayOfWeek:8,WeekendRange:9,DateFormat:10,TimeFormat:11,DateTimeFormat:12,NumberSymbols:13,NumberFormats:14,CurrencyCode:15,CurrencySymbol:16,CurrencyName:17,Currencies:18,PluralCase:19,ExtraData:20};return t[t.LocaleId]="LocaleId",t[t.DayPeriodsFormat]="DayPeriodsFormat",t[t.DayPeriodsStandalone]="DayPeriodsStandalone",t[t.DaysFormat]="DaysFormat",t[t.DaysStandalone]="DaysStandalone",t[t.MonthsFormat]="MonthsFormat",t[t.MonthsStandalone]="MonthsStandalone",t[t.Eras]="Eras",t[t.FirstDayOfWeek]="FirstDayOfWeek",t[t.WeekendRange]="WeekendRange",t[t.DateFormat]="DateFormat",t[t.TimeFormat]="TimeFormat",t[t.DateTimeFormat]="DateTimeFormat",t[t.NumberSymbols]="NumberSymbols",t[t.NumberFormats]="NumberFormats",t[t.CurrencyCode]="CurrencyCode",t[t.CurrencySymbol]="CurrencySymbol",t[t.CurrencyName]="CurrencyName",t[t.Currencies]="Currencies",t[t.PluralCase]="PluralCase",t[t.ExtraData]="ExtraData",t}();let la="en-US";function fa(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(la=t.toLowerCase().replace(/_/g,"-"))}const pa=new Map;class da extends Zt{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new na(this);const n=Ee(t),r=t[Mt]||null;r&&fa(r),this._bootstrapComponents=Pn(n.bootstrap),this._r3Injector=io(t,e,[{provide:Zt,useValue:this},{provide:Ss,useValue:this.componentFactoryResolver}],Et(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=fo.THROW_IF_NOT_FOUND,n=ct.Default){return t===fo||t===Zt||t===Vt?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class va extends te{constructor(t){super(),this.moduleType=t,null!==Ee(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${Et(e)} vs ${Et(e.name)}`)})(t,pa.get(t),e),pa.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new da(this.moduleType,t)}}class ya extends T{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,i=t=>null,o=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(i=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(o=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(i=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(o=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const s=super.subscribe(r,i,o);return t instanceof l&&t.add(s),s}}function ma(){return this._results[_o()]()}class ga{constructor(){this.dirty=!0,this._results=[],this.changes=new ya,this.length=0;const t=_o(),e=ga.prototype;e[t]||(e[t]=ma)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class wa{constructor(t){this.queryList=t,this.matches=null}clone(){return new wa(this.queryList)}setDirty(){this.queryList.setDirty()}}class _a{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new _a(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==Oa(t,e).matches&&this.queries[e].setDirty()}}class ba{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class Ea{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Ea(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class Ia{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new Ia(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){if(Array.isArray(this.metadata.predicate)){const n=this.metadata.predicate;for(let r=0;r<n.length;r++)this.matchTNodeWithReadOption(t,e,Ca(e,n[r]))}else{const n=this.metadata.predicate;n===Js?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,zn(e,t,n,!1,!1))}}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===As||r===Zs||r===Js&&0===e.type)this.addMatch(e.index,-2);else{const n=zn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ca(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Ta(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?Qi(As,t,e):0===t.type?$i(Js,As,t,e):null}(e,t):-2===n?function(t,e,n){return n===As?Qi(As,e,t):n===Js?$i(Js,As,e,t):n===Zs?Ki(Zs,As,e,t):void 0}(t,e,r):Qn(t,t[1],n,e)}function Sa(t,e,n,r){const i=e[5].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Ta(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Aa(t){const e=Ge(),n=ze(),r=nn();rn(r+1);const i=Oa(n,r);if(t.dirty&&je(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=Sa(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=9;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[5]){const e=a[5];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):Sa(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function Na(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(Ra(t,new ba(n,r,!1,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),xa(t,e)}(ze(),Ge(),e,n,r,0,Qe(),t)}function ka(){return t=Ge(),e=nn(),t[5].queries[e].queryList;var t,e}function xa(t,e){const n=new ga;!function(t,e,n,r){const i=yi(e);i.push(n),t.firstCreatePass&&mi(t).push(r,i.length-1)}(t,e,n,n.destroy),null===e[5]&&(e[5]=new _a),e[5].queries.push(new wa(n))}function Ra(t,e,n){null===t.queries&&(t.queries=new Ea),t.queries.track(new Ia(e,n))}function Oa(t,e){return t.queries.getByIndex(e)}function Da(t,e){return $i(Js,As,t,e)}const Pa=new jt("Application Initializer");let La=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Po(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Kt(Pa,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Ma=new jt("AppId"),Fa={provide:Ma,useFactory:function(){return`${Ua()}${Ua()}${Ua()}`},deps:[]};function Ua(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ja=new jt("Platform Initializer"),Va=new jt("Platform ID"),qa=new jt("appBootstrapListener");let Ha=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Ba=new jt("LocaleId"),Wa=new jt("DefaultCurrencyCode");class Ga{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const za=function(t){return new va(t)},Qa=za,$a=function(t){return Promise.resolve(za(t))},Ka=function(t){const e=za(t),n=Pn(Ee(t).declarations).reduce((t,e)=>{const n=_e(e);return n&&t.push(new oa(n)),t},[]);return new Ga(e,n)},Ya=Ka,Ja=function(t){return Promise.resolve(Ka(t))};let Xa=(()=>{class t{constructor(){this.compileModuleSync=Qa,this.compileModuleAsync=$a,this.compileModuleAndAllComponentsSync=Ya,this.compileModuleAndAllComponentsAsync=Ja}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Za=new jt("compilerOptions"),tu=(()=>Promise.resolve(0))();function eu(t){"undefined"==typeof Zone?tu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class nu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ya(!1),this.onMicrotaskEmpty=new ya(!1),this.onStable=new ya(!1),this.onError=new ya(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=Rt.requestAnimationFrame,e=Rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Rt,()=>{t.lastRequestAnimationFrameId=-1,su(t),ou(t)}),su(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return au(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),uu(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return au(t),e.invoke(r,i,o,s,a)}finally{uu(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,su(t),ou(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!nu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(nu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,iu,ru,ru);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function ru(){}const iu={};function ou(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function su(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function au(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function uu(t){t._nesting--,ou(t)}class cu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ya,this.onMicrotaskEmpty=new ya,this.onStable=new ya,this.onError=new ya}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let hu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{nu.assertNotInAngularZone(),eu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())eu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Kt(nu))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),lu=(()=>{class t{constructor(){this._applications=new Map,du.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return du.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class fu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let pu,du=new fu,vu=function(t,e,n){const r=new va(n);if(0===vo.size)return Promise.resolve(r);const i=function(t){const e=[];return t.forEach(t=>t&&e.push(...t)),e}(t.get(Za,[]).concat(e).map(t=>t.providers));if(0===i.length)return Promise.resolve(r);const o=function(){const t=Rt.ng;if(!t||!t.\u0275compilerFacade)throw new Error("Angular JIT compilation failed: '@angular/compiler' not loaded!\n  - JIT compilation is discouraged for production use-cases! Consider AOT mode instead.\n  - Did you bootstrap using '@angular/platform-browser-dynamic' or '@angular/platform-server'?\n  - Alternatively provide the compiler with 'import \"@angular/compiler\";' before bootstrapping.");return t.\u0275compilerFacade}(),s=fo.create({providers:i}).get(o.ResourceLoader);return function(t){const e=[],n=new Map;function r(t){let e=n.get(t);if(!e){const r=(t=>Promise.resolve(s.get(t)))(t);n.set(t,e=r.then(mo))}return e}return vo.forEach((t,n)=>{const i=[];t.templateUrl&&i.push(r(t.templateUrl).then(e=>{t.template=e}));const o=t.styleUrls,s=t.styles||(t.styles=[]),a=t.styles.length;o&&o.forEach((e,n)=>{s.push(""),i.push(r(e).then(r=>{s[a+n]=r,o.splice(o.indexOf(e),1),0==o.length&&(t.styleUrls=void 0)}))});const u=Promise.all(i).then(()=>function(t){yo.delete(t)}(n));e.push(u)}),vo=new Map,Promise.all(e).then(()=>{})}().then(()=>r)};const yu=new jt("AllowMultipleToken");class mu{constructor(t,e){this.name=t,this.token=e}}function gu(t,e,n=[]){const r=`Platform: ${e}`,i=new jt(r);return(e=[])=>{let o=wu();if(!o||o.injector.get(yu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Xi,useValue:"platform"});!function(t){if(pu&&!pu.destroyed&&!pu.injector.get(yu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");pu=t.get(_u);const e=t.get(ja,null);e&&e.forEach(t=>t())}(fo.create({providers:t,name:r}))}return function(t){const e=wu();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function wu(){return pu&&!pu.destroyed?pu:null}let _u=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new cu:("zone.js"===t?void 0:t)||new nu({enableLongStackTrace:or(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:nu,useValue:n}];return n.run(()=>{const e=fo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(tr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Iu(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return Po(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(La);return t.runInitializers(),t.donePromise.then(()=>(fa(i.injector.get(Ba,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=bu({},e);return vu(this.injector,n,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Eu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${Et(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. `+"Please define one of these.");t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Kt(fo))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function bu(t,e){return Array.isArray(e)?e.reduce(bu,t):Object.assign(Object.assign({},t),e)}let Eu=(()=>{class t{constructor(t,e,n,r,i,o){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=or(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new _(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),a=new _(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{nu.assertNotInAngularZone(),eu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{nu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=$(s,a.pipe(nt()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Cs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Zt),i=n.create(fo.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(hu,null);return o&&i.injector.get(lu).registerApplication(i.location.nativeElement,o),this._loadComponent(i),or()&&this._console.log("Angular is running in the development mode. Call enableProdMode() to enable the production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Iu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(qa,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Iu(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Kt(nu),Kt(Ha),Kt(fo),Kt(tr),Kt(Ss),Kt(La))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function Iu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Cu{}class Tu{}const Su={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Au=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Su}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>Nu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>Nu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Kt(Xa),Kt(Tu,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function Nu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const ku=gu(null,"core",[{provide:Va,useValue:"unknown"},{provide:_u,deps:[fo]},{provide:lu,deps:[]},{provide:Ha,deps:[]}]),xu=[{provide:Eu,useClass:Eu,deps:[nu,Ha,fo,tr,Ss,La]},{provide:ia,deps:[nu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:La,useClass:La,deps:[[new st,Pa]]},{provide:Xa,useClass:Xa,deps:[]},Fa,{provide:zs,useFactory:function(){return Ks},deps:[]},{provide:Qs,useFactory:function(){return Ys},deps:[]},{provide:Ba,useFactory:function(t){return fa(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new ot(Ba),new st,new ut]]},{provide:Wa,useValue:"USD"}];let Ru=(()=>{class t{constructor(t){}}return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)(Kt(Eu))},providers:xu}),t})();const Ou={apiKey:"AIzaSyDOd8tr1FLXKcNWIWmgUs6DZrOIXiz04m4",authDomain:"oshop-412b3.firebaseapp.com",databaseURL:"https://oshop-412b3.firebaseio.com",projectId:"oshop-412b3",storageBucket:"oshop-412b3.appspot.com",messagingSenderId:"822805620874",appId:"1:822805620874:web:160227e5d152f8246b6573",measurementId:"G-VFN3JR6WCY"};let Du=null;function Pu(){return Du}const Lu=new jt("DocumentToken");let Mu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:Fu,token:t,providedIn:"platform"}),t})();function Fu(){return Kt(ju)}const Uu=new jt("Location Initialized");let ju=(()=>{class t extends Mu{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=Pu().getLocation(),this._history=Pu().getHistory()}getBaseHrefFromDOM(){return Pu().getBaseHref(this._doc)}onPopState(t){Pu().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){Pu().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Vu()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Vu()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(Kt(Lu))},t.\u0275prov=ft({factory:qu,token:t,providedIn:"platform"}),t})();function Vu(){return!!window.history.pushState}function qu(){return new ju(Kt(Lu))}function Hu(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Bu(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Wu(t){return t&&"?"!==t[0]?"?"+t:t}let Gu=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:zu,token:t,providedIn:"root"}),t})();function zu(t){const e=Kt(Lu).location;return new $u(Kt(Mu),e&&e.origin||"")}const Qu=new jt("appBaseHref");let $u=(()=>{class t extends Gu{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Hu(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Wu(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+Wu(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+Wu(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Mu),Kt(Qu,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Ku=(()=>{class t extends Gu{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Hu(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+Wu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+Wu(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(Kt(Mu),Kt(Qu,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Yu=(()=>{class t{constructor(t,e){this._subject=new ya,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Bu(Xu(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Wu(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Xu(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wu(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Wu(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)})}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(Kt(Gu),Kt(Mu))},t.normalizeQueryParams=Wu,t.joinWithSlash=Hu,t.stripTrailingSlash=Bu,t.\u0275prov=ft({factory:Ju,token:t,providedIn:"root"}),t})();function Ju(){return new Yu(Kt(Gu),Kt(Mu))}function Xu(t){return t.replace(/\/index.html$/,"")}const Zu=function(){var t={Zero:0,One:1,Two:2,Few:3,Many:4,Other:5};return t[t.Zero]="Zero",t[t.One]="One",t[t.Two]="Two",t[t.Few]="Few",t[t.Many]="Many",t[t.Other]="Other",t}();class tc{}let ec=(()=>{class t extends tc{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=ca(e);if(n)return n;const r=e.split("-")[0];if(n=ca(r),n)return n;if("en"===r)return aa;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[ha.PluralCase]}(e||this.locale)(t)){case Zu.Zero:return"zero";case Zu.One:return"one";case Zu.Two:return"two";case Zu.Few:return"few";case Zu.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(Kt(Ba))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),nc=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new rc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ic("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ic("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Ao(Zs),Ao(Js))},t.\u0275dir=we({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class rc{constructor(){this.$implicit=null,this.ngIf=null}}function ic(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Et(e)}'.`)}let oc=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},providers:[{provide:tc,useClass:ec}]}),t})();function sc(t){return"server"===t}let ac=(()=>{class t{}return t.\u0275prov=ft({token:t,providedIn:"root",factory:()=>new uc(Kt(Lu),window,Kt(tr))}),t})();class uc{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportScrollRestoration()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportScrollRestoration()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportScrollRestoration()){t=this.window.CSS&&this.window.CSS.escape?this.window.CSS.escape(t):t.replace(/(\"|\'\ |:|\.|\[|\]|,|=)/g,"\\$1");try{const e=this.document.querySelector(`#${t}`);if(e)return void this.scrollToElement(e);const n=this.document.querySelector(`[name='${t}']`);if(n)return void this.scrollToElement(n)}catch(e){this.errorHandler.handleError(e)}}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{return!!this.window&&!!this.window.scrollTo}catch(t){return!1}}}class cc extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new cc,Du||(Du=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=lc||(lc=document.querySelector("base"),lc)?lc.getAttribute("href"):null;return null==e?null:(n=e,hc||(hc=document.createElement("a")),hc.setAttribute("href",n),"/"===hc.pathname.charAt(0)?hc.pathname:"/"+hc.pathname);var n}resetBaseElement(){lc=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let hc,lc=null;const fc=new jt("TRANSITION_ID"),pc=[{provide:Pa,useFactory:function(t,e,n){return()=>{n.get(La).donePromise.then(()=>{const n=Pu();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[fc,Lu,fo],multi:!0}];class dc{static init(){var t;t=new dc,du=t}addToWindow(t){Rt.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},Rt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Rt.getAllAngularRootElements=()=>t.getAllRootElements(),Rt.frameworkStabilizers||(Rt.frameworkStabilizers=[]),Rt.frameworkStabilizers.push(t=>{const e=Rt.getAllAngularTestabilities();let n=e.length,r=!1;const i=function(e){r=r||e,n--,0==n&&t(r)};e.forEach((function(t){t.whenStable(i)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?Pu().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const vc=new jt("EventManagerPlugins");let yc=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(Kt(vc),Kt(nu))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class mc{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=Pu().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let gc=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),wc=(()=>{class t extends gc{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>Pu().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(Kt(Lu))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const _c={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bc=/%COMP%/g;function Ec(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ec(t,i,n):(i=i.replace(bc,t),n.push(i))}return n}function Ic(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Cc=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Tc(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case ce.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Sc(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case ce.Native:case ce.ShadowDom:return new Ac(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=Ec(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(Kt(yc),Kt(wc),Kt(Ma))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();class Tc{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(_c[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=_c[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=_c[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&xs.DashCase?t.style.setProperty(e,n,r&xs.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&xs.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ic(n)):this.eventManager.addEventListener(t,e,Ic(n))}}class Sc extends Tc{constructor(t,e,n,r){super(t),this.component=n;const i=Ec(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(bc,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(bc,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Ac extends Tc{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=r,this.shadowRoot=r.encapsulation===ce.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const i=Ec(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Nc=(()=>{class t extends mc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(Kt(Lu))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const kc=["alt","control","meta","shift"],xc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rc={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Oc={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Dc=(()=>{class t extends mc{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pu().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(kc.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Rc.hasOwnProperty(e)&&(e=Rc[e]))}return xc[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),kc.forEach(r=>{r!=n&&(0,Oc[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(Kt(Lu))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();const Pc=gu(ku,"browser",[{provide:Va,useValue:"browser"},{provide:ja,useValue:function(){cc.makeCurrent(),dc.init()},multi:!0},{provide:Lu,useFactory:function(){return function(t){xe=t}(document),document},deps:[]}]),Lc=[[],{provide:Xi,useValue:"root"},{provide:tr,useFactory:function(){return new tr},deps:[]},{provide:vc,useClass:Nc,multi:!0,deps:[Lu,nu,Va]},{provide:vc,useClass:Dc,multi:!0,deps:[Lu]},[],{provide:Cc,useClass:Cc,deps:[yc,wc,Ma]},{provide:ks,useExisting:Cc},{provide:gc,useExisting:wc},{provide:wc,useClass:wc,deps:[Lu]},{provide:hu,useClass:hu,deps:[nu]},{provide:yc,useClass:yc,deps:[vc,nu]},[]];let Mc=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Ma,useValue:e.appId},{provide:fc,useExisting:Ma},pc]}}}return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)(Kt(t,12))},providers:Lc,imports:[oc,Ru]}),t})();"undefined"!=typeof window&&window;let Fc=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Uc=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)}}),t})(),jc=(()=>{class t{}return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},providers:[Fc],imports:[Uc]}),t})();class Vc extends T{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new E;return this._value}next(t){super.next(this._value=t)}}const qc={};class Hc{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Bc(t,this.resultSelector))}}class Bc extends M{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(qc),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(L(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const o=this.values,s=this.toRespond?o[n]===qc?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Wc extends l{constructor(t,e){super()}schedule(t,e=0){return this}}class Gc extends Wc{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let zc=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Qc extends zc{constructor(t,e=zc.now){super(t,()=>Qc.delegate&&Qc.delegate!==this?Qc.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Qc.delegate&&Qc.delegate!==this?Qc.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}const $c=new Qc(Gc);function Kc(t,e,n,i){return r(n)&&(i=n,n=void 0),i?Kc(t,e,n).pipe(F(t=>u(t)?i(...t):i(t))):new _(r=>{!function t(e,n,r,i,o){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){const t=e;e.addEventListener(n,r,o),s=()=>t.removeEventListener(n,r,o)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){const t=e;e.on(n,r),s=()=>t.off(n,r)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){const t=e;e.addListener(n,r),s=()=>t.removeListener(n,r)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,a=e.length;s<a;s++)t(e[s],n,r,i,o)}i.add(s)}(t,e,(function(t){r.next(arguments.length>1?Array.prototype.slice.call(arguments):t)}),r,n)})}class Yc{call(t,e){return e.subscribe(new Jc(t))}}class Jc extends M{constructor(t){super(t),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(t){this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(let n=0;n<e&&!this.hasFirst;n++){let e=t[n],r=L(this,e,e,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}}notifyNext(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(let t=0;t<this.subscriptions.length;t++)if(t!==n){let e=this.subscriptions[t];e.unsubscribe(),this.remove(e)}this.subscriptions=null}this.destination.next(e)}}function Xc(...t){let e=t[t.length-1];return A(e)?(t.pop(),V(t,e)):Q(t)}function Zc(){return z(1)}function th(...t){return Zc()(Xc(...t))}class eh{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new nh(t,this.compare,this.keySelector))}}class nh extends d{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}function rh(t,e){return"function"==typeof e?n=>n.pipe(rh((n,r)=>q(t(n,r)).pipe(F((t,i)=>e(n,t,r,i))))):e=>e.lift(new ih(t))}class ih{constructor(t){this.project=t}call(t,e){return e.subscribe(new oh(t,this.project))}}class oh extends M{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new N(this,e,n),o=this.destination;o.add(i),this.innerSubscription=L(this,t,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}function sh(t){return e=>e.lift(new ah(t))}class ah{constructor(t){this.notifier=t}call(t,e){const n=new uh(t),r=L(n,this.notifier);return r&&!n.seenValue?(n.add(r),e.subscribe(n)):n}}class uh extends M{constructor(t){super(t),this.seenValue=!1}notifyNext(t,e,n,r,i){this.seenValue=!0,this.complete()}notifyComplete(){}}function ch(t,e){return function(n){return n.lift(new hh(t,e))}}class hh{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new lh(t,this.predicate,this.thisArg))}}class lh extends d{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const fh=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})(),ph=new _(t=>t.complete());function dh(t){return t?function(t){return new _(e=>t.schedule(()=>e.complete()))}(t):ph}function vh(t){return e=>0===t?dh():e.lift(new yh(t))}class yh{constructor(t){if(this.total=t,this.total<0)throw new fh}call(t,e){return e.subscribe(new mh(t,this.total))}}class mh extends d{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function gh(t,e,n){return function(r){return r.lift(new wh(t,e,n))}}class wh{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new _h(t,this.nextOrObserver,this.error,this.complete))}}class _h extends d{constructor(t,e,n,i){super(t),this._tapNext=m,this._tapError=m,this._tapComplete=m,this._tapError=n||m,this._tapComplete=i||m,r(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||m,this._tapError=e.error||m,this._tapComplete=e.complete||m)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function bh(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Eh(t,n))}}class Eh{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Ih(t,this.observables,this.project))}}class Ih extends M{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let t=e[i];this.add(L(this,t,t,i))}}notifyNext(t,e,n,r,i){this.values[n]=e;const o=this.toRespond;if(o.length>0){const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}let Ch=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Xc(this.value);case"E":return t=this.error,new _(e=>e.error(t));case"C":return dh()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function Th(t,e=$c){var n;const r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return t=>t.lift(new Sh(r,e))}class Sh{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new Ah(t,this.delay,this.scheduler))}}class Ah extends d{constructor(t,e,n){super(t),this.delay=e,this.scheduler=n,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,n=e.queue,r=t.scheduler,i=t.destination;for(;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){const e=Math.max(0,n[0].time-r.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(Ah.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,n=new Nh(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(Ch.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(Ch.createComplete()),this.unsubscribe()}}class Nh{constructor(t,e){this.time=t,this.notification=e}}$localize`:@@ngb.alert.closef4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c87819314041543176992:Close`;const kh=["*"];$localize`:@@ngb.carousel.previous680d5c75b7fd8d37961083608b9fcdc4167b4c434452427314943113135:Previous`,$localize`:@@ngb.carousel.nextf732c304c7433e5a83ffcd862c3dce709a0f49823885497195825665706:Next`,$localize`:@@ngb.datepicker.previous-monthc3b08b07b5ab98e7cdcf18df39355690ab7d38848586908745456864217:Previous month`,$localize`:@@ngb.datepicker.previous-monthc3b08b07b5ab98e7cdcf18df39355690ab7d38848586908745456864217:Previous month`,$localize`:@@ngb.datepicker.next-month4bd046985cfe13040d5ef0cd881edce0968a111a3628374603023447227:Next month`,$localize`:@@ngb.datepicker.next-month4bd046985cfe13040d5ef0cd881edce0968a111a3628374603023447227:Next month`,$localize`:@@ngb.datepicker.select-month1dbc84807f35518112f62e5775d1daebd3d8462b2253869508135064750:Select month`,$localize`:@@ngb.datepicker.select-month1dbc84807f35518112f62e5775d1daebd3d8462b2253869508135064750:Select month`,$localize`:@@ngb.datepicker.select-year8ceb09d002bf0c5d1cac171dfbffe1805d2b39628852264961585484321:Select year`,$localize`:@@ngb.datepicker.select-year8ceb09d002bf0c5d1cac171dfbffe1805d2b39628852264961585484321:Select year`;const xh=["dialog"];function Rh(t){return null!=t}$localize`:@@ngb.pagination.first656506dfd46380956a655f919f1498d018f75ca06867721956102594380:`,$localize`:@@ngb.pagination.previous6e52b6ee77a4848d899dd21b591c6fd499e3aef36479320895410098858:`,$localize`:@@ngb.pagination.nextba9cbb4ff311464308a3627e4f1c3345d9fe6d7d5458177150283468089:`,$localize`:@@ngb.pagination.last49f27a460bc97e7e00be5b37098bfa79884fc7d95277020320267646988:`,$localize`:@@ngb.pagination.first-ariaf2f852318759c6396b5d3d17031d53817d7b38cc2241508602425256033:First`,$localize`:@@ngb.pagination.previous-aria680d5c75b7fd8d37961083608b9fcdc4167b4c434452427314943113135:Previous`,$localize`:@@ngb.pagination.next-ariaf732c304c7433e5a83ffcd862c3dce709a0f49823885497195825665706:Next`,$localize`:@@ngb.pagination.last-aria5c729788ba138508aca1bec050b610f7bf81db3e4882268002141858767:Last`,$localize`:@@ngb.progressbar.value04d611d19c117c60c9e14d0a04399a027184bc775214781723415385277:${"\ufffd0\ufffd"}:INTERPOLATION:%`,$localize`:@@ngb.timepicker.HHce676ab1d6d98f85c836381cf100a4a91ef95a1f4043638465245303811:HH`,$localize`:@@ngb.timepicker.hours3bbce5fef7e1151da052a4e529453edb340e39128070396816726827304:Hours`,$localize`:@@ngb.timepicker.MM72c8edf6a50068a05bde70991e36b1e881f4ca541647282246509919852:MM`,$localize`:@@ngb.timepicker.minutes41e62daa962947c0d23ded0981975d1bddf0bf385531237363767747080:Minutes`,$localize`:@@ngb.timepicker.increment-hourscb74bc1d625a6c1742f0d7d47306cf495780c2185939278348542933629:Increment hours`,$localize`:@@ngb.timepicker.decrement-hours147c7a19429da7d999e247d22e33fee370b1691b3651829882940481818:Decrement hours`,$localize`:@@ngb.timepicker.increment-minutesf5a4a3bc05e053f6732475d0e74875ec01c3a348180147720391025024:Increment minutes`,$localize`:@@ngb.timepicker.decrement-minutesc1a6899e529c096da5b660385d4e77fe1f7ad2717447789825403243588:Decrement minutes`,$localize`:@@ngb.timepicker.SSebe38d36a40a2383c5fefa9b4608ffbda08bd4a33628127143071124194:SS`,$localize`:@@ngb.timepicker.seconds4f2ed9e71a7c981db3e50ae2fedb28aff2ec4e6c8874012390997067175:Seconds`,$localize`:@@ngb.timepicker.increment-seconds912322ecee7d659d04dcf494a70e22e49d334b265364772110539092174:Increment seconds`,$localize`:@@ngb.timepicker.decrement-seconds5db47ac104294243a70eb9124fbea9d0004ddf69753633511487974857:Decrement seconds`,$localize`:@@ngb.timepicker.PM8d6e691e10306c1b34c6b26805151aaea320ef7f3564199131264287502:${"\ufffd0\ufffd"}:INTERPOLATION:`,$localize`:@@ngb.timepicker.AM69a1f176a93998876952adac57c3bc3863b6105e4592818992509942761:${"\ufffd0\ufffd"}:INTERPOLATION:`,$localize`:@@ngb.toast.close-ariaf4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c87819314041543176992:Close`,"undefined"==typeof Element||Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});let Oh=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})(),Dh=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})(),Ph=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)}}),t})(),Lh=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})(),Mh=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)}}),t})();var Fh=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.PageUp=33]="PageUp",t[t.PageDown=34]="PageDown",t[t.End=35]="End",t[t.Home=36]="Home",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown",t}({});const Uh=(t,e)=>!!e&&e.some(e=>e.contains(t)),jh=(t,e)=>!e||null!=function(t,e){return e?t.closest(e):null}(t,e),Vh=(()=>"undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent)))();const qh=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Hh(t){const e=Array.from(t.querySelectorAll(qh)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}class Bh{getAllStyles(t){return window.getComputedStyle(t)}getStyle(t,e){return this.getAllStyles(t)[e]}isStaticPositioned(t){return"static"===(this.getStyle(t,"position")||"static")}offsetParent(t){let e=t.offsetParent||document.documentElement;for(;e&&e!==document.documentElement&&this.isStaticPositioned(e);)e=e.offsetParent;return e||document.documentElement}position(t,e=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(t,"position"))n=t.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const e=this.offsetParent(t);n=this.offset(t,!1),e!==document.documentElement&&(r=this.offset(e,!1)),r.top+=e.clientTop,r.left+=e.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,e&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(t,e=!0){const n=t.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let o={height:n.height||t.offsetHeight,width:n.width||t.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return e&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}positionElements(t,e,n,r){const[i="top",o="center"]=n.split("-"),s=r?this.offset(t,!1):this.position(t,!1),a=this.getAllStyles(e),u=parseFloat(a.marginTop),c=parseFloat(a.marginBottom),h=parseFloat(a.marginLeft),l=parseFloat(a.marginRight);let f=0,p=0;switch(i){case"top":f=s.top-(e.offsetHeight+u+c);break;case"bottom":f=s.top+s.height;break;case"left":p=s.left-(e.offsetWidth+h+l);break;case"right":p=s.left+s.width}switch(o){case"top":f=s.top;break;case"bottom":f=s.top+s.height-e.offsetHeight;break;case"left":p=s.left;break;case"right":p=s.left+s.width-e.offsetWidth;break;case"center":"top"===i||"bottom"===i?p=s.left+s.width/2-e.offsetWidth/2:f=s.top+s.height/2-e.offsetHeight/2}e.style.transform=`translate(${Math.round(p)}px, ${Math.round(f)}px)`;const d=e.getBoundingClientRect(),v=document.documentElement,y=window.innerHeight||v.clientHeight,m=window.innerWidth||v.clientWidth;return d.left>=0&&d.top>=0&&d.right<=m&&d.bottom<=y}}const Wh=/\s+/,Gh=new Bh;let zh=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc,jc]]}),t})(),Qh=(()=>{let t=class{constructor(){this.autoClose=!0,this.placement=["bottom-left","bottom-right","top-left","top-right"]}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})();var $h;let Kh=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=we({type:t,selectors:[["",8,"navbar"]]}),t})(),Yh=(()=>{let t=class{constructor(t){this.elementRef=t,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t}get disabled(){return this._disabled}};return t.\u0275fac=function(e){return new(e||t)(Ao(As))},t.\u0275dir=we({type:t,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:2,hostBindings:function(t,e){2&t&&zo("disabled",e.disabled)},inputs:{disabled:"disabled"}}),t})(),Jh=(()=>{let t=class{constructor(t){this.dropdown=t,this.placement="bottom",this.isOpen=!1}};return t.\u0275fac=function(e){return new(e||t)(Ao(Tt(()=>tl)))},t.\u0275dir=we({type:t,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,e,n){var r;1&t&&Na(n,Yh,!1),2&t&&Aa(r=ka())&&(e.menuItems=r)},hostVars:5,hostBindings:function(t,e){1&t&&Lo("keydown.ArrowUp",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.ArrowDown",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Home",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.End",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Enter",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Space",(function(t){return e.dropdown.onKeyDown(t)})),2&t&&(To("x-placement",e.placement),zo("dropdown-menu",!0)("show",e.dropdown.isOpen()))}}),t})(),Xh=(()=>{let t=class{constructor(t,e){this.dropdown=t,this._elementRef=e,this.anchorEl=e.nativeElement}getNativeElement(){return this._elementRef.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Ao(Tt(()=>tl)),Ao(As))},t.\u0275dir=we({type:t,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:["aria-haspopup","true",1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){2&t&&To("aria-expanded",e.dropdown.isOpen())}}),t})(),Zh=(()=>{let t=$h=class extends Xh{constructor(t,e){super(t,e)}};return t.\u0275fac=function(e){return new(e||t)(Ao(Tt(()=>tl)),Ao(As))},t.\u0275dir=we({type:t,selectors:[["","ngbDropdownToggle",""]],hostAttrs:["aria-haspopup","true",1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,e){1&t&&Lo("click",(function(){return e.dropdown.toggle()}))("keydown.ArrowUp",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.ArrowDown",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.Home",(function(t){return e.dropdown.onKeyDown(t)}))("keydown.End",(function(t){return e.dropdown.onKeyDown(t)})),2&t&&To("aria-expanded",e.dropdown.isOpen())},features:[Is([{provide:Xh,useExisting:Tt(()=>$h)}]),as]}),t})(),tl=(()=>{let t=class{constructor(t,e,n,r,i,o,s){this._changeDetector=t,this._document=n,this._ngZone=r,this._elementRef=i,this._renderer=o,this._closed$=new T,this._open=!1,this.openChange=new ya,this.placement=e.placement,this.container=e.container,this.autoClose=e.autoClose,this.display=s?"static":"dynamic",this._zoneSubscription=r.onStable.subscribe(()=>{this._positionMenu()})}ngAfterContentInit(){this._ngZone.onStable.pipe(vh(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.isFirstChange&&this._applyPlacementClasses()}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers())}_setCloseHandlers(){const t=this._anchor;!function(t,e,n,r,i,o,s,a){var c;n&&t.runOutsideAngular((c=()=>{const c=Kc(e,"keydown").pipe(sh(i),ch(t=>t.which===Fh.Escape),gh(t=>t.preventDefault())),h=Kc(e,"mousedown").pipe(F(t=>{const e=t.target;return 2!==t.button&&!Uh(e,s)&&("inside"===n?Uh(e,o)&&jh(e,a):"outside"===n?!Uh(e,o):jh(e,a)||!Uh(e,o))}),sh(i));(function(...t){if(1===t.length){if(!u(t[0]))return t[0];t=t[0]}return Q(t,void 0).lift(new Yc)})([c,Kc(e,"mouseup").pipe(bh(h),ch(([t,e])=>e),Th(0),sh(i))]).subscribe(()=>t.run(r))},Vh?()=>setTimeout(()=>c(),100):c))}(this._ngZone,this._document,this.autoClose,()=>this.close(),this._closed$,this._menu?[this._menuElement.nativeElement]:[],t?[t.getNativeElement()]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._closed$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this._resetContainer(),this._closed$.next(),this._zoneSubscription.unsubscribe()}onKeyDown(t){const e=t.which,n=this._getMenuElements();let r=-1,i=!1,o=null;const s=this._isEventFromToggle(t);if(!s&&n.length&&n.forEach((e,n)=>{e.contains(t.target)&&(i=!0,o=e),e===this._document.activeElement&&(r=n)}),e!==Fh.Space&&e!==Fh.Enter){if(s||i){if(this.open(),n.length){switch(e){case Fh.ArrowDown:r=Math.min(r+1,n.length-1);break;case Fh.ArrowUp:if(this._isDropup()&&-1===r){r=n.length-1;break}r=Math.max(r-1,0);break;case Fh.Home:r=0;break;case Fh.End:r=n.length-1}n[r].focus()}t.preventDefault()}}else!i||!0!==this.autoClose&&"inside"!==this.autoClose||Kc(o,"click").pipe(vh(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.getNativeElement().contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(t=>!t.disabled).map(t=>t.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&this._applyPlacementClasses("dynamic"===this.display?function(t,e,n,r,i){let o=Array.isArray(n)?n:n.split(Wh);const s=["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"],a=t=>{const[e,n]=t.split("-"),r=[];return r};let u=o.findIndex(t=>"auto"===t);u>=0&&s.forEach((function(t){null==o.find(e=>-1!==e.search("^"+t))&&o.splice(u++,1,t)}));const c=e.style;let h;c.position="absolute",c.top="0",c.left="0",c["will-change"]="transform";let l=!1;for(h of o){a(h);if(Gh.positionElements(t,e,h,r)){l=!0;break}}return l||(h=o[0],a(h),Gh.positionElements(t,e,h,r)),h}(this._anchor.anchorEl,this._bodyContainer||this._menuElement.nativeElement,this.placement,"body"===this.container):this._getFirstPlacement(this.placement))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer,e=this._menuElement;if(e){const n=e.nativeElement;t.appendChild(this._elementRef.nativeElement,n),t.removeStyle(n,"position"),t.removeStyle(n,"transform")}this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const t=this._renderer,e=this._menuElement.nativeElement,n=this._bodyContainer=this._bodyContainer||t.createElement("div");t.setStyle(n,"position","absolute"),t.setStyle(e,"position","static"),t.setStyle(n,"z-index","1050"),t.appendChild(n,e),t.appendChild(this._document.body,n)}}_applyPlacementClasses(t){const e=this._menu;if(e){t||(t=this._getFirstPlacement(this.placement));const n=this._renderer,r=this._elementRef.nativeElement;n.removeClass(r,"dropup"),n.removeClass(r,"dropdown"),e.placement="static"===this.display?null:t;const i=-1!==t.search("^top")?"dropup":"dropdown";n.addClass(r,i);const o=this._bodyContainer;o&&(n.removeClass(o,"dropup"),n.removeClass(o,"dropdown"),n.addClass(o,i))}}};return t.\u0275fac=function(e){return new(e||t)(Ao(Yi),Ao(Qh),Ao(Lu),Ao(nu),Ao(As),Ao(Rs),Ao(Kh,8))},t.\u0275dir=we({type:t,selectors:[["","ngbDropdown",""]],contentQueries:function(t,e,n){var r;1&t&&(Na(n,Jh,!0),Na(n,Jh,!0,As),Na(n,Xh,!0)),2&t&&(Aa(r=ka())&&(e._menu=r.first),Aa(r=ka())&&(e._menuElement=r.first),Aa(r=ka())&&(e._anchor=r.first))},hostVars:2,hostBindings:function(t,e){2&t&&zo("show",e.isOpen())},inputs:{_open:["open","_open"],placement:"placement",container:"container",autoClose:"autoClose",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[ps]}),t})(),el=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)}}),t})(),nl=(()=>{let t=class{constructor(){this.backdrop=!0,this.keyboard=!0}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ft({factory:function(){return new t},token:t,providedIn:"root"}),t})();class rl{constructor(t,e,n){this.nodes=t,this.viewRef=e,this.componentRef=n}}const il=()=>{};let ol=(()=>{let t=class{constructor(t){this._document=t}compensate(){const t=this._getWidth();return this._isPresent(t)?this._adjustBody(t):il}_adjustBody(t){const e=this._document.body,n=e.style.paddingRight,r=parseFloat(window.getComputedStyle(e)["padding-right"]);return e.style["padding-right"]=`${r+t}px`,()=>e.style["padding-right"]=n}_isPresent(t){const e=this._document.body.getBoundingClientRect();return window.innerWidth-(e.left+e.right)>=t-.1*t}_getWidth(){const t=this._document.createElement("div");t.className="modal-scrollbar-measure";const e=this._document.body;e.appendChild(t);const n=t.getBoundingClientRect().width-t.clientWidth;return e.removeChild(t),n}};return t.\u0275fac=function(e){return new(e||t)(Kt(Lu))},t.\u0275prov=ft({factory:function(){return new t(Kt(Lu))},token:t,providedIn:"root"}),t})(),sl=(()=>{let t=class{};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:2,hostBindings:function(t,e){2&t&&Qo("modal-backdrop fade show"+(e.backdropClass?" "+e.backdropClass:""))},inputs:{backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})();class al{close(t){}dismiss(t){}}class ul{constructor(t,e,n,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=n,this._beforeDismiss=r,t.instance.dismissEvent.subscribe(t=>{this.dismiss(t)}),this.result=new Promise((t,e)=>{this._resolve=t,this._reject=e}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}close(t){this._windowCmptRef&&(this._resolve(t),this._removeModalElements())}_dismiss(t){this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();e&&e.then?e.then(e=>{!1!==e&&this._dismiss(t)},()=>{}):!1!==e&&this._dismiss(t)}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.location.nativeElement;if(t.parentNode.removeChild(t),this._windowCmptRef.destroy(),this._backdropCmptRef){const t=this._backdropCmptRef.location.nativeElement;t.parentNode.removeChild(t),this._backdropCmptRef.destroy()}this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._backdropCmptRef=null,this._contentRef=null}}var cl=function(t){return t[t.BACKDROP_CLICK=0]="BACKDROP_CLICK",t[t.ESC=1]="ESC",t}({});let hl=(()=>{let t=class{constructor(t,e,n){this._document=t,this._elRef=e,this._zone=n,this._closed$=new T,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new ya}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement}ngAfterViewInit(){const{nativeElement:t}=this._elRef;if(this._zone.runOutsideAngular(()=>{Kc(t,"keydown").pipe(sh(this._closed$),ch(t=>t.which===Fh.Escape&&this.keyboard)).subscribe(t=>requestAnimationFrame(()=>{t.defaultPrevented||this._zone.run(()=>this.dismiss(cl.ESC))}));let e=!1;Kc(this._dialogEl.nativeElement,"mousedown").pipe(sh(this._closed$),gh(()=>e=!1),rh(()=>Kc(t,"mouseup").pipe(sh(this._closed$),vh(1))),ch(({target:e})=>t===e)).subscribe(()=>{e=!0}),Kc(t,"click").pipe(sh(this._closed$)).subscribe(({target:n})=>{!0!==this.backdrop||t!==n||e||this._zone.run(()=>this.dismiss(cl.BACKDROP_CLICK)),e=!1})}),!t.contains(document.activeElement)){const e=t.querySelector("[ngbAutofocus]"),n=Hh(t)[0];(e||n||t).focus()}}ngOnDestroy(){const t=this._document.body,e=this._elWithFocus;let n;n=e&&e.focus&&t.contains(e)?e:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null}),this._closed$.next()}};return t.\u0275fac=function(e){return new(e||t)(Ao(Lu),Ao(As),Ao(nu))},t.\u0275cmp=pe({type:t,selectors:[["ngb-modal-window"]],viewQuery:function(t,e){var n,r,i,o;1&t&&(r=xh,i=!0,function(t,e,n,r,i,o){t.firstCreatePass&&(Ra(t,new ba(n,r,!0,i),-1),t.staticViewQueries=!0),xa(t,e)}(ze(),Ge(),r,i,o)),2&t&&Aa(n=ka())&&(e._dialogEl=n.first)},hostAttrs:["role","dialog","tabindex","-1"],hostVars:4,hostBindings:function(t,e){2&t&&(To("aria-modal",!0)("aria-labelledby",e.ariaLabelledBy),Qo("modal fade show d-block"+(e.windowClass?" "+e.windowClass:"")))},inputs:{backdrop:"backdrop",keyboard:"keyboard",ariaLabelledBy:"ariaLabelledBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:kh,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,e){1&t&&(function(t){const e=Ge()[16][6];if(!e.projection){const t=e.projection=ie(1,null),n=t.slice();let r=e.child;for(;null!==r;){const e=0;null!==e&&(n[e]?n[e].projectionNext=r:t[e]=r,n[e]=r),r=r.next}}}(),Ro(0,"div",0,1),Ro(2,"div",2),function(t,e=0,n){const r=Ge(),i=ze(),o=Lr(i,r[6],t,1,null,n||null);null===o.projection&&(o.projection=e),Ye(),function(t,e,n){ji(e[11],0,e,n,ki(t,n,e),Pi(n.parent||e[6],e))}(i,r,o)}(3),Oo(),Oo()),2&t&&Qo("modal-dialog"+(e.size?" modal-"+e.size:"")+(e.centered?" modal-dialog-centered":"")+(e.scrollable?" modal-dialog-scrollable":""))},styles:["ngb-modal-window .component-host-scrollable{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow:hidden}"],encapsulation:2}),t})(),ll=(()=>{let t=class{constructor(t,e,n,r,i,o){this._applicationRef=t,this._injector=e,this._document=n,this._scrollBar=r,this._rendererFactory=i,this._ngZone=o,this._activeWindowCmptHasChanged=new T,this._ariaHiddenValues=new Map,this._backdropAttributes=["backdropClass"],this._modalRefs=[],this._windowAttributes=["ariaLabelledBy","backdrop","centered","keyboard","scrollable","size","windowClass"],this._windowCmpts=[],this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const t=this._windowCmpts[this._windowCmpts.length-1];((t,e,n,r=!1)=>{this._ngZone.runOutsideAngular(()=>{const t=Kc(e,"focusin").pipe(sh(n),F(t=>t.target));Kc(e,"keydown").pipe(sh(n),ch(t=>t.which===Fh.Tab),bh(t)).subscribe(([t,n])=>{const[r,i]=Hh(e);n!==r&&n!==e||!t.shiftKey||(i.focus(),t.preventDefault()),n!==i||t.shiftKey||(r.focus(),t.preventDefault())}),r&&Kc(e,"click").pipe(sh(n),bh(t),F(t=>t[1])).subscribe(t=>t.focus())})})(0,t.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(t.location.nativeElement)}})}open(t,e,n,r){const i=r.container instanceof HTMLElement?r.container:Rh(r.container)?this._document.querySelector(r.container):this._document.body,o=this._rendererFactory.createRenderer(null,null),s=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(o.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const u=new al,c=this._getContentRef(t,r.injector||e,n,u,r);let h=!1!==r.backdrop?this._attachBackdrop(t,i):null,l=this._attachWindowComponent(t,i,c),f=new ul(l,c,h,r.beforeDismiss);return this._registerModalRef(f),this._registerWindowCmpt(l),f.result.then(s,s),f.result.then(a,a),u.close=t=>{f.close(t)},u.dismiss=t=>{f.dismiss(t)},this._applyWindowOptions(l.instance,r),1===this._modalRefs.length&&o.addClass(this._document.body,"modal-open"),h&&h.instance&&this._applyBackdropOptions(h.instance,r),f}dismissAll(t){this._modalRefs.forEach(e=>e.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,e){let n=t.resolveComponentFactory(sl).create(this._injector);return this._applicationRef.attachView(n.hostView),e.appendChild(n.location.nativeElement),n}_attachWindowComponent(t,e,n){let r=t.resolveComponentFactory(hl).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),e.appendChild(r.location.nativeElement),r}_applyWindowOptions(t,e){this._windowAttributes.forEach(n=>{Rh(e[n])&&(t[n]=e[n])})}_applyBackdropOptions(t,e){this._backdropAttributes.forEach(n=>{Rh(e[n])&&(t[n]=e[n])})}_getContentRef(t,e,n,r,i){return n?n instanceof Js?this._createFromTemplateRef(n,r):"string"==typeof n?this._createFromString(n):this._createFromComponent(t,e,n,r,i):new rl([])}_createFromTemplateRef(t,e){const n=t.createEmbeddedView({$implicit:e,close(t){e.close(t)},dismiss(t){e.dismiss(t)}});return this._applicationRef.attachView(n),new rl([n.rootNodes],n)}_createFromString(t){const e=this._document.createTextNode(`${t}`);return new rl([[e]])}_createFromComponent(t,e,n,r,i){const o=t.resolveComponentFactory(n),s=fo.create({providers:[{provide:al,useValue:r}],parent:e}),a=o.create(s),u=a.location.nativeElement;return i.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(a.hostView),new rl([[u]],a.hostView,a)}_setAriaHidden(t){const e=t.parentElement;e&&t!==this._document.body&&(Array.from(e.children).forEach(e=>{e!==t&&"SCRIPT"!==e.nodeName&&(this._ariaHiddenValues.set(e,e.getAttribute("aria-hidden")),e.setAttribute("aria-hidden","true"))}),this._setAriaHidden(e))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const e=()=>{const e=this._modalRefs.indexOf(t);e>-1&&this._modalRefs.splice(e,1)};this._modalRefs.push(t),t.result.then(e,e)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const e=this._windowCmpts.indexOf(t);e>-1&&(this._windowCmpts.splice(e,1),this._activeWindowCmptHasChanged.next())})}};return t.\u0275fac=function(e){return new(e||t)(Kt(Eu),Kt(fo),Kt(Lu),Kt(ol),Kt(ks),Kt(nu))},t.\u0275prov=ft({factory:function(){return new t(Kt(Eu),Kt(Vt),Kt(Lu),Kt(ol),Kt(ks),Kt(nu))},token:t,providedIn:"root"}),t})(),fl=(()=>{let t=class{constructor(t,e,n,r){this._moduleCFR=t,this._injector=e,this._modalStack=n,this._config=r}open(t,e={}){const n=Object.assign({},this._config,e);return this._modalStack.open(this._moduleCFR,this._injector,t,n)}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}};return t.\u0275fac=function(e){return new(e||t)(Kt(Ss),Kt(fo),Kt(ll),Kt(nl))},t.\u0275prov=ft({factory:function(){return new t(Kt(Ss),Kt(Vt),Kt(ll),Kt(nl))},token:t,providedIn:"root"}),t})(),pl=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},providers:[fl]}),t})(),dl=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})(),vl=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})(),yl=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})(),ml=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})(),gl=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})(),wl=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})(),_l=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})(),bl=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})(),El=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)}}),t})(),Il=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[[oc]]}),t})();const Cl=[Oh,Dh,Ph,Lh,Mh,zh,el,pl,dl,vl,yl,ml,gl,_l,bl,El,Il,wl];let Tl=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},imports:[Cl,Oh,Dh,Ph,Lh,Mh,zh,el,pl,dl,vl,yl,ml,gl,_l,bl,El,Il,wl]}),t})();const Sl=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Al(t){return new _(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?q(n):dh()).subscribe(e)})}function Nl(t){return function(e){return 0===t?dh():e.lift(new kl(t))}}class kl{constructor(t){if(this.total=t,this.total<0)throw new fh}call(t,e){return e.subscribe(new xl(t,this.total))}}class xl extends d{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Rl(t=Pl){return e=>e.lift(new Ol(t))}class Ol{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Dl(t,this.errorFactory))}}class Dl extends d{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Pl(){return new Sl}function Ll(t=null){return e=>e.lift(new Ml(t))}class Ml{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Fl(t,this.defaultValue))}}class Fl extends d{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Ul(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ch((e,n)=>t(e,n,r)):G,Nl(1),n?Ll(e):Rl(()=>new Sl))}function jl(t){return function(e){const n=new Vl(t),r=e.lift(n);return n.caught=r}}class Vl{constructor(t){this.selector=t}call(t,e){return e.subscribe(new ql(t,this.selector,this.caught))}}class ql extends M{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new N(this,void 0,void 0);this.add(r);const i=L(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}function Hl(t,e){const n=arguments.length>=2;return r=>r.pipe(t?ch((e,n)=>t(e,n,r)):G,vh(1),n?Ll(e):Rl(()=>new Sl))}class Bl{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new Wl(t,this.predicate,this.thisArg,this.source))}}class Wl extends d{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Gl(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new zl(t,e,n))}}class zl{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Ql(t,this.accumulator,this.seed,this.hasSeed))}}class Ql extends d{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function $l(t,e){return H(t,e,1)}class Kl{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Yl(t,this.callback))}}class Yl extends d{constructor(t,e){super(t),this.add(new l(e))}}class Jl{constructor(t,e){this.id=t,this.url=e}}class Xl extends Jl{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zl extends Jl{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class tf extends Jl{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ef extends Jl{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nf extends Jl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rf extends Jl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class of extends Jl{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sf extends Jl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class af extends Jl{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uf{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cf{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class hf{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lf{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ff{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pf{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class df{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let vf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Do(0,"router-outlet")},directives:function(){return[gd]},encapsulation:2}),t})();class yf{constructor(t){this.params=t||{}}has(t){return this.params.hasOwnProperty(t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function mf(t){return new yf(t)}function gf(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function wf(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}class _f{constructor(t,e){this.routes=t,this.module=e}}function bf(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Ef(r,If(e,r))}}function Ef(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&bf(t.children,e)}function If(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Cf(t){const e=t.children&&t.children.map(Cf),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=vf),n}function Tf(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Sf(t[i],e[i]))return!1;return!0}function Sf(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function Af(t){return Array.prototype.concat.apply([],t)}function Nf(t){return t.length>0?t[t.length-1]:null}function kf(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function xf(t){return(e=t)&&"function"==typeof e.subscribe?t:Po(t)?q(Promise.resolve(t)):Xc(t);var e}function Rf(t,e,n){return n?function(t,e){return Tf(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!Lf(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Sf(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!Lf(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!Lf(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!Lf(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class Of{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mf(this.queryParams)),this._queryParamMap}toString(){return jf.serialize(this)}}class Df{constructor(t,e){this.segments=t,this.children=e,this.parent=null,kf(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Vf(this)}}class Pf{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=mf(this.parameters)),this._parameterMap}toString(){return zf(this)}}function Lf(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function Mf(t,e){let n=[];return kf(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),kf(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class Ff{}class Uf{parse(t){const e=new Jf(t);return new Of(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`${`/${function t(e,n){if(!e.hasChildren())return Vf(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return kf(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=Mf(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${Vf(e)}/(${n.join("//")})`}}(t.root,!0)}`}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Hf(e)}=${Hf(t)}`).join("&"):`${Hf(e)}=${Hf(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const jf=new Uf;function Vf(t){return t.segments.map(t=>zf(t)).join("/")}function qf(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hf(t){return qf(t).replace(/%3B/gi,";")}function Bf(t){return qf(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wf(t){return decodeURIComponent(t)}function Gf(t){return Wf(t.replace(/\+/g,"%20"))}function zf(t){return`${Bf(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Bf(t)}=${Bf(e[t])}`).join("")}`;var e}const Qf=/^[^\/()?;=#]+/;function $f(t){const e=t.match(Qf);return e?e[0]:""}const Kf=/^[^=?&#]+/,Yf=/^[^?&#]+/;class Jf{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Df([],{}):new Df([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Df(t,e)),n}parseSegment(){const t=$f(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Pf(Wf(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=$f(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=$f(this.remaining);t&&(n=t,this.capture(n))}t[Wf(e)]=Wf(n)}parseQueryParam(t){const e=function(t){const e=t.match(Kf);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Yf);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Gf(e),i=Gf(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=$f(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Df([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Xf{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Zf(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Zf(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=tp(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return tp(t,this._root).map(t=>t.value)}}function Zf(t,e){if(t===e.value)return e;for(const n of e.children){const e=Zf(t,n);if(e)return e}return null}function tp(t,e){if(t===e.value)return[e];for(const n of e.children){const r=tp(t,n);if(r.length)return r.unshift(e),r}return[]}class ep{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function np(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class rp extends Xf{constructor(t,e){super(t),this.snapshot=e,cp(this,t)}toString(){return this.snapshot.toString()}}function ip(t,e){const n=function(t,e){const n=new ap([],{},{},"",{},"primary",e,null,t.root,-1,{});return new up("",new ep(n,[]))}(t,e),r=new Vc([new Pf("",{})]),i=new Vc({}),o=new Vc({}),s=new Vc({}),a=new Vc(""),u=new op(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new rp(new ep(u,[]),n)}class op{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(F(t=>mf(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(F(t=>mf(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sp(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ap{constructor(t,e,n,r,i,o,s,a,u,c,h){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class up extends Xf{constructor(t,e){super(e),this.url=t,cp(this,e)}toString(){return hp(this._root)}}function cp(t,e){e.value._routerState=t,e.children.forEach(e=>cp(t,e))}function hp(t){const e=t.children.length>0?` { ${t.children.map(hp).join(", ")} } `:"";return`${t.value}${e}`}function lp(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Tf(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Tf(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Tf(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Tf(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function fp(t,e){var n,r;return Tf(t.params,e.params)&&Lf(n=t.url,r=e.url)&&n.every((t,e)=>Tf(t.parameters,r[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||fp(t.parent,e.parent))}function pp(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function dp(t,e,n,r,i){let o={};return r&&kf(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Of(n.root===t?e:function t(e,n,r){const i={};return kf(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new Df(e.segments,i)}(n.root,t,e),o,i)}class vp{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&pp(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==Nf(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yp{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function mp(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:`${t}`}function gp(t,e,n){if(t||(t=new Df([],{})),0===t.segments.length&&t.hasChildren())return wp(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=mp(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!Ip(s,a,e))return o;r+=2}else{if(!Ip(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Df(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Df(t.segments.slice(r.pathIndex),t.children),wp(e,0,i)}return r.match&&0===i.length?new Df(t.segments,{}):r.match&&!t.hasChildren()?_p(t,e,n):r.match?wp(t,0,i):_p(t,e,n)}function wp(t,e,n){if(0===n.length)return new Df(t.segments,{});{const r=function(t){return"object"!=typeof t[0]?{primary:t}:void 0===t[0].outlets?{primary:t}:t[0].outlets}(n),i={};return kf(r,(n,r)=>{null!==n&&(i[r]=gp(t.children[r],e,n))}),kf(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Df(t.segments,i)}}function _p(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&void 0!==n[i].outlets){const t=bp(n[i].outlets);return new Df(r,t)}if(0===i&&pp(n[0])){r.push(new Pf(t.segments[e].path,n[0])),i++;continue}const o=mp(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&pp(s)?(r.push(new Pf(o,Ep(s))),i+=2):(r.push(new Pf(o,{})),i++)}return new Df(r,{})}function bp(t){const e={};return kf(t,(t,n)=>{null!==t&&(e[n]=_p(new Df([],{}),0,t))}),e}function Ep(t){const e={};return kf(t,(t,n)=>e[n]=`${t}`),e}function Ip(t,e,n){return t==n.path&&Tf(e,n.parameters)}class Cp{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),lp(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=np(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),kf(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=np(t),i=t.value.component?n.children:e;kf(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=np(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new pf(t.value.snapshot))}),t.children.length&&this.forwardEvent(new lf(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(lp(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Tp(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Tp(t){lp(t.value),t.children.forEach(Tp)}function Sp(t){return"function"==typeof t}function Ap(t){return t instanceof Of}class Np{constructor(t){this.segmentGroup=t||null}}class kp{constructor(t){this.urlTree=t}}function xp(t){return new _(e=>e.error(new Np(t)))}function Rp(t){return new _(e=>e.error(new kp(t)))}function Op(t){return new _(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Dp{constructor(t,e,n,r,i){this.configLoader=e,this.urlSerializer=n,this.urlTree=r,this.config=i,this.allowRedirects=!0,this.ngModule=t.get(Zt)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(F(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(jl(t=>{if(t instanceof kp)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Np)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(F(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(jl(t=>{if(t instanceof Np)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Df([],{primary:t}):t;return new Of(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(F(t=>new Df([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Xc({});const n=[],r=[],i={};return kf(t,(t,o)=>{const s=e(o,t).pipe(F(t=>i[o]=t));"primary"===o?n.push(s):r.push(s)}),Xc.apply(null,n.concat(r)).pipe(Zc(),Ul(),F(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Xc(...n).pipe(F(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(jl(t=>{if(t instanceof Np)return Xc(null);throw t}))),Zc(),Hl(t=>!!t),jl((t,n)=>{if(t instanceof Sl||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Xc(new Df([],{}));throw new Np(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Fp(r)!==o?xp(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):xp(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Rp(i):this.lineralizeSegments(n,i).pipe(H(n=>{const i=new Df(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Pp(e,r,i);if(!s)return xp(e);const h=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Rp(h):this.lineralizeSegments(r,h).pipe(H(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(F(t=>(n._loadedConfig=t,new Df(r,{})))):Xc(new Df(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=Pp(e,n,r);if(!i)return xp(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(H(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Mp(t,e,n)&&"primary"!==Fp(n))}(t,n,r)?{segmentGroup:Lp(new Df(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==Fp(r)&&(n[Fp(r)]=new Df([],{}));return n}(r,new Df(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Mp(t,e,n))}(t,n,r)?{segmentGroup:Lp(new Df(t.segments,function(t,e,n,r){const i={};for(const o of n)Mp(t,e,o)&&!r[Fp(o)]&&(i[Fp(o)]=new Df([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(F(t=>new Df(o,t))):0===r.length&&0===s.length?Xc(new Df(o,{})):this.expandSegment(n,i,r,s,"primary",!0).pipe(F(t=>new Df(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Xc(new _f(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Xc(e._loadedConfig):function(t,e,n){const r=e.canLoad;return r&&0!==r.length?q(r).pipe(F(r=>{const i=t.get(r);let o;if(function(t){return t&&Sp(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Sp(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return xf(o)})).pipe(Zc(),(i=t=>!0===t,t=>t.lift(new Bl(i,void 0,t)))):Xc(!0);var i}(t.injector,e,n).pipe(H(n=>n?this.configLoader.load(t.injector,e).pipe(F(t=>(e._loadedConfig=t,t))):function(t){return new _(e=>e.error(gf(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Xc(new _f([],t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Xc(n);if(r.numberOfChildren>1||!r.children.primary)return Op(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Of(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return kf(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return kf(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Df(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Pp(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||wf)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function Lp(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Df(t.segments.concat(e.segments),e.children)}return t}function Mp(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Fp(t){return t.outlet||"primary"}class Up{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class jp{constructor(t,e){this.component=t,this.route=e}}function Vp(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=np(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Lf(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Lf(t.url,e.url)||!Tf(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fp(t,e)||!Tf(t.queryParams,e.queryParams);case"paramsChange":default:return!fp(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Up(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&o.canDeactivateChecks.push(new jp(u&&u.outlet&&u.outlet.component||null,a))}else a&&Hp(n,u,o),o.canActivateChecks.push(new Up(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),kf(s,(t,e)=>Hp(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function qp(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Hp(t,e,n){const r=np(t),i=t.value;kf(r,(t,r)=>{Hp(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new jp(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const Bp=Symbol("INITIAL_VALUE");function Wp(){return rh(t=>function(...t){let e=null,n=null;return A(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&u(t[0])&&(t=t[0]),Q(t,n).lift(new Hc(e))}(...t.map(t=>t.pipe(vh(1),function(...t){const e=t[t.length-1];return A(e)?(t.pop(),n=>th(t,n,e)):e=>th(t,e)}(Bp)))).pipe(Gl((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Bp)return t;if(r===Bp&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Ap(r))return r}return t},t)},Bp),ch(t=>t!==Bp),F(t=>Ap(t)?t:!0===t),vh(1)))}function Gp(t,e){return null!==t&&e&&e(new ff(t)),Xc(!0)}function zp(t,e){return null!==t&&e&&e(new hf(t)),Xc(!0)}function Qp(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?Xc(r.map(r=>Al(()=>{const i=qp(r,e,n);let o;if(function(t){return t&&Sp(t.canActivate)}(i))o=xf(i.canActivate(e,t));else{if(!Sp(i))throw new Error("Invalid CanActivate guard");o=xf(i(e,t))}return o.pipe(Hl())}))).pipe(Wp()):Xc(!0)}function $p(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Al(()=>Xc(e.guards.map(i=>{const o=qp(i,e.node,n);let s;if(function(t){return t&&Sp(t.canActivateChild)}(o))s=xf(o.canActivateChild(r,t));else{if(!Sp(o))throw new Error("Invalid CanActivateChild guard");s=xf(o(r,t))}return s.pipe(Hl())})).pipe(Wp())));return Xc(i).pipe(Wp())}class Kp{}class Yp{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Zp(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new ap([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ep(n,e),i=new up(this.url,r);return this.inheritParamsAndData(i._root),Xc(i)}catch(t){return new _(e=>e.error(t))}}inheritParamsAndData(t){const e=t.value,n=sp(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=Mf(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const o of t)try{return this.processSegmentAgainstRoute(o,e,n,r)}catch(i){if(!(i instanceof Kp))throw i}if(this.noLeftoversInUrl(e,n,r))return[];throw new Kp}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Kp;if((t.outlet||"primary")!==r)throw new Kp;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?Nf(n).parameters:{};i=new ap(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nd(t),r,t.component,t,Jp(e),Xp(e)+n.length,rd(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Kp;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||wf)(n,t,e);if(!r)throw new Kp;const i={};kf(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new ap(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,nd(t),r,t.component,t,Jp(e),Xp(e)+o.length,rd(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Zp(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new ep(i,t)]}if(0===a.length&&0===c.length)return[new ep(i,[])];const h=this.processSegment(a,u,c,"primary");return[new ep(i,h)]}}function Jp(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Xp(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Zp(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>td(t,e,n)&&"primary"!==ed(n))}(t,n,r)){const i=new Df(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==ed(o)){const n=new Df([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[ed(o)]=n}return i}(t,e,r,new Df(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>td(t,e,n))}(t,n,r)){const o=new Df(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(td(t,n,a)&&!i[ed(a)]){const n=new Df([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[ed(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Df(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function td(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function ed(t){return t.outlet||"primary"}function nd(t){return t.data||{}}function rd(t){return t.resolve||{}}function id(t,e,n,r){const i=qp(t,e,r);return xf(i.resolve?i.resolve(e,n):i(e,n))}function od(t){return function(e){return e.pipe(rh(e=>{const n=t(e);return n?q(n).pipe(F(()=>e)):q([e])}))}}class sd{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}const ad=new jt("ROUTES");class ud{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(F(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new _f(Af(r.injector.get(ad)).map(Cf),r)}))}loadModuleFactory(t){return"string"==typeof t?q(this.loader.load(t)):xf(t()).pipe(H(t=>t instanceof te?Xc(t):q(this.compiler.compileModuleAsync(t))))}}class cd{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function hd(t){throw t}function ld(t,e,n){return e.parse("/")}function fd(t,e){return Xc(null)}let pd=(()=>{class t{constructor(t,e,n,r,i,o,s,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=r,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new T,this.errorHandler=hd,this.malformedUriErrorHandler=ld,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:fd,afterPreactivation:fd},this.urlHandlingStrategy=new cd,this.routeReuseStrategy=new sd,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=i.get(Zt),this.console=i.get(Ha);const u=i.get(nu);this.isNgZoneEnabled=u instanceof nu,this.resetConfig(a),this.currentUrlTree=new Of(new Df([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ud(o,s,t=>this.triggerEvent(new uf(t)),t=>this.triggerEvent(new cf(t))),this.routerState=ip(this.currentUrlTree,this.rootComponentType),this.transitions=new Vc({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(ch(t=>0!==t.id),F(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),rh(t=>{let n=!1,r=!1;return Xc(t).pipe(gh(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),rh(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Xc(t).pipe(rh(t=>{const n=this.transitions.getValue();return e.next(new Xl(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?ph:[t]}),rh(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(rh(t=>function(t,e,n,r,i){return new Dp(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(F(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),gh(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(H(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Yp(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(F(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),gh(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),gh(t=>{const n=new nf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Xl(n,this.serializeUrl(r),i,o);e.next(a);const u=ip(r,this.rootComponentType).snapshot;return Xc(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ph}),od(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),gh(t=>{const e=new rf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),F(t=>Object.assign(Object.assign({},t),{guards:Vp(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(H(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Xc(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return q(t).pipe(H(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?Xc(o.map(o=>{const s=qp(o,e,i);let a;if(function(t){return t&&Sp(t.canDeactivate)}(s))a=xf(s.canDeactivate(t,e,n,r));else{if(!Sp(s))throw new Error("Invalid CanDeactivate guard");a=xf(s(t,e,n,r))}return a.pipe(Hl())})).pipe(Wp()):Xc(!0)}(t.component,t.route,n,e,r)),Hl(t=>!0!==t,!0))}(s,r,i,t).pipe(H(n=>n&&"boolean"==typeof n?function(t,e,n,r){return q(e).pipe($l(e=>q([zp(e.route.parent,r),Gp(e.route,r),$p(t,e.path,n),Qp(t,e.route,n)]).pipe(Zc(),Hl(t=>!0!==t,!0))),Hl(t=>!0!==t,!0))}(r,o,t,e):Xc(n)),F(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),gh(t=>{if(Ap(t.guardsResult)){const e=gf(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),gh(t=>{const e=new of(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),ch(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new tf(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),od(t=>{if(t.guards.canActivateChecks.length)return Xc(t).pipe(gh(t=>{const e=new sf(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),(e=this.paramsInheritanceStrategy,n=this.ngModule.injector,function(t){return t.pipe(H(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;return i.length?q(i).pipe($l(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Xc({});if(1===i.length){const o=i[0];return id(t[o],e,n,r).pipe(F(t=>({[o]:t})))}const o={};return q(i).pipe(H(i=>id(t[i],e,n,r).pipe(F(t=>(o[i]=t,t))))).pipe(Ul(),F(()=>o))}(t._resolve,t,e,r).pipe(F(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),sp(t,n).resolve),null)))}(t.route,r,e,n)),function(t,e){return arguments.length>=2?function(n){return g(Gl(t,e),Nl(1),Ll(e))(n)}:function(e){return g(Gl((e,n,r)=>t(e,n,r+1)),Nl(1))(e)}}((t,e)=>t),F(e=>t)):Xc(t)}))}),gh(t=>{const e=new af(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}));var e,n}),od(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),F(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new ep(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new op(new Vc((i=n.value).url),new Vc(i.params),new Vc(i.queryParams),new Vc(i.fragment),new Vc(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new ep(r,o)}}var i}(t,e._root,n?n._root:void 0);return new rp(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),gh(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),F(t=>(new Cp(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),gh({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new tf(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Kl(i))),jl(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Ap(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new tf(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new ef(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(o){t.reject(o)}}var i;return ph}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){bf(t),this.config=t.map(Cf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,preserveQueryParams:o,queryParamsHandling:s,preserveFragment:a}=e;or()&&o&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const u=n||this.routerState.root,c=a?this.currentUrlTree.fragment:i;let h=null;if(s)switch(s){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}else h=o?this.currentUrlTree.queryParams:r||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return dp(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new vp(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return kf(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new vp(n,e,r)}(n);if(o.toRoot())return dp(e.root,new Df([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new yp(e.root,!0,0);if(-1===n.snapshot._lastPathIndex)return new yp(n.snapshot._urlSegment,!0,0);const r=pp(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new yp(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?wp(s.segmentGroup,s.index,o.commands):gp(s.segmentGroup,s.index,o.commands);return dp(s.segmentGroup,a,e,r,i)}(u,this.currentUrlTree,t,h,c)}navigateByUrl(t,e={skipLocationChange:!1}){or()&&this.isNgZoneEnabled&&!nu.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=Ap(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){if(Ap(t))return Rf(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Rf(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Zl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition();if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s,a,u;i?(s=i.resolve,a=i.reject,u=i.promise):u=new Promise((t,e)=>{s=t,a=e});const c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:s,reject:a,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(t){No()},t.\u0275dir=we({type:t}),t})(),dd=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.subscription=t.events.subscribe(t=>{t instanceof Zl&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}set preserveQueryParams(t){or()&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead."),this.preserve=t}ngOnChanges(t){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r){if(0!==t||e||n||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const i={skipLocationChange:vd(this.skipLocationChange),replaceUrl:vd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,i),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,preserveQueryParams:vd(this.preserve),queryParamsHandling:this.queryParamsHandling,preserveFragment:vd(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(Ao(pd),Ao(op),Ao(Gu))},t.\u0275dir=we({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Lo("click",(function(t){return e.onClick(t.button,t.ctrlKey,t.metaKey,t.shiftKey)})),2&t&&(os("href",e.href,cr),To("target",e.target))},inputs:{routerLink:"routerLink",preserveQueryParams:"preserveQueryParams",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state"},features:[ps]}),t})();function vd(t){return""===t||!!t}class yd{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new md,this.attachRef=null}}class md{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new yd,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let gd=(()=>{class t{constructor(t,e,n,r,i){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=i,this.activated=null,this._activatedRoute=null,this.activateEvents=new ya,this.deactivateEvents=new ya,this.name=r||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new wd(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Ao(md),Ao(Zs),Ao(Ss),("name",function(t,e){const n=t.attrs;if(n){const t=n.length;let e=0;for(;e<t;){const r=n[e];if(In(r))break;if(0===r)e+=2;else if("number"==typeof r)for(e++;e<t&&"string"==typeof n[e];)e++;else{if("name"===r)return n[e+1];e+=2}}}return null}(Qe())),Ao(Yi))},t.\u0275dir=we({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class wd{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===op?this.route:t===md?this.childContexts:this.parent.get(t,e)}}class _d{}class bd{preload(t,e){return Xc(null)}}let Ed=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new ud(e,n,e=>t.triggerEvent(new uf(e)),e=>t.triggerEvent(new cf(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(ch(t=>t instanceof Zl),$l(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(Zt);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return q(n).pipe(z(),F(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(H(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(Kt(pd),Kt(Cu),Kt(Xa),Kt(fo),Kt(_d))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})(),Id=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Xl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof df&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new df(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(t){No()},t.\u0275dir=we({type:t}),t})();const Cd=new jt("ROUTER_CONFIGURATION"),Td=new jt("ROUTER_FORROOT_GUARD"),Sd=[Yu,{provide:Ff,useClass:Uf},{provide:pd,useFactory:function(t,e,n,r,i,o,s,a={},u,c){const h=new pd(null,t,e,n,r,i,o,Af(s));if(u&&(h.urlHandlingStrategy=u),c&&(h.routeReuseStrategy=c),a.errorHandler&&(h.errorHandler=a.errorHandler),a.malformedUriErrorHandler&&(h.malformedUriErrorHandler=a.malformedUriErrorHandler),a.enableTracing){const t=Pu();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return a.onSameUrlNavigation&&(h.onSameUrlNavigation=a.onSameUrlNavigation),a.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=a.paramsInheritanceStrategy),a.urlUpdateStrategy&&(h.urlUpdateStrategy=a.urlUpdateStrategy),a.relativeLinkResolution&&(h.relativeLinkResolution=a.relativeLinkResolution),h},deps:[Ff,md,Yu,fo,Cu,Xa,ad,Cd,[class{},new st],[class{},new st]]},md,{provide:op,useFactory:function(t){return t.routerState.root},deps:[pd]},{provide:Cu,useClass:Au},Ed,bd,class{preload(t,e){return e().pipe(jl(()=>Xc(null)))}},{provide:Cd,useValue:{enableTracing:!1}}];function Ad(){return new mu("Router",pd)}let Nd=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Sd,Od(e),{provide:Td,useFactory:Rd,deps:[[pd,new st,new ut]]},{provide:Cd,useValue:n||{}},{provide:Gu,useFactory:xd,deps:[Mu,[new ot(Qu),new st],Cd]},{provide:Id,useFactory:kd,deps:[pd,ac,Cd]},{provide:_d,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:bd},{provide:mu,multi:!0,useFactory:Ad},[Dd,{provide:Pa,multi:!0,useFactory:Pd,deps:[Dd]},{provide:Md,useFactory:Ld,deps:[Dd]},{provide:qa,multi:!0,useExisting:Md}]]}}static forChild(e){return{ngModule:t,providers:[Od(e)]}}}return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)(Kt(Td,8),Kt(pd,8))}}),t})();function kd(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Id(t,e,n)}function xd(t,e,n={}){return n.useHash?new Ku(t,e):new $u(t,e)}function Rd(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function Od(t){return[{provide:po,multi:!0,useValue:t},{provide:ad,multi:!0,useValue:t}]}let Dd=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new T}appInitializer(){return this.injector.get(Uu,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(pd),r=this.injector.get(Cd);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Xc(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(Cd),n=this.injector.get(Ed),r=this.injector.get(Id),i=this.injector.get(pd),o=this.injector.get(Eu);t===o.components[0]&&(this.isLegacyEnabled(e)?i.initialNavigation():this.isLegacyDisabled(e)&&i.setUpLocationChangeListener(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(Kt(fo))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();function Pd(t){return t.appInitializer.bind(t)}function Ld(t){return t.bootstrapListener.bind(t)}const Md=new jt("Router Initializer");var Fd,Ud=n("Wcq6"),jd=n.n(Ud);const Vd=new jt("angularfire2.app.options"),qd=new jt("angularfire2.app.nameOrConfig"),Hd=new Ps("5.4.2");function Bd(t,e,n){const r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",jd.a.apps.filter(t=>t&&t.name===r.name)[0]||e.runOutsideAngular(()=>jd.a.initializeApp(t,r))}const Wd={provide:class{},useFactory:Bd,deps:[Vd,nu,[new st,qd]]};let Gd=(()=>{let t=Fd=class{constructor(t){jd.a.registerVersion&&(jd.a.registerVersion("angularfire",Hd.full,t.toString()),jd.a.registerVersion("angular",Ls.full))}static initializeApp(t,e){return{ngModule:Fd,providers:[{provide:Vd,useValue:t},{provide:qd,useValue:e}]}}};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)(Kt(Va))},providers:[Wd]}),t})();function zd(t,e){return function(t,e=$c){return new _(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot(n)}):r=t.onSnapshot(n),function(){null!=r&&r()}})}(t,e)}function Qd(t,e){return zd(t,e).pipe(F(t=>({payload:t,type:"query"})))}function $d(t,e=0){return function(n){return n.lift(new Kd(t,e))}}class Kd{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new Yd(t,this.scheduler,this.delay))}}class Yd extends d{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(Yd.dispatch,this.delay,new Jd(t,this.destination)))}_next(t){this.scheduleMessage(Ch.createNext(t))}_error(t){this.scheduleMessage(Ch.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(Ch.createComplete()),this.unsubscribe()}}class Jd{constructor(t,e){this.notification=t,this.destination=e}}function Xd(t,e){return Qd(t,e).pipe(F(t=>t.payload.docChanges().map(t=>({type:t.type,payload:t}))))}function Zd(t,e,n){return Qd(t,n).pipe(F(t=>t.payload.docChanges()),Gl((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":t[e.newIndex]&&t[e.newIndex].doc.ref.isEqual(e.doc.ref)||t.splice(e.newIndex,0,e);break;case"modified":(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref))&&(e.oldIndex!==e.newIndex?(t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e)):t.splice(e.newIndex,1,e));break;case"removed":t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref)&&t.splice(e.oldIndex,1)}return t}(t,e))}),t}(t,n,e),[]),F(t=>t.map(t=>({type:t.type,payload:t}))))}function tv(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class ev{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?Xd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,F(e=>e.filter(e=>t.indexOf(e.type)>-1)),ch(t=>t.length>0)):Xd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Gl((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=tv(t);return Zd(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Qd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,F(e=>e.payload.docs.map(e=>t.idField?Object.assign({},e.data(),{[t.idField]:e.id}):e.data())))}get(t){return q(this.query.get(t)).pipe($d(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new nv(this.ref.doc(t),this.afs)}}class nv{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=xv(n,e);return new ev(r,i,this.afs)}snapshotChanges(){return zd(this.ref,this.afs.schedulers.outsideAngular).pipe(F(t=>({payload:t,type:"value"}))).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return this.snapshotChanges().pipe(F(t=>t.payload.data()))}get(t){return q(this.ref.get(t)).pipe($d(this.afs.schedulers.insideAngular))}}class rv{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?Xd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,F(e=>e.filter(e=>t.indexOf(e.type)>-1)),ch(t=>t.length>0)):Xd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Gl((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=tv(t);return Zd(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(){return Qd(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst,F(t=>t.payload.docs.map(t=>t.data())))}get(t){return q(this.query.get(t)).pipe($d(this.afs.schedulers.insideAngular))}}class iv extends Gc{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}class ov extends Qc{}const sv=new ov(iv);let av=1;const uv=(()=>Promise.resolve())(),cv={};function hv(t){return t in cv&&(delete cv[t],!0)}const lv={setImmediate(t){const e=av++;return cv[e]=!0,uv.then(()=>hv(e)&&t()),e},clearImmediate(t){hv(t)}};class fv extends Gc{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=lv.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(lv.clearImmediate(e),t.scheduled=void 0)}}class pv extends Qc{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const dv=new pv(fv);class vv extends _{constructor(t,e=0,n=dv){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,(!(!u(r=e)&&r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=dv)}static create(t,e=0,n=dv){return new vv(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(vv.dispatch,this.delayTime,{source:this.source,subscriber:t})}}class yv{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new vv(e,this.delay,this.scheduler).subscribe(t)}}const mv=new jt("angularfire2.realtimeDatabaseURL");function gv(){}class wv{constructor(t,e=sv){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class _v{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",gv,{},gv,gv)),e.pipe(gh(n,n,n)).subscribe(t).add(n)}unscheduleTask(){null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)}}class bv{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new wv(Zone.current)),this.insideAngular=t.run(()=>new wv(Zone.current,$c))}}function Ev(t,e){return function(n){return sc(e)&&(n=n.lift(new _v(t.ngZone))),n.pipe(function(t,e=0){return function(n){return n.lift(new yv(t,e))}}(t.outsideAngular),$d(t.insideAngular))}}const Iv=new jt("angularfire2.enableFirestorePersistence"),Cv=new jt("angularfire2.firestore.persistenceSettings"),Tv=Iv,Sv=Cv,Av=new jt("angularfire2.firestore.settings"),Nv=parseInt(jd.a.SDK_VERSION.split(".")[0]),kv=Nv<5||5==Nv&&parseInt(jd.a.SDK_VERSION.split(".")[1])<8?{timestampsInSnapshots:!0}:{};function xv(t,e=(t=>t)){return{query:e(t),ref:t}}let Rv=(()=>{let t=class{constructor(t,e,n,r,i,o,s){this.schedulers=new bv(o),this.keepUnstableUntilFirst=Ev(this.schedulers,i),this.firestore=o.runOutsideAngular(()=>{const n=Bd(t,o,e).firestore();return n.settings(r||kv),n}),this.persistenceEnabled$=n&&!sc(i)?o.runOutsideAngular(()=>{try{return q(this.firestore.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(t){return Xc(!1)}}):Xc(!1)}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=xv(n,e);return new ev(r,i,this)}collectionGroup(t,e){if(Nv<6)throw"collection group queries require Firebase JS SDK >= 6.0";const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new rv(n(r),this)}doc(t){let e;return e="string"==typeof t?this.firestore.doc(t):t,new nv(e,this)}createId(){return this.firestore.collection("_").doc().id}};return t.\u0275fac=function(e){return new(e||t)(Kt(Vd),Kt(qd,8),Kt(Tv,8),Kt(Av,8),Kt(Va),Kt(nu),Kt(Sv,8))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();var Ov;n("6Joi");let Dv=(()=>{let t=Ov=class{static enablePersistence(t){return{ngModule:Ov,providers:[{provide:Iv,useValue:!0},{provide:Cv,useValue:t}]}}};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},providers:[Rv]}),t})();function Pv(t){return null==t}function Lv(t){return"function"==typeof t.set}function Mv(t,e){return Lv(e)?e:t.ref(e)}function Fv(t,e){if("string"==typeof t)return e.stringCase();if(Lv(t))return e.firebaseCase();if(function(t){return"function"==typeof t.exportVal}(t))return e.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof t}`)}function Uv(t,e,n="on",r=$c){return new _(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"==n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"==n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(F(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),nt())}function jv(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Vv(t,e){const{payload:n,prevKey:r,key:i}=e,o=jv(t,i),s=function(t,e){if(Pv(e))return 0;{const n=jv(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!=r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function qv(t){return(Pv(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Hv(t,e,n){return function(t,e,n){return Uv(t,"value","once",n).pipe(rh(r=>{const i=[Xc(r)];return e.forEach(e=>i.push(Uv(t,e,"on",n))),$(...i).pipe(Gl(Vv,[]))}),t=>t.lift(new eh(void 0,void 0)))}(t,e=qv(e),n)}function Bv(t,e,n){return $(...(e=qv(e)).map(e=>Uv(t,e,"on",n)))}class Wv{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Gv(t,this.predicate))}}class Gv extends d{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function zv(t,e){return function(n,r){return Fv(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Qv(t,e){return function(){return Uv(t,"value","on",e)}}let $v=(()=>{let t=class{constructor(t,e,n,r,i){this.schedulers=new bv(i),this.keepUnstableUntilFirst=Ev(this.schedulers,r),this.database=i.runOutsideAngular(()=>Bd(t,i,e).database(n||void 0))}list(t,e){const n=Mv(this.database,t);let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular;return{query:t,update:zv(t.ref,"update"),set:zv(t.ref,"set"),push:e=>t.ref.push(e),remove:(r=t.ref,function(t){return t?Fv(t,{stringCase:()=>r.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):r.remove()}),snapshotChanges:r=>Hv(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Bv(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Uv(t,"value","on",e).pipe(F(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(bh(e),F(([t,e])=>{let n=t.lastKeyToLoad;const r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Wv(r))),F(t=>t.actions));var r}(t,Bv(t,e).pipe(Gl((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:r=>Hv(t,r,n).pipe(e.keepUnstableUntilFirst,F(t=>t.map(t=>t.payload.val())))};var r}(r,this)}object(t){const e=Mv(this.database,t);return r=this,{query:n=e,snapshotChanges:()=>Qv(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Qv(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,F(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.database.ref().push().key}};return t.\u0275fac=function(e){return new(e||t)(Kt(Vd),Kt(qd,8),Kt(mv,8),Kt(Va),Kt(nu))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();n("NSPt");let Kv=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},providers:[$v]}),t})(),Yv=(()=>{let t=class{constructor(t,e,n,r){const i=Ev(new bv(r),n);this.auth=r.runOutsideAngular(()=>Bd(t,r,e).auth()),this.authState=new _(t=>r.runOutsideAngular(()=>this.auth.onAuthStateChanged(t))).pipe(i),this.user=new _(t=>r.runOutsideAngular(()=>this.auth.onIdTokenChanged(t))).pipe(i),this.idToken=this.user.pipe(rh(t=>t?q(t.getIdToken()):Xc(null))),this.idTokenResult=this.user.pipe(rh(t=>t?q(t.getIdTokenResult()):Xc(null)))}};return t.\u0275fac=function(e){return new(e||t)(Kt(Vd),Kt(qd,8),Kt(Va),Kt(nu))},t.\u0275prov=ft({token:t,factory:t.\u0275fac}),t})();var Jv=n("wj3C"),Xv=n.n(Jv);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.w(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},e.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Oa(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Oa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Oa(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function l(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){return"function"==h(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function d(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++y)}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function g(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:g).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var b=Date.now||function(){return+new Date};function E(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t,e,n){this.code=S+t,this.message=e||A[t]||"",this.a=n||null}function C(t){var e=t&&t.code;return e?new I(e.substring(S.length),t.message,t.serverResponse):null}E(I,Error),I.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},I.prototype.toJSON=function(){return this.v()};var T,S="auth/",A={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function k(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function R(t){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function O(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function D(t,e){throw new O("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}T=k("__EID__")?"__EID__":void 0,E(R,Error),R.prototype.name="CustomError",E(O,R),O.prototype.name="AssertionError",P.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new P((function(){return new j}),(function(t){t.reset()}));function U(){var t=ve,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function j(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var V=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function G(t,e){return 0<=V(t,e)}function z(t,e){var n;return(n=0<=(e=V(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Q(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)}))}function $(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,J=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function st(t,e){return t<e?-1:t>e?1:0}t:{var at=s.navigator;if(at){var ut=at.userAgent;if(ut){Y=ut;break t}}Y=""}function ct(t){return ot(Y,t)}function ht(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function lt(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pt.length;o++)n=pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function yt(t,e){this.a=t===wt&&e||"",this.b=gt}function mt(t){return t instanceof yt&&t.constructor===yt&&t.b===gt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}yt.prototype.ra=!0,yt.prototype.qa=function(){return this.a},yt.prototype.toString=function(){return"Const{"+this.a+"}"};var gt={},wt={},_t=new yt(wt,"");function bt(t,e){this.a=t===At&&e||"",this.b=St}function Et(t){return t instanceof bt&&t.constructor===bt&&t.b===St?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function It(t,e){var n=mt(t);if(!Tt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof yt?mt(t):encodeURIComponent(String(t))})),new bt(At,t)}bt.prototype.ra=!0,bt.prototype.qa=function(){return this.a.toString()},bt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={},At={};function Nt(t,e){this.a=t===Dt&&e||"",this.b=Ot}function kt(t){return t instanceof Nt&&t.constructor===Nt&&t.b===Ot?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}Nt.prototype.ra=!0,Nt.prototype.qa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rt(t){return t instanceof Nt?t:(t="object"==typeof t&&t.ra?t.qa():String(t),xt.test(t)||(t="about:invalid#zClosurez"),new Nt(Dt,t))}var Ot={},Dt={};function Pt(){this.a="",this.b=Mt}function Lt(t){return t instanceof Pt&&t.constructor===Pt&&t.b===Mt?t.a:(D("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}Pt.prototype.ra=!0,Pt.prototype.qa=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Ft(t){var e=new Pt;return e.a=t,e}Ft("<!DOCTYPE html>");var Ut=Ft("");function jt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Vt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(X,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function qt(t){return qt[" "](t),t}Ft("<br>"),qt[" "]=c;var Ht,Bt,Wt=ct("Opera"),Gt=ct("Trident")||ct("MSIE"),zt=ct("Edge"),Qt=zt||Gt,$t=ct("Gecko")&&!(ot(Y.toLowerCase(),"webkit")&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),Kt=ot(Y.toLowerCase(),"webkit")&&!ct("Edge");function Yt(){var t=s.document;return t?t.documentMode:void 0}t:{var Jt="",Xt=(Bt=Y,$t?/rv:([^\);]+)(\)|;)/.exec(Bt):zt?/Edge\/([\d\.]+)/.exec(Bt):Gt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Bt):Kt?/WebKit\/(\S+)/.exec(Bt):Wt?/(?:Version)[ \/]?(\S+)/.exec(Bt):void 0);if(Xt&&(Jt=Xt?Xt[1]:""),Gt){var Zt=Yt();if(null!=Zt&&Zt>parseFloat(Jt)){Ht=String(Zt);break t}}Ht=Jt}var te,ee={};function ne(t){return function(t,e){var n=ee;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=J(String(Ht)).split("."),r=J(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=st(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||st(0==s[2].length,0==a[2].length)||st(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}te=s.document&&Gt?Yt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Bt){}var re=!Gt||9<=Number(te);function ie(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function oe(t,e){ht(e,(function(e,n){e&&"object"==typeof e&&e.ra&&(e=e.qa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ue.hasOwnProperty(n)?t.setAttribute(ue[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var se,ae,ue={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ce(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!l(o)||p(o)&&0<o.nodeType?r(o):q(le(o)?K(o):o,r)}}function he(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function le(t){if(t&&"number"==typeof t.length){if(p(t))return"function"==typeof t.item||"string"==typeof t.item;if(f(t))return"function"==typeof t.item}return!1}function fe(t){s.setTimeout((function(){throw t}),0)}function pe(t,e){ae||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);ae=function(){t.then(ye)}}else ae=function(){var t=ye;!f(s.setImmediate)||s.Window&&s.Window.prototype&&!ct("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(se||(se=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ct("Presto")&&(t=function(){var t=he(document,"IFRAME");t.style.display="none",function(t){var e=new bt(At,mt(_t));vt(t,"HTMLIFrameElement"),t.src=Et(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Lt(Ut)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ct("Trident")&&!ct("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),se(t)):s.setImmediate(t)}}(),de||(ae(),de=!0),ve.add(t,e)}var de=!1,ve=new M;function ye(){for(var t;t=U();){try{t.a.call(t.b)}catch(e){fe(e)}L(F,t)}de=!1}function me(t,e){if(this.a=ge,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=c)try{var n=this;t.call(e,(function(t){xe(n,we,t)}),(function(t){if(!(t instanceof Fe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}xe(n,_e,t)}))}catch(r){xe(this,_e,r)}}var ge=0,we=2,_e=3;function be(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}be.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ee=new P((function(){return new be}),(function(t){t.reset()}));function Ie(t,e,n){var r=Ee.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof me)return t;var e=new me(c);return xe(e,we,t),e}function Te(t){return new me((function(e,n){n(t)}))}function Se(t,e,n){Re(t,e,n,null)||pe(_(e,t))}function Ae(t){return new me((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Mb:!0,value:o}:{Mb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Se(t[o],_(i,o,!0),_(i,o,!1));else e(r)}))}function Ne(t,e){t.b||t.a!=we&&t.a!=_e||Oe(t),t.f?t.f.next=e:t.b=e,t.f=e}function ke(t,e,n,r){var i=Ie(null,null,null);return i.a=new me((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Fe?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,Ne(t,i),i.a}function xe(t,e,n){t.a==ge&&(t===n&&(e=_e,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Re(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,Oe(t),e!=_e||n instanceof Fe||function(t,e){t.g=!0,pe((function(){t.g&&Me.call(null,e)}))}(t,n)))}function Re(t,e,n,r){if(t instanceof me)return Ne(t,Ie(e||c,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(f(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(a){o(a)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Oe(t){t.h||(t.h=!0,pe(t.ec,t))}function De(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Pe(t,e,n,r){if(n==_e&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Le(e,n,r);else try{e.c?e.g.call(e.f):Le(e,n,r)}catch(i){Me.call(null,i)}L(Ee,e)}function Le(t,e,n){e==we?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}me.prototype.then=function(t,e,n){return ke(this,f(t)?t:null,f(e)?e:null,n)},me.prototype.$goog_Thenable=!0,(t=me.prototype).ma=function(t,e){return(t=Ie(t,t,e)).c=!0,Ne(this,t),this},t.o=function(t,e){return ke(this,null,t,e)},t.cancel=function(t){if(this.a==ge){var e=new Fe(t);pe((function(){!function t(e,n){if(e.a==ge)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==ge&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):De(r),Pe(r,o,_e,n)))}e.c=null}else xe(e,_e,n)}(this,e)}),this)}},t.Yc=function(t){this.a=ge,xe(this,we,t)},t.Zc=function(t){this.a=ge,xe(this,_e,t)},t.ec=function(){for(var t;t=De(this);)Pe(this,t,this.a,this.i);this.h=!1};var Me=fe;function Fe(t){R.call(this,t)}function Ue(){0!=je&&(Ve[d(this)]=this),this.wa=this.wa,this.na=this.na}E(Fe,R),Fe.prototype.name="cancel";var je=0,Ve={};function qe(t){if(!t.wa&&(t.wa=!0,t.Ba(),0!=je)){var e=d(t);if(0!=je&&t.na&&0<t.na.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ve[e]}}Ue.prototype.wa=!1,Ue.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var He=Object.freeze||function(t){return t},Be=!Gt||9<=Number(te),We=Gt&&!ne("9"),Ge=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",c,e),s.removeEventListener("test",c,e)}catch(n){}return t}();function ze(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Qe(t,e){if(ze.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if($t){t:{try{qt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:$e[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}ze.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Qe,ze);var $e=He({2:"touch",3:"pen",4:"mouse"});Qe.prototype.preventDefault=function(){Qe.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,We)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Qe.prototype.f=function(){return this.a};var Ke="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function Je(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++Ye,this.ua=this.Na=!1}function Xe(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function Ze(t){this.src=t,this.a={},this.b=0}function tn(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(Xe(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function en(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}Ze.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=en(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new Je(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var nn="closure_lm_"+(1e6*Math.random()|0),rn={};function on(t,e,n,r,i){if(r&&r.once)an(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)on(t,e[o],n,r,i);else n=yn(n),t&&t[Ke]?gn(t,e,n,p(r)?!!r.capture:!!r,i):sn(t,e,n,!1,r,i)}function sn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=p(i)?!!i.capture:!!i,a=dn(t);if(a||(t[nn]=a=new Ze(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=pn,e=Be?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ge||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(hn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function an(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)an(t,e[o],n,r,i);else n=yn(n),t&&t[Ke]?wn(t,e,n,p(r)?!!r.capture:!!r,i):sn(t,e,n,!0,r,i)}function un(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=yn(n),t&&t[Ke]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=en(o=t.a[e],n,r,i))&&(Xe(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=dn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=en(e,n,r,i)),(n=-1<t?e[t]:null)&&cn(n))}function cn(t){if("number"!=typeof t&&t&&!t.ua){var e=t.src;if(e&&e[Ke])tn(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(hn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=dn(e))?(tn(n,t),0==n.b&&(n.src=null,e[nn]=null)):Xe(t)}}}function hn(t){return t in rn?rn[t]:rn[t]="on"+t}function ln(t,e,n,r){var i=!0;if((t=dn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=fn(o,r),i=i&&!1!==o)}return i}function fn(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&cn(t),n.call(r,e)}function pn(t,e){if(t.ua)return!0;if(!Be){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Qe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=ln(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=ln(r[i],t,!1,e),n=n&&o}return n}return fn(t,new Qe(e,this))}function dn(t){return(t=t[nn])instanceof Ze?t:null}var vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function yn(t){return f(t)?t:(t[vn]||(t[vn]=function(e){return t.handleEvent(e)}),t[vn])}function mn(){Ue.call(this),this.u=new Ze(this),this.Yb=this,this.eb=null}function gn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function wn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function _n(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ua&&s.capture==n){var a=s.listener,u=s.Ta||s.src;s.Na&&tn(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function bn(t,e,n){if(f(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function En(t){var e=null;return new me((function(n,r){-1==(e=bn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function In(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Cn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(l(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Tn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Tn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Sn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];An(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)An(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function An(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(mn,Ue),mn.prototype[Ke]=!0,mn.prototype.addEventListener=function(t,e,n,r){on(this,t,e,n,r)},mn.prototype.removeEventListener=function(t,e,n,r){un(this,t,e,n,r)},mn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t)t=new ze(t,n);else if(t instanceof ze)t.target=t.target||n;else{var i=t;dt(t=new ze(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=_n(s,r,!0,t)&&i}if(i=_n(s=t.b=n,r,!0,t)&&i,i=_n(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=_n(s=t.b=e[o],r,!1,t)&&i;return i},mn.prototype.Ba=function(){if(mn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Xe(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=Tn.prototype).V=function(){Sn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return Sn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return An(this.b,t)?this.b[t]:e},t.set=function(t,e){An(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Nn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function kn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof kn?(this.h=void 0!==e?e:t.h,xn(this,t.f),this.i=t.i,this.b=t.b,Rn(this,t.l),this.c=t.c,On(this,Jn(t.a)),this.g=t.g):t&&(n=String(t).match(Nn))?(this.h=!!e,xn(this,n[1]||"",!0),this.i=Fn(n[2]||""),this.b=Fn(n[3]||"",!0),Rn(this,n[4]),this.c=Fn(n[5]||"",!0),On(this,n[6]||"",!0),this.g=Fn(n[7]||"")):(this.h=!!e,this.a=new Gn(null,this.h))}function xn(t,e,n){t.f=n?Fn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Rn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function On(t,e,n){e instanceof Gn?(t.a=e,function(t,e){e&&!t.f&&(zn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($n(this,e),Yn(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=Un(e,Bn)),t.a=new Gn(e,t.h))}function Dn(t,e,n){t.a.set(e,n)}function Pn(t,e){return t.a.get(e)}function Ln(t){return t instanceof kn?new kn(t):new kn(t,void 0)}function Mn(t,e){var n=new kn(null,void 0);return xn(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Fn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Un(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,jn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function jn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}kn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Un(e,Vn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(Un(e,Vn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Un(n,"/"==n.charAt(0)?Hn:qn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Un(n,Wn)),t.join("")},kn.prototype.resolve=function(t){var e=new kn(this),n=!!t.f;n?xn(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)Rn(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?On(e,Jn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Vn=/[#\/\?@]/g,qn=/[#\?:]/g,Hn=/[#\?]/g,Bn=/[#\?@]/g,Wn=/#/g;function Gn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function zn(t){t.a||(t.a=new Tn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Qn(t){var e=Cn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Gn(null,void 0);t=In(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Yn(n,i,o):n.add(i,o)}return n}function $n(t,e){zn(t),e=Xn(t,e),An(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,An((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Sn(t)))}function Kn(t,e){return zn(t),e=Xn(t,e),An(t.a.b,e)}function Yn(t,e,n){$n(t,e),0<n.length&&(t.c=null,t.a.set(Xn(t,e),K(n)),t.b+=n.length)}function Jn(t){var e=new Gn;return e.c=t.c,t.a&&(e.a=new Tn(t.a),e.b=t.b),e}function Xn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Zn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(s=n[i])&&(r.push(o),rr(i,r),r.push(":"),t(e,s,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":rr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new tr,t,e),e.join("")}function tr(){}(t=Gn.prototype).add=function(t,e){zn(this),this.c=null,t=Xn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){zn(this),this.a.forEach((function(n,r){q(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.X=function(){zn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){zn(this);var e=[];if("string"==typeof t)Kn(this,t)&&(e=$(e,this.a.get(Xn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=$(e,t[n])}return e},t.set=function(t,e){return zn(this),this.c=null,Kn(this,t=Xn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var er={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},nr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function rr(t,e){e.push('"',t.replace(nr,(function(t){var e=er[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),er[t]=e),e})),'"')}function ir(){var t=Er();return Gt&&!!te&&11==te||/Edge\/\d+/.test(t)}function or(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function sr(t,e){e=e||s.window;var n="about:blank";t&&(n=kt(Rt(t))),e.location.href=n}function ar(t){return!!((t=(t||Er()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ur(t){t=t||s.window;try{t.close()}catch(e){}}function cr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Er().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),wr(Er())==gr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:Rt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ct("iPhone")&&!ct("iPod")&&!ct("iPad")||ct("iPad")||ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=he(document,"A"),"HTMLAnchorElement"),e instanceof Nt||e instanceof Nt||(e="object"==typeof e&&e.ra?e.qa():String(e),xt.test(e)||(e="about:invalid#zClosurez"),e=new Nt(Dt,e)),s.href=kt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=kt(e),s&&(Qt&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Ft('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Vt(t)+'">'),r=s.document)&&(r.write(Lt(t)),r.close())):(s=r.open(kt(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var hr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lr=/^[^@]+@[^@]+$/;function fr(){var t=null;return new me((function(e){"complete"==s.document.readyState?e():(t=function(){e()},an(window,"load",t))})).o((function(e){throw un(window,"load",t),e}))}function pr(t){return t=t||Er(),!("file:"!==Ar()&&"ionic:"!==Ar()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function dr(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function vr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function yr(){return Xv.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Xv.a.INTERNAL.hasOwnProperty("node")?"Node":vr()?"Worker":"Browser"}function mr(){var t=yr();return"ReactNative"===t||"Node"===t}var gr="Firefox";function wr(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?gr:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":"Chrome":"Safari"}var _r={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function br(t,e){e=e||[];var n,r=[],i={};for(n in _r)i[_r[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=yr())?r=wr(i=Er()):"Worker"===r&&(r=wr(i=Er())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Er(){return s.navigator&&s.navigator.userAgent||""}function Ir(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Cr(){try{var t=s.localStorage,e=Or();if(t)return t.setItem(e,"1"),t.removeItem(e),!ir()||!!s.indexedDB}catch(n){return vr()&&!!s.indexedDB}return!1}function Tr(){return(Sr()||"chrome-extension:"===Ar()||pr())&&!mr()&&Cr()&&!vr()}function Sr(){return"http:"===Ar()||"https:"===Ar()}function Ar(){return s.location&&s.location.protocol||null}function Nr(t){return!ar(t=t||Er())&&wr(t)!=gr}function kr(t){return void 0===t?null:Zn(t)}function xr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Rr(t){if(null!==t)return JSON.parse(t)}function Or(t){return t||Math.floor(1e9*Math.random()).toString()}function Dr(t){return"Safari"!=wr(t=t||Er())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Pr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Lr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Er(),e=yr(),this.b=ar(t)||"ReactNative"===e}function Mr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Fr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Ur(){return!(!Ir("fireauth.oauthhelper",s)&&!Ir("fireauth.iframe",s))}Lr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Sr()&&"chrome-extension:"!==Ar()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var jr,Vr={};function qr(t){Vr[t]||(Vr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Hr={};Object.defineProperty(Hr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Hr,"abcd",{configurable:!0,enumerable:!0,value:2}),jr=2==Hr.abcd}catch(Bt){jr=!1}function Br(t,e,n){jr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Wr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Br(t,n,e[n])}function Gr(t){var e={};return Wr(e,t),e}function zr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Br(e,n,zr(t[n]));return e}function Qr(t){var e=t&&(t[Xr]?"phone":null);if(!(e&&t&&t[Jr]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");Br(this,"uid",t[Jr]),Br(this,"displayName",t[Kr]||null);var n=null;t[Yr]&&(n=new Date(t[Yr]).toUTCString()),Br(this,"enrollmentTime",n),Br(this,"factorId",e)}function $r(t){try{var e=new Zr(t)}catch(n){e=null}return e}Qr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Kr="displayName",Yr="enrolledAt",Jr="mfaEnrollmentId",Xr="phoneInfo";function Zr(t){Qr.call(this,t),Br(this,"phoneNumber",t[Xr])}function ti(t){var e={},n=t[ii],r=t[si],i=t[ai];if(t=$r(t[oi]),!i||i!=ni&&i!=ri&&!n||i==ri&&!r||i==ei&&!t)throw Error("Invalid checkActionCode response!");i==ri?(e[ci]=n||null,e[li]=n||null,e[ui]=r):(e[ci]=r||null,e[li]=r||null,e[ui]=n||null),e[hi]=t||null,Br(this,pi,i),Br(this,fi,zr(e))}E(Zr,Qr),Zr.prototype.v=function(){var t=Zr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var ei="REVERT_SECOND_FACTOR_ADDITION",ni="EMAIL_SIGNIN",ri="VERIFY_AND_CHANGE_EMAIL",ii="email",oi="mfaInfo",si="newEmail",ai="requestType",ui="email",ci="fromEmail",hi="multiFactorInfo",li="previousEmail",fi="data",pi="operation";function di(t){var e=Pn(t=Ln(t),vi)||null,n=Pn(t,yi)||null,r=Pn(t,wi)||null;if(r=r&&bi[r]||null,!e||!n||!r)throw new I("argument-error",vi+", "+yi+"and "+wi+" are required in a valid action code URL.");Wr(this,{apiKey:e,operation:r,code:n,continueUrl:Pn(t,mi)||null,languageCode:Pn(t,gi)||null,tenantId:Pn(t,_i)||null})}var vi="apiKey",yi="oobCode",mi="continueUrl",gi="languageCode",wi="mode",_i="tenantId",bi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ei,signIn:ni,verifyAndChangeEmail:ri,verifyEmail:"VERIFY_EMAIL"};function Ei(t){try{return new di(t)}catch(e){return null}}function Ii(t){var e=t[Ni];if(void 0===e)throw new I("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new I("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ci];if(n&&"object"==typeof n){e=n[Ri];var r=n[ki];if(n=n[xi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new I("argument-error",ki+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new I("argument-error",xi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new I("argument-error",Ri+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new I("missing-android-pkg-name")}}else if(void 0!==n)throw new I("argument-error",Ci+" property must be a non null object when specified.");if(this.f=null,(e=t[Ai])&&"object"==typeof e){if("string"==typeof(e=e[Oi])&&e.length)this.f=e;else if(void 0!==e)throw new I("argument-error",Oi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new I("argument-error",Ai+" property must be a non null object when specified.");if(void 0!==(e=t[Si])&&"boolean"!=typeof e)throw new I("argument-error",Si+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ti])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new I("argument-error",Ti+" property must be a non empty string when specified.");this.i=t||null}var Ci="android",Ti="dynamicLinkDomain",Si="handleCodeInApp",Ai="iOS",Ni="url",ki="installApp",xi="minimumVersion",Ri="packageName",Oi="bundleId";function Di(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Pi=null;function Li(t){var e=Fi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,b(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Mi(t){try{return new Li(t)}catch(e){return null}}function Fi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Pi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Pi){Pi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Pi[o]&&(Pi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(r){}return null}Li.prototype.S=function(){return this.f},Li.prototype.i=function(){return this.b},Li.prototype.toString=function(){return this.g};var Ui="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),ji=["client_id","response_type","scope","redirect_uri","state"],Vi={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:ji},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:ji},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:ji},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Ui},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function qi(t){for(var e in Vi)if(Vi[e].ea==t)return Vi[e];return null}function Hi(t){var e={};e["facebook.com"]=Qi,e["google.com"]=Ki,e["github.com"]=$i,e["twitter.com"]=Yi;var n=t&&t[Wi];try{if(n)return e[n]?new e[n](t):new zi(t);if(void 0!==t[Bi])return new Gi(t)}catch(r){}return null}var Bi="idToken",Wi="providerId";function Gi(t){var e=t[Wi];if(!e&&t[Bi]){var n=Mi(t[Bi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Br(this,"providerId",e),Br(this,"isNewUser",n)}function zi(t){Gi.call(this,t),Br(this,"profile",zr((t=Rr(t.rawUserInfo||"{}"))||{}))}function Qi(t){if(zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function $i(t){if(zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Br(this,"username",this.profile&&this.profile.login||null)}function Ki(t){if(zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Yi(t){if(zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Br(this,"username",t.screenName||null)}function Ji(t){var e=Ln(t),n=Pn(e,"link"),r=Pn(Ln(n),"link");return e=Pn(e,"deep_link_id"),Pn(Ln(e),"link")||e||r||n||t}function Xi(t,e){if(!t&&!e)throw new I("internal-error","Internal assert: no raw session string available");if(t&&e)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Zi:to}E(zi,Gi),E(Qi,zi),E($i,zi),E(Ki,zi),E(Yi,zi);var Zi="enroll",to="signin";function eo(){}function no(t,e){return t.then((function(t){if(t[Hs]){var n=Mi(t[Hs]);if(!n||e!=n.h)throw new I("user-mismatch");return t}throw new I("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==S+"user-not-found"?new I("user-mismatch"):t}))}function ro(t,e){if(!e)throw new I("internal-error","failed to construct a credential");this.a=e,Br(this,"providerId",t),Br(this,"signInMethod",t)}function io(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function oo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new ro(t.providerId,t.pendingToken)}catch(e){}return null}function so(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Br(this,"idToken",e.idToken),e.accessToken&&Br(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Br(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");Br(this,"accessToken",e.oauthToken),Br(this,"secret",e.oauthTokenSecret)}Br(this,"providerId",t),Br(this,"signInMethod",n)}function ao(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Qn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function uo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new so(t.providerId,e,t.signInMethod)}catch(n){}}return null}function co(t,e){this.Oc=e||[],Wr(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(qi(t)||{}).Ha||null,this.kb=null}function ho(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');co.call(this,t,[])}function lo(t){co.call(this,t,ji),this.a=[]}function fo(){lo.call(this,"facebook.com")}function po(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new fo).credential({accessToken:e})}function vo(){lo.call(this,"github.com")}function yo(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new vo).credential({accessToken:e})}function mo(){lo.call(this,"google.com"),this.Aa("profile")}function go(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new mo).credential({idToken:n,accessToken:e})}function wo(){co.call(this,"twitter.com",Ui)}function _o(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new so("twitter.com",n,"twitter.com")}function bo(t,e,n){this.a=t,this.f=e,Br(this,"providerId","password"),Br(this,"signInMethod",n===Io.EMAIL_LINK_SIGN_IN_METHOD?Io.EMAIL_LINK_SIGN_IN_METHOD:Io.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Eo(t){return t&&t.email&&t.password?new bo(t.email,t.password,t.signInMethod):null}function Io(){Wr(this,{providerId:"password",isOAuthProvider:!1})}function Co(t,e){if(!(e=To(e)))throw new I("argument-error","Invalid email link!");return new bo(t,e.code,Io.EMAIL_LINK_SIGN_IN_METHOD)}function To(t){return(t=Ei(t=Ji(t)))&&t.operation===ni?t:null}function So(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new I("internal-error");this.a=t,Br(this,"providerId","phone"),this.ea="phone",Br(this,"signInMethod","phone")}function Ao(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new So(e)}return null}function No(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function ko(t){try{this.a=t||Xv.a.auth()}catch(e){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Wr(this,{providerId:"phone",isOAuthProvider:!1})}function xo(t,e){if(!t)throw new I("missing-verification-id");if(!e)throw new I("missing-verification-code");return new So({bb:t,ab:e})}function Ro(t){if(t.temporaryProof&&t.phoneNumber)return new So({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return go(o,n);case"facebook.com":return po(n);case"github.com":return yo(n);case"twitter.com":return _o(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new ro(e,s):new so(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new lo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Oo(t){if(!t.isOAuthProvider)throw new I("invalid-oauth-provider")}function Do(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function Po(t){return(t=t||{}).type?new Do(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&C(t.error),t.postBody,t.tenantId):null}function Lo(){this.b=null,this.a=[]}Xi.prototype.Fa=function(){return Ce(this.a?this.a:this.b)},Xi.prototype.v=function(){return this.type==Zi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},eo.prototype.ia=function(){},eo.prototype.b=function(){},eo.prototype.c=function(){},eo.prototype.v=function(){},ro.prototype.ia=function(t){return aa(t,io(this))},ro.prototype.b=function(t,e){var n=io(this);return n.idToken=e,ua(t,n)},ro.prototype.c=function(t,e){return no(ca(t,io(this)),e)},ro.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},so.prototype.ia=function(t){return aa(t,ao(this))},so.prototype.b=function(t,e){var n=ao(this);return n.idToken=e,ua(t,n)},so.prototype.c=function(t,e){return no(ca(t,ao(this)),e)},so.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},co.prototype.Ia=function(t){return this.Fb=ft(t),this},E(ho,co),E(lo,co),lo.prototype.Aa=function(t){return G(this.a,t)||this.a.push(t),this},lo.prototype.Nb=function(){return K(this.a)},lo.prototype.credential=function(t,e){var n;if(!(n=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new so(this.providerId,n,this.providerId)},E(fo,lo),Br(fo,"PROVIDER_ID","facebook.com"),Br(fo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(vo,lo),Br(vo,"PROVIDER_ID","github.com"),Br(vo,"GITHUB_SIGN_IN_METHOD","github.com"),E(mo,lo),Br(mo,"PROVIDER_ID","google.com"),Br(mo,"GOOGLE_SIGN_IN_METHOD","google.com"),E(wo,co),Br(wo,"PROVIDER_ID","twitter.com"),Br(wo,"TWITTER_SIGN_IN_METHOD","twitter.com"),bo.prototype.ia=function(t){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?Wa(t,ma,{email:this.a,oobCode:this.f}):Wa(t,ja,{email:this.a,password:this.f})},bo.prototype.b=function(t,e){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?Wa(t,ga,{idToken:e,email:this.a,oobCode:this.f}):Wa(t,Ra,{idToken:e,email:this.a,password:this.f})},bo.prototype.c=function(t,e){return no(this.ia(t),e)},bo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Wr(Io,{PROVIDER_ID:"password"}),Wr(Io,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Wr(Io,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),So.prototype.ia=function(t){return t.cb(No(this))},So.prototype.b=function(t,e){var n=No(this);return n.idToken=e,Wa(t,qa,n)},So.prototype.c=function(t,e){var n=No(this);return n.operation="REAUTH",no(t=Wa(t,Ha,n),e)},So.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},ko.prototype.cb=function(t,e){var n=this.a.b;return Ce(e.verify()).then((function(r){if("string"!=typeof r)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(i&&i.type==Zi?i.Fa().then((function(t){return function(t,e){return Wa(t,Da,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==to?i.Fa().then((function(e){return function(t,e){return Wa(t,Pa,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return Wa(t,ka,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Wr(ko,{PROVIDER_ID:"phone"}),Wr(ko,{PHONE_SIGN_IN_METHOD:"phone"}),Do.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Do.prototype.S=function(){return this.h},Do.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Mo,Fo=null;function Uo(t){var e="unauthorized-domain",n=void 0,r=Ln(t);t=r.b,"chrome-extension"==(r=r.f)?n=jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",I.call(this,e,n)}function jo(t,e,n){I.call(this,t,n),(t=e||{}).Gb&&Br(this,"email",t.Gb),t.da&&Br(this,"phoneNumber",t.da),t.credential&&Br(this,"credential",t.credential),t.Wb&&Br(this,"tenantId",t.Wb)}function Vo(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:Ro(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new I(e,t.message||void 0);return new jo(e,n,t.message)}return null}function qo(){}function Ho(){}function Bo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Wo(){}function Go(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.oc,this),this.a.onerror=w(this.Pb,this),this.a.onprogress=w(this.pc,this),this.a.ontimeout=w(this.tc,this)}function zo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Qo(t,e,n){this.reset(t,e,n,void 0,void 0)}function $o(t){this.f=t,this.b=this.c=this.a=null}function Ko(t,e){this.name=t,this.value=e}E(Uo,I),E(jo,I),jo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&dt(t,e),t},jo.prototype.toJSON=function(){return this.v()},qo.prototype.c=null,E(Ho,qo),Ho.prototype.a=function(){var t=Bo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Ho.prototype.b=function(){var t={};return Bo(this)&&(t[0]=!0,t[1]=!0),t},Mo=new Ho,E(Wo,qo),Wo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Go;throw Error("Unsupported browser")},Wo.prototype.b=function(){return{}},(t=Go.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,zo(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",zo(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,zo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Qo.prototype.a=null,Qo.prototype.reset=function(t,e,n,r,i){r||b(),delete this.a},Ko.prototype.toString=function(){return this.name};var Yo=new Ko("SEVERE",1e3),Jo=new Ko("WARNING",900),Xo=new Ko("CONFIG",700),Zo=new Ko("FINE",500);$o.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(D("Root logger has no level set."),null)}(this).value)for(f(e)&&(e=e()),t=new Qo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ts={},es=null;function ns(t){var e;if(es||(es=new $o(""),ts[""]=es,es.c=Xo),!(e=ts[t])){e=new $o(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ns(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ts[t]=e}return e}function rs(t,e){t&&t.log(Zo,e,void 0)}function is(t){this.f=t}function os(t){mn.call(this),this.s=t,this.readyState=ss,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ns("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}E(is,qo),is.prototype.a=function(){return new os(this.f)},is.prototype.b=function(t){return function(){return t}}({}),E(os,mn);var ss=0;function as(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function us(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,cs(t)}function cs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function hs(t){mn.call(this),this.headers=new Tn,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=ls,this.w=this.R=!1}(t=os.prototype).open=function(t,e){if(this.readyState!=ss)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,cs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,us(this,!1)),this.readyState=ss},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,cs(this)),this.a&&(this.readyState=3,cs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,as(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?us(this,!0):cs(this),3==this.readyState&&as(this)}},t.rc=function(t){this.a&&(this.response=this.responseText=t,us(this,!0))},t.qc=function(t){this.a&&(this.response=t,us(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Jo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&us(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Jo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Jo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},E(hs,mn);var ls="";hs.prototype.b=ns("goog.net.XhrIo");var fs=/^https?$/i,ps=["POST","PUT"];function ds(t){return"content-type"==t.toLowerCase()}function vs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ys(t),gs(t)}function ys(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ms(t){if(t.c&&void 0!==o)if(t.B[1]&&4==_s(t)&&2==bs(t))rs(t.b,Es(t,"Local request error detected and ignored"));else if(t.i&&4==_s(t))bn(t.Sb,0,t);else if(t.dispatchEvent("readystatechange"),4==_s(t)){rs(t.b,Es(t,"Request complete")),t.c=!1;try{var e,n=bs(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(Nn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!fs.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<_s(t)?t.a.statusText:""}catch(h){rs(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+bs(t)+"]",ys(t)}}finally{gs(t)}}}function gs(t,e){if(t.a){ws(t);var n=t.a,r=t.B[0]?c:null;t.a=null,t.B=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(Yo,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function ws(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function _s(t){return t.a?t.a.readyState:0}function bs(t){try{return 2<_s(t)?t.a.status:-1}catch(e){return-1}}function Es(t,e){return e+" ["+t.P+" "+t.l+" "+bs(t)+"]"}function Is(t){var e=Ps;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Cs(t,e,n){t.a=!0,t.c=n,t.f=!e,Ns(t)}function Ts(t){if(t.a){if(!t.u)throw new ks(t);t.u=!1}}function Ss(t,e,n,r){t.g.push([e,n,r]),t.a&&Ns(t)}function As(t){return W(t.g,(function(t){return f(t[1])}))}function Ns(t){if(t.h&&t.a&&As(t)){var e=t.h,n=Os[e];n&&(s.clearTimeout(n.a),delete Os[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,As(t)||(n=!0)}}t.c=e,r&&(u=w(t.m,t,!0),r=w(t.m,t,!1),e instanceof Is?(Ss(e,u,r),e.B=!0):e.then(u,r)),n&&(e=new Rs(e),Os[e.a]=e,t.h=e.a)}function ks(){R.call(this)}function xs(){R.call(this)}function Rs(t){this.a=s.setTimeout(w(this.c,this),0),this.b=t}(t=hs.prototype).Ka=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",rs(this.b,Es(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(rs(this.b,Es(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),gs(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),gs(this,!0)),hs.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?ms(this):this.Hc())},t.Hc=function(){ms(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ls:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Yo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return rs(this.b,"Can not get response: "+e.message),null}},Is.prototype.cancel=function(t){if(this.a)this.c instanceof Is&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new xs(this),Ts(this),Cs(this,!1,t))}},Is.prototype.m=function(t,e){this.i=!1,Cs(this,t,e)},Is.prototype.then=function(t,e,n){var r,i,o=new me((function(t,e){r=t,i=e}));return Ss(this,r,(function(t){t instanceof xs?o.cancel():i(t)})),o.then(t,e,n)},Is.prototype.$goog_Thenable=!0,E(ks,R),ks.prototype.message="Deferred has already fired",ks.prototype.name="AlreadyCalledError",E(xs,R),xs.prototype.message="Deferred was canceled",xs.prototype.name="CanceledError",Rs.prototype.c=function(){throw delete Os[this.a],this.b};var Os={};function Ds(t){var e={},n=e.document||document,r=Et(t).toString(),i=he(document,"SCRIPT"),o={Tb:i,Ka:void 0},c=new Is(o),h=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(h=window.setTimeout((function(){Ls(i,!0);var t=new Us(Fs,"Timeout reached for loading script "+r);Ts(c),Cs(c,!1,t)}),l),o.Ka=h),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ls(i,e.ud||!1,h),Ts(c),Cs(c,!0,null))},i.onerror=function(){Ls(i,!0,h);var t=new Us(Ms,"Error while loading script "+r);Ts(c),Cs(c,!1,t)},dt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),oe(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Et(e),null===u&&(u=(e=(e=s.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&a.test(e)?e:""),(e=u)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),c}function Ps(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&Ls(t,!0,this.Ka)}}function Ls(t,e,n){null!=n&&s.clearTimeout(n),t.onload=c,t.onerror=c,t.onreadystatechange=c,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ms=0,Fs=1;function Us(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function js(t){this.f=t}function Vs(t,e,n){if(this.c=t,this.u=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Bs,this.g=ft(t.secureTokenHeaders||Ws),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Gs,this.a=ft(t.firebaseHeaders||zs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==yr(),!(n=s.XMLHttpRequest||n&&Xv.a.INTERNAL.node&&Xv.a.INTERNAL.node.XMLHttpRequest)&&!vr())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=vr()?new is(self):mr()?new js(n):new Wo,this.b=null}E(Us,R),E(js,qo),js.prototype.a=function(){return new this.f},js.prototype.b=function(){return{}};var qs,Hs="idToken",Bs=new Lr(3e4,6e4),Ws={"Content-Type":"application/x-www-form-urlencoded"},Gs=new Lr(3e4,6e4),zs={"Content-Type":"application/json"};function Qs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function $s(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Ks(t,e,n,r,i,o,a){(function(){var t=Er();return!((t="Chrome"!=wr(t)?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Gt&&te&&!(9<te))})()||vr()?t=w(t.w,t):(qs||(qs=new me((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(s[Js]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ss(t,null,e,void 0)}(Ds(It(Ys,{onload:Js})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=w(t.s,t)),t(e,n,r,i,o,a)}Vs.prototype.S=function(){return this.b},Vs.prototype.w=function(t,e,n,r,i,o){if(vr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new hs(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}gn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return rs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),wn(a,"ready",(function(){u&&clearTimeout(u),qe(this)})),wn(a,"timeout",(function(){u&&clearTimeout(u),qe(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.N=!1,t.c=!0,t.a=t.D?t.D.a():Mo.a(),t.B=function(t){return t.c||(t.c=t.b())}(t.D?t.D:Mo),t.a.onreadystatechange=w(t.Sb,t);try{rs(t.b,Es(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(a){return rs(t.b,Es(t,"Error opening Xhr: "+a.message)),void vs(t,a)}e=r||"";var o=new Tn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||"string"==typeof t)q(t,e,void 0);else for(var n=Cn(t),r=In(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=ds,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.X()),r=s.FormData&&e instanceof s.FormData,!G(ps,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{ws(t),0<t.g&&(t.w=function(t){return Gt&&ne(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),rs(t.b,Es(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.w)),t.w?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ka,t)):t.s=bn(t.Ka,t.g,t)),rs(t.b,Es(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){rs(t.b,Es(t,"Send error: "+a.message)),vs(t,a)}}(a,t,n,r,i)};var Ys=new yt(wt,"https://apis.google.com/js/client.js?onload=%{onload}"),Js="__fcb"+Math.floor(1e6*Math.random()).toString();function Xs(t){if("string"!=typeof(t=t.email)||!lr.test(t))throw new I("invalid-email")}function Zs(t){"email"in t&&Xs(t)}function ta(t){if(!t[Hs]){if(t.mfaPendingCredential)throw new I("multi-factor-auth-required",null,ft(t));throw new I("internal-error")}}function ea(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new I("internal-error")}else{if(!t.sessionInfo)throw new I("missing-verification-id");if(!t.code)throw new I("missing-verification-code")}}Vs.prototype.s=function(t,e,n,r,i){var o=this;qs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Vs.prototype.vb=function(){return Wa(this,Oa,{})},Vs.prototype.xb=function(t,e){return Wa(this,xa,{idToken:t,email:e})},Vs.prototype.yb=function(t,e){return Wa(this,Ra,{idToken:t,password:e})};var na={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ra(t){if(!t.phoneVerificationInfo)throw new I("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new I("missing-verification-code")}function ia(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new I("internal-error")}function oa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Kn(t=new Gn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function sa(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Vo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Vo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Vo(t)):t.errorMessage&&(e=Ga(t.errorMessage)),e)throw e;ta(t)}function aa(t,e){return e.returnIdpCredential=!0,Wa(t,La,e)}function ua(t,e){return e.returnIdpCredential=!0,Wa(t,Fa,e)}function ca(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Wa(t,Ma,e)}function ha(t){if(!t.oobCode)throw new I("invalid-action-code")}(t=Vs.prototype).zb=function(t,e){var n={idToken:t},r=[];return ht(na,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Wa(this,xa,n)},t.rb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),Wa(this,Ta,t)},t.sb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),Wa(this,Ea,t)},t.qb=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Wa(this,Ia,t)},t.Ab=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Wa(this,Ca,t)},t.cb=function(t){return Wa(this,Va,t)},t.jb=function(t,e){return Wa(this,Na,{oobCode:t,newPassword:e})},t.Pa=function(t){return Wa(this,fa,{oobCode:t})},t.fb=function(t){return Wa(this,la,{oobCode:t})};var la={endpoint:"setAccountInfo",A:ha,Y:"email",C:!0},fa={endpoint:"resetPassword",A:ha,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new I("internal-error")},C:!0},pa={endpoint:"signupNewUser",A:function(t){if(Xs(t),!t.password)throw new I("weak-password")},G:ta,U:!0,C:!0},da={endpoint:"createAuthUri",C:!0},va={endpoint:"deleteAccount",M:["idToken"]},ya={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=h(t.deleteProvider))throw new I("internal-error")}},ma={endpoint:"emailLinkSignin",M:["email","oobCode"],A:Xs,G:ta,U:!0,C:!0},ga={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:Xs,G:ta,U:!0},wa={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:ra,G:ta,C:!0,La:!0},_a={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:ra,G:ta,C:!0,La:!0},ba={endpoint:"getAccountInfo"},Ea={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new I("internal-error");Xs(t)},Y:"email",C:!0},Ia={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new I("internal-error")},Y:"email",C:!0},Ca={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new I("internal-error")},Y:"email",C:!0},Ta={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new I("internal-error");Xs(t)},Y:"email",C:!0},Sa={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},Aa={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new I("internal-error")}},Na={endpoint:"resetPassword",A:ha,Y:"email",C:!0},ka={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},xa={endpoint:"setAccountInfo",M:["idToken"],A:Zs,U:!0},Ra={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(Zs(t),!t.password)throw new I("weak-password")},G:ta,U:!0},Oa={endpoint:"signupNewUser",G:ta,U:!0,C:!0},Da={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new I("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new I("internal-error")},C:!0,La:!0},Pa={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new I("internal-error")},C:!0,La:!0},La={endpoint:"verifyAssertion",A:ia,Wa:oa,G:sa,U:!0,C:!0},Ma={endpoint:"verifyAssertion",A:ia,Wa:oa,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new I("user-not-found");if(t.errorMessage)throw Ga(t.errorMessage);ta(t)},U:!0,C:!0},Fa={endpoint:"verifyAssertion",A:function(t){if(ia(t),!t.idToken)throw new I("internal-error")},Wa:oa,G:sa,U:!0},Ua={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new I("invalid-custom-token")},G:ta,U:!0,C:!0},ja={endpoint:"verifyPassword",A:function(t){if(Xs(t),!t.password)throw new I("wrong-password")},G:ta,U:!0,C:!0},Va={endpoint:"verifyPhoneNumber",A:ea,G:ta,C:!0},qa={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new I("internal-error");ea(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Vo(t);ta(t)}},Ha={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ea,G:ta,C:!0},Ba={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Hs]^!!t.refreshToken)throw new I("internal-error")},C:!0,La:!0};function Wa(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Te(new I("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return Ce(n).then(e.A).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=Ln(e+n);Dn(a,"key",t.c),s&&Dn(a,"cb",b().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Dn(a,c,i[c]);return new me((function(e,n){Ks(t,a.toString(),(function(t){t?t.error?n(za(t,o||{})):e(t):n(new I("network-request-failed"))}),r,u?void 0:Zn(xr(i)),t.a,t.i.get())}))}(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)})).then((function(t){return r=t,e.Wa?e.Wa(n,r):r})).then(e.G).then((function(){if(!e.Y)return r;if(!(e.Y in r))throw new I("internal-error");return r[e.Y]}))}function Ga(t){return za({error:{errors:[{message:t}],code:400,message:t}})}function za(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new I(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new I(r[i],e);return!e&&t&&(e=kr(t)),new I("internal-error",e)}function Qa(t){this.b=t,this.a=null,this.nb=function(t){return(Ja||(Ja=new me((function(t,e){function n(){Pr(),Ir("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Pr(),e(Error("Network Error"))},timeout:Ka.get()})}if(Ir("gapi.iframes.Iframe"))t();else if(Ir("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Ir("gapi.load")?n():e(Error("Network Error"))},Ce(Ds(r=It($a,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw Ja=null,t})))).then((function(){return new me((function(e,n){Ir("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Ya.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var $a=new yt(wt,"https://apis.google.com/js/api.js?onload=%{onload}"),Ka=new Lr(3e4,6e4),Ya=new Lr(5e3,15e3),Ja=null;function Xa(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Mn(this.i,"/__/auth/iframe"),Dn(this.a,"apiKey",this.g),Dn(this.a,"appName",this.h),this.b=null,this.c=[]}function Za(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function tu(t){try{return Xv.a.app(t).auth().Ea()}catch(e){return[]}}function eu(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function nu(t){var e=or();return function(t){return Wa(t,Sa,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Ln(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Ln(o).b==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:hr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Uo(or())}))}function ru(t){return t.l?t.l:(t.l=fr().then((function(){if(!t.s){var e=t.c,n=t.h,r=tu(t.b),i=new Xa(t.u,t.f,t.b);i.f=e,i.b=n,i.c=K(r||[]),t.s=i.toString()}t.i=new Qa(t.s),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then((function(){t.a.register("authEvent",e,Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Po(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)}))}(t)})),t.l)}function iu(t){return t.m||(t.w=t.c?br(t.c,tu(t.b)):null,t.m=new Vs(t.f,k(t.h),t.w)),t.m}function ou(t,e,n,r,i,o,s,a,u,c,h){return(t=new Za(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ft(u||null),t.f=c,t.ub(h).toString()}function su(t){if(this.a=t||Xv.a.INTERNAL.reactNative&&Xv.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function au(t){this.b=t,this.a={},this.f=w(this.c,this)}Xa.prototype.toString=function(){return this.f?Dn(this.a,"v",this.f):$n(this.a.a,"v"),this.b?Dn(this.a,"eid",this.b):$n(this.a.a,"eid"),this.c.length?Dn(this.a,"fw",this.c.join(",")):$n(this.a.a,"fw"),this.a.toString()},Za.prototype.ub=function(t){return this.h=t,this},Za.prototype.toString=function(){var t=Mn(this.s,"/__/auth/handler");if(Dn(t,"apiKey",this.m),Dn(t,"appName",this.c),Dn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=Xv.a.app(this.c).auth().ja()}catch(a){n=null}for(var r in e.kb=n,Dn(t,"providerId",this.a.providerId),n=xr((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ft(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),lt(n)||Dn(t,"customParameters",kr(n))}if("function"==typeof this.a.Nb&&(e=this.a.Nb()).length&&Dn(t,"scopes",e.join(",")),this.l?Dn(t,"redirectUrl",this.l):$n(t.a,"redirectUrl"),this.g?Dn(t,"eventId",this.g):$n(t.a,"eventId"),this.i?Dn(t,"v",this.i):$n(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Pn(t,s)&&Dn(t,s,this.b[s]);return this.h?Dn(t,"tid",this.h):$n(t.a,"tid"),this.f?Dn(t,"eid",this.f):$n(t.a,"eid"),(s=tu(this.c)).length&&Dn(t,"fw",s.join(",")),t.toString()},(t=eu.prototype).Lb=function(t,e,n){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,s=!1;return this.ka().then((function(){(function(t){var e={type:"webStorageSupport"};return ru(t).then((function(){return function(t,e){return t.nb.then((function(){return new me((function(n){t.a.send(e.type,e,n,Ir("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&ur(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new me((function(e){return function n(){En(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return En(n).then((function(){e(r)}))}))},t.Ub=function(){var t=Er();return!Nr(t)&&!Dr(t)},t.Qb=function(){return!1},t.Jb=function(t,e,n,r,i,o,s,a){if(!t)return Te(new I("popup-blocked"));if(s&&!Nr())return this.ka().o((function(e){ur(t),i(e)})),r(),Ce();this.a||(this.a=nu(iu(this)));var u=this;return this.a.then((function(){var e=u.ka().o((function(e){throw ur(t),i(e),e}));return r(),e})).then((function(){Oo(n),s||sr(ou(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,a),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Kb=function(t,e,n,r){this.a||(this.a=nu(iu(this)));var i=this;return this.a.then((function(){Oo(e),sr(ou(i.u,i.f,i.b,t,e,or(),n,i.c,void 0,i.h,r))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ka=function(){var t=this;return ru(this).then((function(){return t.i.nb})).o((function(){throw t.a=null,new I("network-request-failed")}))},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(t){Q(this.g,(function(e){return e==t}))},(t=su.prototype).get=function(t){return Ce(this.a.getItem(t)).then((function(t){return t&&Rr(t)}))},t.set=function(t,e){return Ce(this.a.setItem(t,kr(e)))},t.T=function(t){return Ce(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var uu,cu=[];function hu(t,e,n){lt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function lu(t){this.a=t}function fu(t){this.c=t,this.b=!1,this.a=[]}function pu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Te(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new me((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),t.a.push(c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}}),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return du(t,c),e})).o((function(e){throw du(t,c),e}))}function du(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Q(t.a,(function(t){return t==e}))}}function vu(){if(!mu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=s.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t=this;vr()&&self?(this.l=function(){var t=vr()?self:null;if(q(cu,(function(n){n.b==t&&(e=n)})),!e){var e=new au(t);cu.push(e)}return e}(),hu(this.l,"keyChanged",(function(e,n){return Eu(t).then((function(e){return 0<e.length&&q(t.a,(function(t){t(e)})),{keyProcessed:G(e,n.key)}}))})),hu(this.l,"ping",(function(){return Ce(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Ce().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ce(null)}().then((function(e){(t.h=e)&&(t.g=new fu(new lu(e)),pu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&G(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function yu(t){return t.m||(t.m=function t(e){return new me((function(n,r){var i=e.u.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(e){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new me((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(e).then((function(){return t(e)})).then((function(t){n(t)})).o((function(t){r(t)}))}}))}(t)),t.m}function mu(){try{return!!s.indexedDB}catch(Bt){return!1}}function gu(t){return t.objectStore("firebaseLocalStorage")}function wu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function _u(t){return new me((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function bu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?pu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ce()}function Eu(t){return yu(t).then((function(t){var e=gu(wu(t,!1));return e.getAll?_u(e.getAll()):new me((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function Iu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Cu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then((function(){if(mu()){var t=Or(),r="__sak"+t;return uu||(uu=new vu),(n=uu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ba((function(t){q(e.a,(function(e){e(t)}))})),t}))}function Tu(){this.a={},this.type="inMemory"}function Su(){if(!function(){var t="Node"==yr();if(!(t=Au()||t&&Xv.a.INTERNAL.node&&Xv.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==yr())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Au()||Xv.a.INTERNAL.node.localStorage,this.type="localStorage"}function Au(){try{var t=s.localStorage,e=Or();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Nu(){this.type="nullStorage"}function ku(){if(!function(){var t="Node"==yr();if(!(t=xu()||t&&Xv.a.INTERNAL.node&&Xv.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==yr())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=xu()||Xv.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function xu(){try{var t=s.sessionStorage,e=Or();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Ru(){var t={};t.Browser=Pu,t.Node=Lu,t.ReactNative=Mu,t.Worker=Fu,this.a=t[yr()]}au.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];q(r,(function(e){i.push(Ce().then((function(){return e(t.origin,t.data.data)})))})),Ae(i).then((function(r){var i=[];q(r,(function(t){i.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})})),q(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},lu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},fu.prototype.close=function(){for(;0<this.a.length;)du(this,this.a[0]);this.b=!0},(t=vu.prototype).set=function(t,e){var n,r=!1,i=this;return yu(this).then((function(e){return _u((e=gu(wu(n=e,!0))).get(t))})).then((function(o){var s=gu(wu(n,!0));return o?(o.value=e,_u(s.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,_u(s.add(o)))})).then((function(){return i.c[t]=e,bu(i,t)})).ma((function(){r&&i.b--}))},t.get=function(t){return yu(this).then((function(e){return _u(gu(wu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=!1,n=this;return yu(this).then((function(r){return e=!0,n.b++,_u(gu(wu(r,!0)).delete(t))})).then((function(){return delete n.c[t],bu(n,t)})).ma((function(){e&&n.b--}))},t.ba=function(t){0==this.a.length&&function(t){Iu(t),function e(){t.f=setTimeout((function(){t.i=Eu(t).then((function(e){0<e.length&&q(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ha=function(t){Q(this.a,(function(e){return e==t})),0==this.a.length&&Iu(this)},(t=Cu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ba=function(t){this.a.push(t)},t.ha=function(t){Q(this.a,(function(e){return e==t}))},(t=Tu.prototype).get=function(t){return Ce(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ce()},t.T=function(t){return delete this.a[t],Ce()},t.ba=function(){},t.ha=function(){},(t=Su.prototype).get=function(t){var e=this;return Ce().then((function(){return Rr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=kr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ba=function(t){s.window&&on(s.window,"storage",t)},t.ha=function(t){s.window&&un(s.window,"storage",t)},(t=Nu.prototype).get=function(){return Ce(null)},t.set=function(){return Ce()},t.T=function(){return Ce()},t.ba=function(){},t.ha=function(){},(t=ku.prototype).get=function(t){var e=this;return Ce().then((function(){return Rr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=kr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ba=function(){},t.ha=function(){};var Ou,Du,Pu={F:Su,$a:ku},Lu={F:Su,$a:ku},Mu={F:su,$a:Nu},Fu={F:Su,$a:Nu},Uu={od:"local",NONE:"none",qd:"session"};function ju(){var t=!(Dr(Er())||!dr()),e=Nr(),n=Cr();this.m=t,this.h=e,this.l=n,this.a={},Ou||(Ou=new Ru),t=Ou;try{this.g=!ir()&&Ur()||!s.indexedDB?new t.a.F:new Cu(vr()?new Tu:new t.a.F)}catch(r){this.g=new Tu,this.h=!0}try{this.i=new t.a.$a}catch(r){this.i=new Tu}this.u=new Tu,this.f=w(this.Vb,this),this.b={}}function Vu(){return Du||(Du=new ju),Du}function qu(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Hu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Bu(t,e,n){return n=Hu(e,n),"local"==e.F&&(t.b[n]=null),qu(t,e.F).T(n)}function Wu(t){t.c&&(clearInterval(t.c),t.c=null)}function Gu(t){this.a=t,this.b=Vu()}(t=ju.prototype).get=function(t,e){return qu(this,t.F).get(Hu(t,e))},t.set=function(t,e,n){var r=Hu(t,n),i=this,o=qu(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=Hu(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),lt(this.a)&&(qu(this,"local").ba(this.f),this.h||(ir()||!Ur())&&s.indexedDB||!this.l||function(t){Wu(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Qe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Vb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Hu(t,e),this.a[t]&&(Q(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),lt(this.a)&&(qu(this,"local").ha(this.f),Wu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?qu(this,"local").ha(this.f):Wu(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.ib(e))},Gt&&te&&10==te&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else q(t,w(this.ib,this))},t.ib=function(t){this.a[t]&&q(this.a[t],(function(t){t()}))};var zu,Qu={name:"authEvent",F:"local"};function $u(){this.a=Vu()}function Ku(t,e){this.b=Yu,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===zu&&(zu=s.Int32Array?new Int32Array(rc):rc),this.reset()}E(Ku,(function(){this.b=-1}));for(var Yu=64,Ju=Yu-1,Xu=[],Zu=0;Zu<Ju;Zu++)Xu[Zu]=0;var tc=$(128,Xu);function ec(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|zu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function nc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ec(t),i=0);else{if(!l(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ec(t),i=0)}}t.c=i,t.g+=n}Ku.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):K(this.h)};var rc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ic(){Ku.call(this,8,oc)}E(ic,Ku);var oc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function sc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new $u,this.g=new Gu(this.h),this.f=null,this.b=[],this.a=this.c=null}function ac(t){return new I("invalid-cordova-configuration",t)}function uc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function cc(t){return t.f||(t.f=t.ka().then((function(){return new me((function(e){t.Ca((function n(r){return e(r),t.Qa(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),hc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Ji(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Rr(Pn(o=Ln(i),"firebaseError")||null))?C(o):null)?new Do(r.c,r.b,null,null,o,null,r.S()):new Do(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}uc(t,i)}))}var n=new Do("unknown",null,null,null,new I("no-auth-event")),r=!1,i=En(500).then((function(){return hc(t).then((function(){r||uc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Ir("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Fo||(Fo=new Lo),function(t){var e=Fo;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Ir("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function hc(t){var e=null;return function(t){return t.b.get(Qu,t.a).then((function(t){return Po(t)}))}(t.g).then((function(n){return e=n,Bu((n=t.g).b,Qu,n.a)})).then((function(){return e}))}function lc(t){this.a=t,this.b=Vu()}(t=sc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(pr(void 0)?fr().then((function(){return new me((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Te(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Ir("universalLinks.subscribe",s))throw ac("cordova-universal-links-plugin-fix is not installed");if(void 0===Ir("BuildInfo.packageName",s))throw ac("cordova-plugin-buildinfo is not installed");if("function"!=typeof Ir("cordova.plugins.browsertab.openUrl",s))throw ac("cordova-plugin-browsertab is not installed");if("function"!=typeof Ir("cordova.InAppBrowser.open",s))throw ac("cordova-plugin-inappbrowser is not installed")}),(function(){throw new I("cordova-not-ready")}))},t.Lb=function(t,e){return e(new I("operation-not-supported-in-this-environment")),Ce()},t.Jb=function(){return Te(new I("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return Te(new I("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,h=null;return this.c=Ce().then((function(){return Oo(e),cc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Do(e,r,null,o,new I("no-auth-event"),null,i),u=Ir("BuildInfo.packageName",s);if("string"!=typeof u)throw new I("invalid-cordova-configuration");var c=Ir("BuildInfo.displayName",s),h={};if(Er().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Er().toLowerCase().match(/android/))return Te(new I("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=function(t){var e=new ic;nc(e,t),t=[];var n=8*e.g;nc(e,tc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ec(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return B(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var l=ou(t.u,t.i,t.l,e,n,null,r,t.m,h,t.s,i);return t.ka().then((function(){var e=t.h;return t.w.a.set(Qu,a.v(),e)})).then((function(){var e=Ir("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new I("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Ir("cordova.plugins.browsertab.openUrl",s)))throw new I("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Ir("cordova.InAppBrowser.open",s)))throw new I("invalid-cordova-configuration");e=Er(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new me((function(t,e){u=function(){var e=Ir("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(u),h=function(){Mr()&&c()},o.addEventListener("resume",c=function(){a||(a=En(2e3).then((function(){e(new I("redirect-cancelled-by-user"))})))},!1),Er().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return hc(i).then((function(){throw t}))}))})).ma((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),a&&a.cancel(),u&&i.Qa(u),i.c=null}))},t.Ca=function(t){this.b.push(t),cc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Do("unknown",null,null,null,new I("no-auth-event")),t(e))}))},t.Qa=function(t){Q(this.b,(function(e){return e==t}))};var fc={name:"pendingRedirect",F:"session"};function pc(t){return Bu(t.b,fc,t.a)}function dc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Nc,this.B=new Dc,this.g=new lc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=vc(this.D,this.u,this.m,T)}function vc(t,e,n,r){var i=Xv.a.SDK_VERSION||null;return pr()?new sc(t,e,n,i,r):new eu(t,e,n,i,r)}function yc(t){t.f||(t.f=!0,t.a.Ca(t.l));var e=t.a;return t.a.ka().o((function(n){throw t.a==e&&t.reset(),n}))}function mc(t){t.a.Ub()&&yc(t).o((function(e){var n=new Do("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Ic(e)&&t.s(n)})),t.a.Qb()||kc(t.b)}function gc(t,e){G(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(fc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?pc(t.g).then((function(){yc(t).o((function(e){var n=new Do("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Ic(e)&&t.s(n)}))})):mc(t)})).o((function(){mc(t)}))}function wc(t,e){Q(t.h,(function(t){return t==e}))}dc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=vc(this.D,this.u,this.m),this.i={}},dc.prototype.s=function(t){if(!t)throw new I("invalid-auth-event");if(6e5<=b()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=b())),e=!0;break}}return kc(this.b),e};var _c=new Lr(2e3,1e4),bc=new Lr(3e4,6e4);function Ec(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ca(t.l))}),(function(){t.reset()}),i,o,s)}function Ic(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Cc(t,e,n,r,i){var o;return function(t){return t.b.set(fc,"pending",t.a)}(t.g).then((function(){return t.a.Kb(e,n,r,i).o((function(e){if(Ic(e))throw new I("operation-not-supported-in-this-environment");return o=e,pc(t.g).then((function(){throw o}))})).then((function(){return t.a.Xb()?new me((function(){})):pc(t.g).then((function(){return t.pa()})).then((function(){})).o((function(){}))}))}))}function Tc(t,e,n,r,i){return t.a.Lb(r,(function(t){e.la(n,null,t,i)}),_c.get())}dc.prototype.pa=function(){return this.b.pa()};var Sc={};function Ac(t,e,n){var r=e+":"+n;return Sc[r]||(Sc[r]=new dc(t,e,n)),Sc[r]}function Nc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function kc(t){t.g||(t.g=!0,Oc(t,!1,null,null))}function xc(t){t.g&&!t.i&&Oc(t,!1,null,null)}function Rc(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Oc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Te(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Rc(t,n):Rc(t,{user:null}),t.f=[],t.c=[]}function Dc(){}function Pc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Lc(t,e){this.a=e,Br(this,"verificationId",t)}function Mc(t,e,n,r){return new ko(t).cb(e,n).then((function(t){return new Lc(t,r)}))}function Fc(t){var e=Fi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Wr(this,{token:t,expirationTime:Fr(1e3*e.exp),authTime:Fr(1e3*e.auth_time),issuedAtTime:Fr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Uc(t,e,n){var r=e&&e[Vc];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new Xi(null,r),this.b=[];var i=this;q(e[jc]||[],(function(t){(t=$r(t))&&i.b.push(t)})),Br(this,"auth",this.a),Br(this,"session",this.c),Br(this,"hints",this.b)}Nc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Nc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Oc(this,!0,null,t.a),Ce()):e.Da(n,r)?function(t,e,n){n=n.Da(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.S(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Oc(t,a,e,null)})).o((function(e){Oc(t,a,null,e)}))}(this,t,e):Te(new I("invalid-auth-event")):(Oc(this,!1,null,null),Ce())}else Te(new I("invalid-auth-event"))},Nc.prototype.pa=function(){var t=this;return new me((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new I("timeout");t.a&&t.a.cancel(),t.a=En(bc.get()).then((function(){t.b||(t.g=!0,Oc(t,!0,null,e))}))}(t))}))},Dc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.la(t.c,null,t.a,t.b),Ce()):e.Da(n,r)?function(t,e){var n=t.b,r=t.c;e.Da(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.la(r,t,null,n)})).o((function(t){e.la(r,null,t,n)}))}(t,e):Te(new I("invalid-auth-event"))}else Te(new I("invalid-auth-event"))},Lc.prototype.confirm=function(t){return t=xo(this.verificationId,t),this.a(t)};var jc="mfaInfo",Vc="mfaPendingCredential";function qc(t,e,n,r){I.call(this,"multi-factor-auth-required",r,e),this.b=new Uc(t,e,n),Br(this,"resolver",this.b)}function Hc(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new qc(e,t.serverResponse,n,t.message)}catch(r){}return null}function Bc(){}function Wc(t){Br(this,"factorId",t.ea),this.a=t}function Gc(t){if(Wc.call(this,t),this.a.ea!=ko.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function zc(t,e){for(var n in ze.call(this,t),e)this[n]=e[n]}function Qc(t,e){this.a=t,this.b=[],this.c=w(this.wc,this),on(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&q(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Jr]=t.uid),t.displayName&&(r[Kr]=t.displayName),t.enrollmentTime&&(r[Yr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Xr]=t.phoneNumber);try{e=new Zr(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),$c(this,n)}function $c(t,e){t.b=e,Br(t,"enrolledFactors",e)}function Kc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Yc(t){this.c=t,this.b=this.a=null}function Jc(t){return t.b&&1e3*t.b.c||0}function Xc(t,e){var n=e.refreshToken;t.b=Mi(e[Hs]||""),t.a=n}function Zc(t,e){this.a=t||null,this.b=e||null,Wr(this,{lastSignInTime:Fr(e||null),creationTime:Fr(t||null)})}function th(t,e,n,r,i,o){Wr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function eh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=Xv.a.SDK_VERSION?br(Xv.a.SDK_VERSION):null,this.a=new Vs(this.l,k(T),t),this.b=new Yc(this.a),uh(this,e[Hs]),Xc(this.b,e),Br(this,"refreshToken",this.b.a),lh(this,n||{}),mn.call(this),this.P=!1,this.s&&Tr()&&(this.i=Ac(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=function(t){return new Kc((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=Jc(t.b)-b()-3e5;return 0<e?e:0}))}(this),this.Z=w(this.Ma,this);var r=this;this.oa=null,this.za=function(t){r.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){rh(r,t.c)},this.$=null,this.O=new Qc(this,n),Br(this,"multiFactor",this.O)}function nh(t,e){t.aa&&un(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&on(e,"languageCodeChanged",t.za)}function rh(t,e){t.W=e,$s(t.a,Xv.a.SDK_VERSION?br(Xv.a.SDK_VERSION,t.W):null)}function ih(t,e){t.$&&un(t.$,"frameworkChanged",t.ya),(t.$=e)&&on(e,"frameworkChanged",t.ya)}function oh(t){try{return Xv.a.app(t.m).auth()}catch(e){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function sh(t){t.D||t.B.b||(t.B.start(),un(t,"tokenChanged",t.Z),on(t,"tokenChanged",t.Z))}function ah(t){un(t,"tokenChanged",t.Z),t.B.stop()}function uh(t,e){t.xa=e,Br(t,"_lat",e)}function ch(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Ae(e).then((function(){return t}))}function hh(t){t.i&&!t.P&&(t.P=!0,gc(t.i,t))}function lh(t,e){Wr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new Zc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function fh(){}function ph(t){return Ce().then((function(){if(t.D)throw new I("app-deleted")}))}function dh(t){return B(t.providerData,(function(t){return t.providerId}))}function vh(t,e){e&&(yh(t,e.providerId),t.providerData.push(e))}function yh(t,e){Q(t.providerData,(function(t){return t.providerId==e}))}function mh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Br(t,e,n)}function gh(t,e){t!=e&&(Wr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),Br(t,"metadata",e.metadata?function(t){return new Zc(t.a,t.b)}(e.metadata):new Zc),q(e.providerData,(function(e){vh(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Br(t,"refreshToken",t.b.a),$c(t.O,e.O.b))}function wh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return Wa(t.a,ba,{idToken:e}).then(w(t.Ic,t))}(t,e).then((function(){return n||mh(t,"isAnonymous",!1),e}))}))}function _h(t,e){e[Hs]&&t.xa!=e[Hs]&&(Xc(t.b,e),t.dispatchEvent(new zc("tokenChanged")),uh(t,e[Hs]),mh(t,"refreshToken",t.b.a))}function bh(t,e){return wh(t).then((function(){if(G(dh(t),e))return ch(t).then((function(){throw new I("provider-already-linked")}))}))}function Eh(t,e,n){return Gr({user:t,credential:Ro(e),additionalUserInfo:e=Hi(e),operationType:n})}function Ih(t,e){return _h(t,e),t.reload().then((function(){return t}))}function Ch(t,e,n,r,i){if(!Tr())return Te(new I("operation-not-supported-in-this-environment"));if(t.h&&!i)return Te(t.h);var o=qi(n.providerId),s=Or(t.uid+":::"),a=null;(!Nr()||dr())&&t.s&&n.isOAuthProvider&&(a=ou(t.s,t.l,t.m,e,n,null,s,Xv.a.SDK_VERSION||null,null,null,t.tenantId));var u=cr(a,o&&o.ta,o&&o.sa);return r=r().then((function(){if(Sh(t),!i)return t.I().then((function(){}))})).then((function(){return Ec(t.i,u,e,n,s,!!a,t.tenantId)})).then((function(){return new me((function(n,r){t.la(e,null,new I("cancelled-popup-request"),t.g||null),t.f=n,t.w=r,t.g=s,t.c=Tc(t.i,t,e,u,s)}))})).then((function(t){return u&&ur(u),t?Gr(t):null})).o((function(t){throw u&&ur(u),t})),Ah(t,r,i)}function Th(t,e,n,r,i){if(!Tr())return Te(new I("operation-not-supported-in-this-environment"));if(t.h&&!i)return Te(t.h);var o=null,s=Or(t.uid+":::");return r=r().then((function(){if(Sh(t),!i)return t.I().then((function(){}))})).then((function(){return t.fa=s,ch(t)})).then((function(e){return t.ga&&(e=(e=t.ga).b.set(xh,t.v(),e.a)),e})).then((function(){return Cc(t.i,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ga)return Rh(t.ga);throw o})).then((function(){if(o)throw o})),Ah(t,r,i)}function Sh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Ah(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Te(t.h)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new zc("userInvalidated")),t.h=e),e}))}(t,e,n);return t.N.push(r),r.ma((function(){z(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Hc(e.v(),oh(t),w(t.hc,t))),n||e}))}function Nh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Hs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new eh(e,n,t);return t.providerData&&q(t.providerData,(function(t){t&&vh(r,Gr(t))})),t.redirectEventId&&(r.fa=t.redirectEventId),r}function kh(t){this.a=t,this.b=Vu()}Uc.prototype.Pc=function(t){var e=this;return t.ob(this.a.b,this.c).then((function(t){var n=ft(e.f);return delete n[jc],delete n[Vc],dt(n,t),e.g(n)}))},E(qc,I),Bc.prototype.ob=function(t,e,n){return e.type==Zi?function(t,e,n,r){return n.Fa().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:No(t.a)}),Wa(e,wa,n)}))}(this,t,e,n):function(t,e,n){return n.Fa().then((function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:No(t.a)}),Wa(e,_a,n)}))}(this,t,e)},E(Wc,Bc),E(Gc,Wc),E(zc,ze),(t=Qc.prototype).wc=function(t){$c(this,function(t){var e=[];return q(t.mfaInfo||[],(function(t){(t=$r(t))&&e.push(t)})),e}(t.ed))},t.Ob=function(){return this.a.I().then((function(t){return new Xi(t,null)}))},t.dc=function(t,e){var n=this,r=this.a.a;return this.Ob().then((function(n){return t.ob(r,n,e)})).then((function(t){return _h(n.a,t),n.a.reload()}))},t.$c=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Wa(r,Ba,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return $c(e,r),_h(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.v=function(){return{multiFactor:{enrolledFactors:B(this.b,(function(t){return t.v()}))}}},Kc.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=En(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=s.document,e=null;return Mr()||!t?Ce():new me((function(n){e=function(){Mr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},Kc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Yc.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:Jc(this)}},Yc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Te(new I("user-token-expired")):t||!this.b||b()>Jc(this)-3e4?this.a?function(t,e){return function(t,e){return new me((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Ks(t,t.u+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(za(t)):t.access_token&&t.refresh_token?n(t):r(new I("internal-error")):r(new I("network-request-failed"))}),"POST",Qn(e).toString(),t.g,t.m.get()):r(new I("internal-error"))}))}(t.c,e).then((function(e){return t.b=Mi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},Zc.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(eh,mn),eh.prototype.va=function(t){this.oa=t,Qs(this.a,t)},eh.prototype.ja=function(){return this.oa},eh.prototype.Ea=function(){return K(this.W)},eh.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Br(eh.prototype,"providerId","firebase"),(t=eh.prototype).reload=function(){var t=this;return Ah(this,ph(this).then((function(){return wh(t).then((function(){return ch(t)})).then(fh)})))},t.mc=function(t){return this.I(t).then((function(t){return new Fc(t)}))},t.I=function(t){var e=this;return Ah(this,ph(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new I("internal-error");return t.accessToken!=e.xa&&(uh(e,t.accessToken),e.dispatchEvent(new zc("tokenChanged"))),mh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new I("internal-error");lh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?B(t,(function(t){return new th(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)vh(this,e[n]);mh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new zc("userReloaded",{ed:t}))},t.Jc=function(t){return qr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Ah(this,t.c(this.a,this.uid).then((function(t){return _h(e,t),n=Eh(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Ac=function(t){return qr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(t){var e=this,n=null;return Ah(this,bh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Eh(e,t,"link"),Ih(e,t)})).then((function(){return n})))},t.Bc=function(t,e){var n=this;return Ah(this,bh(this,"phone").then((function(){return Mc(oh(n),t,e,w(n.mb,n))})))},t.Kc=function(t,e){var n=this;return Ah(this,Ce().then((function(){return Mc(oh(n),t,e,w(n.pb,n))})),!0)},t.xb=function(t){var e=this;return Ah(this,this.I().then((function(n){return e.a.xb(n,t)})).then((function(t){return _h(e,t),e.reload()})))},t.cd=function(t){var e=this;return Ah(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return _h(e,t),e.reload()})))},t.yb=function(t){var e=this;return Ah(this,this.I().then((function(n){return e.a.yb(n,t)})).then((function(t){return _h(e,t),e.reload()})))},t.zb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return ph(this);var e=this;return Ah(this,this.I().then((function(n){return e.a.zb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return _h(e,t),mh(e,"displayName",t.displayName||null),mh(e,"photoURL",t.photoUrl||null),q(e.providerData,(function(t){"password"===t.providerId&&(Br(t,"displayName",e.displayName),Br(t,"photoURL",e.photoURL))})),ch(e)})).then(fh))},t.ad=function(t){var e=this;return Ah(this,wh(this).then((function(n){return G(dh(e),t)?function(t,e,n){return Wa(t,ya,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return q(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),q(dh(e),(function(t){n[t]||yh(e,t)})),n[ko.PROVIDER_ID]||Br(e,"phoneNumber",null),ch(e)})):ch(e).then((function(){throw new I("no-such-provider")}))})))},t.delete=function(){var t=this;return Ah(this,this.I().then((function(e){return Wa(t.a,va,{idToken:e})})).then((function(){t.dispatchEvent(new zc("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");nh(t,null),ih(t,null),t.N=[],t.D=!0,ah(t),Br(t,"refreshToken",null),t.i&&wc(t.i,t)}))},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?w(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?w(this.Ib,this):null},t.Cc=function(t){var e=this;return Ch(this,"linkViaPopup",t,(function(){return bh(e,t.providerId).then((function(){return ch(e)}))}),!1)},t.Lc=function(t){return Ch(this,"reauthViaPopup",t,(function(){return Ce()}),!0)},t.Dc=function(t){var e=this;return Th(this,"linkViaRedirect",t,(function(){return bh(e,t.providerId)}),!1)},t.Mc=function(t){return Th(this,"reauthViaRedirect",t,(function(){return Ce()}),!0)},t.Hb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ah(this,this.I().then((function(n){return ua(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Eh(i,t,"link"),Ih(i,t)})).then((function(){return o})))},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ah(this,Ce().then((function(){return no(ca(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Eh(i,t,"reauthenticate"),_h(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.qb=function(t){var e=this,n=null;return Ah(this,this.I().then((function(e){return n=e,void 0===t||lt(t)?{}:Di(new Ii(t))})).then((function(t){return e.a.qb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Ab=function(t,e){var n=this,r=null;return Ah(this,this.I().then((function(t){return r=t,void 0===e||lt(e)?{}:Di(new Ii(e))})).then((function(e){return n.a.Ab(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.hc=function(t){var e=null,n=this;return Ah(this,t=no(Ce(t),n.uid).then((function(t){return e=Eh(n,t,"reauthenticate"),_h(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.v()},t.v=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&dt(t,this.metadata.v()),q(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),dt(t,this.O.v()),t};var xh={name:"redirectUser",F:"session"};function Rh(t){return Bu(t.b,xh,t.a)}function Oh(t){this.a=t,this.b=Vu(),this.c=null,this.f=function(t){var e=Lh("local"),n=Lh("session"),r=Lh("none");return function(t,e,n){var r=Hu(e,n),i=qu(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Rr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Ph,t.a).then((function(t){return t?Lh(t):e}))}))}))})).then((function(e){return t.c=e,Dh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Lh("local"),this.a,w(this.g,this))}function Dh(t,e){var n,r=[];for(n in Uu)Uu[n]!==e&&r.push(Bu(t.b,Lh(Uu[n]),t.a));return r.push(Bu(t.b,Ph,t.a)),function(t){return new me((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Se(t[a],_(o,a),s);else e(i)}))}(r)}Oh.prototype.g=function(){var t=this,e=Lh("local");jh(this,(function(){return Ce().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Dh(t,"local").then((function(){t.c=e}))}))}))};var Ph={name:"persistence",F:"session"};function Lh(t){return{name:"authUser",F:t}}function Mh(t,e){return jh(t,(function(){return t.b.set(t.c,e.v(),t.a)}))}function Fh(t){return jh(t,(function(){return Bu(t.b,t.c,t.a)}))}function Uh(t,e){return jh(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),Nh(t||{})}))}))}function jh(t,e){return t.f=t.f.then(e,e),t.f}function Vh(t){if(this.l=!1,Br(this,"settings",new Pc),Br(this,"app",t),!Qh(this).options||!Qh(this).options.apiKey)throw new I("invalid-api-key");t=Xv.a.SDK_VERSION?br(Xv.a.SDK_VERSION):null,this.b=new Vs(Qh(this).options&&Qh(this).options.apiKey,k(T),t),this.P=[],this.m=[],this.O=[],this.$b=Xv.a.INTERNAL.createSubscribe(w(this.xc,this)),this.W=void 0,this.ac=Xv.a.INTERNAL.createSubscribe(w(this.yc,this)),Gh(this,null),this.i=new Oh(Qh(this).options.apiKey+":"+Qh(this).name),this.B=new kh(Qh(this).options.apiKey+":"+Qh(this).name),this.Z=Jh(this,function(t){var e=Qh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(xh,t.a).then((function(t){return t&&e&&(t.authDomain=e),Nh(t||{})}))}(t.B,Qh(t).options.authDomain).then((function(e){return(t.D=e)&&(e.ga=t.B),Rh(t.B)}));return Jh(t,e)}(t).then((function(){return Uh(t.i,e)})).then((function(e){return e?(e.ga=t.B,t.D&&(t.D.fa||null)==(e.fa||null)?e:e.reload().then((function(){return Mh(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Fh(t.i)}))):null})).then((function(e){Gh(t,e||null)}));return Jh(t,n)}(this)),this.h=Jh(this,function(t){return t.Z.then((function(){return Wh(t)})).o((function(){})).then((function(){if(!t.l)return t.oa()})).o((function(){})).then((function(){if(!t.l){t.aa=!0;var e=t.i;e.b.addListener(Lh("local"),e.a,t.oa)}}))}(this)),this.aa=!1,this.oa=w(this.Xc,this),this.Ma=w(this.ca,this),this.xa=w(this.jc,this),this.ya=w(this.uc,this),this.za=w(this.vc,this),this.a=null,function(t){var e=Qh(t).options.authDomain,n=Qh(t).options.apiKey;e&&Tr()&&(t.Zb=t.Z.then((function(){if(!t.l){if(t.a=Ac(e,n,Qh(t).name),gc(t.a,t),$h(t)&&hh($h(t)),t.D){hh(t.D);var r=t.D;r.va(t.ja()),nh(r,t),rh(r=t.D,t.N),ih(r,t),t.D=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Ec,this),this.s=0,mn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),t.$=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),t.R=null}(this),this.N=[]}function qh(t){ze.call(this,"languageCodeChanged"),this.g=t}function Hh(t){ze.call(this,"frameworkChanged"),this.c=t}function Bh(t){return t.Zb||Te(new I("auth-domain-config-required"))}function Wh(t){if(!Tr())return Te(new I("operation-not-supported-in-this-environment"));var e=Bh(t).then((function(){return t.a.pa()})).then((function(t){return t?Gr(t):null}));return Jh(t,e)}function Gh(t,e){$h(t)&&(function(t,e){Q(t.R,(function(t){return t==e}))}($h(t),t.Ma),un($h(t),"tokenChanged",t.xa),un($h(t),"userDeleted",t.ya),un($h(t),"userInvalidated",t.za),ah($h(t))),e&&(e.R.push(t.Ma),on(e,"tokenChanged",t.xa),on(e,"userDeleted",t.ya),on(e,"userInvalidated",t.za),0<t.s&&sh(e)),Br(t,"currentUser",e),e&&(e.va(t.ja()),nh(e,t),rh(e,t.N),ih(e,t))}function zh(t,e){var n=null,r=null;return Jh(t,e.then((function(e){return n=Ro(e),r=Hi(e),function(t,e){var n={};return n.apiKey=Qh(t).options.apiKey,n.authDomain=Qh(t).options.authDomain,n.appName=Qh(t).name,t.Z.then((function(){return function(t,e,n,r){var i=new eh(t,e);return n&&(i.ga=n),r&&rh(i,r),i.reload().then((function(){return i}))}(n,e,t.B,t.Ea())})).then((function(e){return $h(t)&&e.uid==$h(t).uid?(gh($h(t),e),t.ca(e)):(Gh(t,e),hh(e),t.ca(e))})).then((function(){Yh(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Hc(e.v(),t,w(t.ic,t))),n||e})).then((function(){return Gr({user:$h(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Qh(t){return t.app}function $h(t){return t.currentUser}function Kh(t){return $h(t)&&$h(t)._lat||null}function Yh(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Kh(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](Kh(t))}}function Jh(t,e){return t.P.push(e),e.ma((function(){z(t.P,e)})),e}function Xh(){}function Zh(){this.a={},this.b=1e12}Oh.prototype.tb=function(t){var e=null,n=this;return function(t){var e=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");t:{for(r in Uu)if(Uu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(yr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!Cr()&&"none"!==t)throw n}}(t),jh(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Dh(n,t)})).then((function(){if(n.c=Lh(t),e)return n.b.set(n.c,e,n.a)})):Ce()}))},E(Vh,mn),E(qh,ze),E(Hh,ze),(t=Vh.prototype).tb=function(t){return Jh(this,t=this.i.tb(t))},t.va=function(t){this.$===t||this.l||(this.$=t,Qs(this.b,this.$),this.dispatchEvent(new qh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=s.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),$s(this.b,Xv.a.SDK_VERSION?br(Xv.a.SDK_VERSION,this.N):null),this.dispatchEvent(new Hh(this.N))},t.Ea=function(){return K(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:Qh(this).options.apiKey,authDomain:Qh(this).options.authDomain,appName:Qh(this).name,currentUser:$h(this)&&$h(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then((function(){return zh(i,aa(i.b,o))}))},t.Vc=function(t){if(!Tr())return Te(new I("operation-not-supported-in-this-environment"));var e=this,n=qi(t.providerId),r=Or(),i=null;(!Nr()||dr())&&Qh(this).options.authDomain&&t.isOAuthProvider&&(i=ou(Qh(this).options.authDomain,Qh(this).options.apiKey,Qh(this).name,"signInViaPopup",t,null,r,Xv.a.SDK_VERSION||null,null,null,this.S()));var o=cr(i,n&&n.ta,n&&n.sa);return Jh(this,n=Bh(this).then((function(n){return Ec(n,o,"signInViaPopup",t,r,!!i,e.S())})).then((function(){return new me((function(t,n){e.la("signInViaPopup",null,new I("cancelled-popup-request"),e.g),e.f=t,e.w=n,e.g=r,e.c=Tc(e.a,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&ur(o),t?Gr(t):null})).o((function(t){throw o&&ur(o),t})))},t.Wc=function(t){if(!Tr())return Te(new I("operation-not-supported-in-this-environment"));var e=this;return Jh(this,Bh(this).then((function(){return function(t){return jh(t,(function(){return t.b.set(Ph,t.c.F,t.a)}))}(e.i)})).then((function(){return Cc(e.a,"signInViaRedirect",t,void 0,e.S())})))},t.pa=function(){var t=this;return Wh(this).then((function(e){return t.a&&xc(t.a.b),e})).o((function(e){throw t.a&&xc(t.a.b),e}))},t.bd=function(t){if(!t)return Te(new I("null-user"));if(this.R!=t.tenantId)return Te(new I("tenant-id-mismatch"));var e=this,n={};n.apiKey=Qh(this).options.apiKey,n.authDomain=Qh(this).options.authDomain,n.appName=Qh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Hs]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new eh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ga=n),r&&rh(e,r),gh(e,t),e}(t,n,e.B,e.Ea());return Jh(this,this.h.then((function(){if(Qh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return $h(e)&&t.uid==$h(e).uid?(gh($h(e),t),e.ca(t)):(Gh(e,r),hh(r),e.ca(r))})).then((function(){Yh(e)})))},t.wb=function(){var t=this;return Jh(this,this.h.then((function(){return t.a&&xc(t.a.b),$h(t)?(Gh(t,null),Fh(t.i).then((function(){Yh(t)}))):Ce()})))},t.Xc=function(){var t=this;return Uh(this.i,Qh(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=$h(t)&&e){n=$h(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return gh($h(t),e),$h(t).I();($h(t)||e)&&(Gh(t,e),e&&(hh(e),e.ga=t.B),t.a&&gc(t.a,t),Yh(t))}}))},t.ca=function(t){return Mh(this.i,t)},t.jc=function(){Yh(this),this.ca($h(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then((function(){return zh(e,Ce(t))}))},t.xc=function(t){var e=this;this.addAuthTokenListener((function(){t.next($h(e))}))},t.yc=function(t){var e=this;!function(t,e){t.O.push(e),Jh(t,t.h.then((function(){!t.l&&G(t.O,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(Kh(t)))})))}(this,(function(){t.next($h(e))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){f(t)?t($h(r)):f(t.next)&&t.next($h(r))})),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then((function(){r.W=r.getUid(),f(t)?t($h(r)):f(t.next)&&t.next($h(r))})),this.ac(t,e,n)},t.kc=function(t){var e=this;return Jh(this,this.h.then((function(){return $h(e)?$h(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Rc=function(t){var e=this;return this.h.then((function(){return zh(e,Wa(e.b,Ua,{token:t}))})).then((function(t){var n=t.user;return mh(n,"isAnonymous",!1),e.ca(n),t}))},t.Sc=function(t,e){var n=this;return this.h.then((function(){return zh(n,Wa(n.b,ja,{email:t,password:e}))}))},t.cc=function(t,e){var n=this;return this.h.then((function(){return zh(n,Wa(n.b,pa,{email:t,password:e}))}))},t.Ya=function(t){var e=this;return this.h.then((function(){return zh(e,t.ia(e.b))}))},t.Qc=function(t){return qr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var t=this;return this.h.then((function(){var e=$h(t);if(e&&e.isAnonymous){var n=Gr({providerId:null,isNewUser:!1});return Gr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return zh(t,t.b.vb()).then((function(e){var n=e.user;return mh(n,"isAnonymous",!0),t.ca(n),e}))}))},t.getUid=function(){return $h(this)&&$h(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&$h(this)&&sh($h(this))},t.Nc=function(t){var e=this;q(this.m,(function(n){n==t&&e.s--})),0>this.s&&(this.s=0),0==this.s&&$h(this)&&ah($h(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),Jh(this,this.h.then((function(){e.l||G(e.m,t)&&t(Kh(e))})))},t.removeAuthTokenListener=function(t){Q(this.m,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Lh("local"),t.a,this.oa),this.a&&(wc(this.a,this),xc(this.a.b)),Promise.resolve()},t.fc=function(t){return Jh(this,function(t,e){return Wa(t,da,{identifier:e,continueUri:Sr()?or():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},t.zc=function(t){return!!To(t)},t.sb=function(t,e){var n=this;return Jh(this,Ce().then((function(){var t=new Ii(e);if(!t.c)throw new I("argument-error",Si+" must be true when sending sign in link to email");return Di(t)})).then((function(e){return n.b.sb(t,e)})).then((function(){})))},t.fd=function(t){return this.Pa(t).then((function(t){return t.data.email}))},t.jb=function(t,e){return Jh(this,this.b.jb(t,e).then((function(){})))},t.Pa=function(t){return Jh(this,this.b.Pa(t).then((function(t){return new ti(t)})))},t.fb=function(t){return Jh(this,this.b.fb(t).then((function(){})))},t.rb=function(t,e){var n=this;return Jh(this,Ce().then((function(){return void 0===e||lt(e)?{}:Di(new Ii(e))})).then((function(e){return n.b.rb(t,e)})).then((function(){})))},t.Uc=function(t,e){return Jh(this,Mc(this,t,e,w(this.Ya,this)))},t.Tc=function(t,e){var n=this;return Jh(this,Ce().then((function(){var r=e||or(),i=Co(t,r);if(!(r=To(r)))throw new I("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new I("tenant-id-mismatch");return n.Ya(i)})))},Xh.prototype.render=function(){},Xh.prototype.reset=function(){},Xh.prototype.getResponse=function(){},Xh.prototype.execute=function(){};var tl=null;function el(t,e){return(e=nl(e))&&t.a[e]||null}function nl(t){return(t=void 0===t?1e12:t)?t.toString():null}function rl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ie(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():on(this.f,"click",this.i)}function il(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function ol(){}function sl(){}Zh.prototype.render=function(t,e){return this.a[this.b.toString()]=new rl(t,e),this.b++},Zh.prototype.reset=function(t){var e=el(this,t);t=nl(t),e&&t&&(e.delete(),delete this.a[t])},Zh.prototype.getResponse=function(t){return(t=el(this,t))?t.getResponse():null},Zh.prototype.execute=function(t){(t=el(this,t))&&t.execute()},rl.prototype.getResponse=function(){return il(this),this.b},rl.prototype.execute=function(){il(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},rl.prototype.delete=function(){il(this),this.g=!0,clearTimeout(this.a),this.a=null,un(this.f,"click",this.i)},Br(ol,"FACTOR_ID","phone"),sl.prototype.g=function(){return tl||(tl=new Zh),Ce(tl)},sl.prototype.c=function(){};var al=null;function ul(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var cl=new yt(wt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),hl=new Lr(3e4,6e4);ul.prototype.g=function(t){var e=this;return new me((function(n,r){var i=setTimeout((function(){r(new I("network-request-failed"))}),hl.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new I("internal-error"));delete s[e.a]},Ce(Ds(It(cl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},ul.prototype.c=function(){this.b--};var ll=null;function fl(t,e,n,r,i,o,a){if(Br(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,a?(al||(al=new sl),a=al):(ll||(ll=new ul),a=ll),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[vl])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[yl],!s.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ie(e)||!this.i&&ie(e).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Vs(t,o||null,i||null),this.w=r||function(){return null};var u=this;this.l=[];var c=this.a[pl];this.a[pl]=function(t){if(ml(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Ir(c,s);"function"==typeof e&&e(t)}};var h=this.a[dl];this.a[dl]=function(){if(ml(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Ir(h,s);"function"==typeof t&&t()}}}var pl="callback",dl="expired-callback",vl="sitekey",yl="size";function ml(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function gl(t,e){return t.h.push(e),e.ma((function(){z(t.h,e)})),e}function wl(t){if(t.D)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function _l(t,e,n){var r=!1;try{this.b=n||Xv.a.app()}catch(s){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=Xv.a.SDK_VERSION?br(Xv.a.SDK_VERSION,o):null,fl.call(this,n,t,e,(function(){try{var t=i.b.auth().ja()}catch(e){t=null}return t}),o,k(T),r)}function bl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=El.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=El[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new I("argument-error",t+" failed: "+r)}(t=fl.prototype).Ga=function(){var t=this;return this.f?this.f:this.f=gl(this,Ce().then((function(){if(Sr()&&!vr())return fr();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.w())})).then((function(e){return t.g=e,Wa(t.s,Aa,{})})).then((function(e){t.a[vl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){wl(this);var t=this;return gl(this,this.Ga().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=ie(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!re&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Vt(s.name),'"'),s.type){o.push(' type="',Vt(s.type),'"');var a={};dt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=he(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):oe(o,s)),2<r.length&&ce(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){wl(this);var t=this;return gl(this,this.render().then((function(e){return new me((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Q(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){wl(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){wl(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ie(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},E(_l,fl);var El="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Il(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Cl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Tl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:p}}function Sl(t,e){return{name:t||"",J:"a function",optional:!!e,K:f}}function Al(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Nl(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){return!!e&&!(!e.ia||t&&e.providerId!==t)}}}function kl(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&f(t.Fa)}function xl(t){return p(t)&&"string"==typeof t.uid}function Rl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||!f(t.verify))}}}function Ol(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Dl(t,e){for(var n in e){var r=e[n].name;t[r]=Ml(r,t[n],e[n].j)}}function Pl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_((function(t){return this[t]}),n),set:_((function(t,e,n,r){bl(t,[n],[r],!0),this[e]=r}),r,n,e[n].gb),enumerable:!0})}}function Ll(t,e,n,r){t[e]=Ml(e,n,r)}function Ml(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return bl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Dl(Vh.prototype,{fb:{name:"applyActionCode",j:[Il("code")]},Pa:{name:"checkActionCode",j:[Il("code")]},jb:{name:"confirmPasswordReset",j:[Il("code"),Il("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Il("email"),Il("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Il("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Il("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Ol(Tl(),Sl(),"nextOrObserver"),Sl("opt_error",!0),Sl("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Ol(Tl(),Sl(),"nextOrObserver"),Sl("opt_error",!0),Sl("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Il("email"),Ol(Tl("opt_actionCodeSettings",!0),Al(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Il("email"),Tl("actionCodeSettings")]},tb:{name:"setPersistence",j:[Il("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[Nl()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[Nl()]},Rc:{name:"signInWithCustomToken",j:[Il("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Il("email"),Il("password")]},Tc:{name:"signInWithEmailLink",j:[Il("email"),Il("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Il("phoneNumber"),Rl()]},Vc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Wc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},bd:{name:"updateCurrentUser",j:[Ol({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof eh)}},Al(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Il(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Il("code")]}}),Pl(Vh.prototype,{lc:{name:"languageCode",gb:Ol(Il(),Al(),"languageCode")},ti:{name:"tenantId",gb:Ol(Il(),Al(),"tenantId")}}),(Vh.Persistence=Uu).LOCAL="local",Vh.Persistence.SESSION="session",Vh.Persistence.NONE="none",Dl(eh.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Cl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Cl("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[Nl()]},mb:{name:"linkWithCredential",j:[Nl()]},Bc:{name:"linkWithPhoneNumber",j:[Il("phoneNumber"),Rl()]},Cc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Nl()]},pb:{name:"reauthenticateWithCredential",j:[Nl()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Il("phoneNumber"),Rl()]},Lc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Ol(Tl("opt_actionCodeSettings",!0),Al(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Il(null,!0)]},ad:{name:"unlink",j:[Il("provider")]},xb:{name:"updateEmail",j:[Il("email")]},yb:{name:"updatePassword",j:[Il("password")]},cd:{name:"updatePhoneNumber",j:[Nl("phone")]},zb:{name:"updateProfile",j:[Tl("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Il("email"),Ol(Tl("opt_actionCodeSettings",!0),Al(null,!0),"opt_actionCodeSettings",!0)]}}),Dl(Zh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dl(Xh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dl(me.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Pl(Pc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Cl("appVerificationDisabledForTesting")}}),Dl(Lc.prototype,{confirm:{name:"confirm",j:[Il("verificationCode")]}}),Ll(eo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[uo,Eo,Ao,oo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Ol(Il(),Tl(),"json")]),Ll(Io,"credential",(function(t,e){return new bo(t,e)}),[Il("email"),Il("password")]),Dl(bo.prototype,{v:{name:"toJSON",j:[Il(null,!0)]}}),Dl(fo.prototype,{Aa:{name:"addScope",j:[Il("scope")]},Ia:{name:"setCustomParameters",j:[Tl("customOAuthParameters")]}}),Ll(fo,"credential",po,[Ol(Il(),Tl(),"token")]),Ll(Io,"credentialWithLink",Co,[Il("email"),Il("emailLink")]),Dl(vo.prototype,{Aa:{name:"addScope",j:[Il("scope")]},Ia:{name:"setCustomParameters",j:[Tl("customOAuthParameters")]}}),Ll(vo,"credential",yo,[Ol(Il(),Tl(),"token")]),Dl(mo.prototype,{Aa:{name:"addScope",j:[Il("scope")]},Ia:{name:"setCustomParameters",j:[Tl("customOAuthParameters")]}}),Ll(mo,"credential",go,[Ol(Il(),Ol(Tl(),Al()),"idToken"),Ol(Il(),Al(),"accessToken",!0)]),Dl(wo.prototype,{Ia:{name:"setCustomParameters",j:[Tl("customOAuthParameters")]}}),Ll(wo,"credential",_o,[Ol(Il(),Tl(),"token"),Il("secret",!0)]),Dl(lo.prototype,{Aa:{name:"addScope",j:[Il("scope")]},credential:{name:"credential",j:[Ol(Il(),Ol(Tl(),Al()),"optionsOrIdToken"),Ol(Il(),Al(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Tl("customOAuthParameters")]}}),Dl(so.prototype,{v:{name:"toJSON",j:[Il(null,!0)]}}),Dl(ro.prototype,{v:{name:"toJSON",j:[Il(null,!0)]}}),Ll(ko,"credential",xo,[Il("verificationId"),Il("verificationCode")]),Dl(ko.prototype,{cb:{name:"verifyPhoneNumber",j:[Ol(Il(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?kl(t.session,Zi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?kl(t.session,to)&&xl(t.multiFactorHint):t.session&&t.multiFactorUid?kl(t.session,to)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Rl()]}}),Dl(So.prototype,{v:{name:"toJSON",j:[Il(null,!0)]}}),Dl(I.prototype,{toJSON:{name:"toJSON",j:[Il(null,!0)]}}),Dl(jo.prototype,{toJSON:{name:"toJSON",j:[Il(null,!0)]}}),Dl(Uo.prototype,{toJSON:{name:"toJSON",j:[Il(null,!0)]}}),Dl(qc.prototype,{toJSON:{name:"toJSON",j:[Il(null,!0)]}}),Dl(Uc.prototype,{Pc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}]}}),Dl(Qc.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}},Il("displayName",!0)]},$c:{name:"unenroll",j:[Ol({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:xl},Il(),"multiFactorInfoIdentifier")]}}),Dl(_l.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ll(di,"parseLink",Ei,[Il("link")]),Ll(ol,"assertion",(function(t){return new Gc(t)}),[Nl("phone")]),function(){if(void 0===Xv.a||!Xv.a.INTERNAL||!Xv.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ni,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ei,VERIFY_AND_CHANGE_EMAIL:ri,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Vh,AuthCredential:eo,Error:I};Ll(t,"EmailAuthProvider",Io,[]),Ll(t,"FacebookAuthProvider",fo,[]),Ll(t,"GithubAuthProvider",vo,[]),Ll(t,"GoogleAuthProvider",mo,[]),Ll(t,"TwitterAuthProvider",wo,[]),Ll(t,"OAuthProvider",lo,[Il("providerId")]),Ll(t,"SAMLAuthProvider",ho,[Il("providerId")]),Ll(t,"PhoneAuthProvider",ko,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Vh)}}]),Ll(t,"RecaptchaVerifier",_l,[Ol(Il(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Tl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Xv.a.app.App)}}]),Ll(t,"ActionCodeURL",di,[]),Ll(t,"PhoneMultiFactorGenerator",ol,[]),Xv.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Vh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Xv.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.kc,t),addAuthTokenListener:w(t.bc,t),removeAuthTokenListener:w(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Xv.a.registerVersion("@firebase/auth","0.14.1"),Xv.a.INTERNAL.extendNamespace({User:eh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});let Zv=(()=>{let t=class{};return t.\u0275mod=me({type:t}),t.\u0275inj=pt({factory:function(e){return new(e||t)},providers:[Yv]}),t})(),ty=(()=>{class t{constructor(t){this.db=t}save(t){this.db.object("/users/"+t.uid).update({name:t.displayName,email:t.email})}get(t){return this.db.object("/users/"+t)}}return t.\u0275fac=function(e){return new(e||t)(Kt($v))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ey=(()=>{class t{constructor(t,e,n){this.userService=t,this.afireAuth=e,this.route=n,this.user$=e.authState}login(){let t=this.route.snapshot.queryParamMap.get("returnUrl")||"/";localStorage.setItem("returnUrl",t),this.afireAuth.auth.signInWithRedirect(new Ud.auth.GoogleAuthProvider)}logout(){this.afireAuth.auth.signOut()}get appUser$(){return this.user$.pipe(rh(t=>t?this.userService.get(t.uid).valueChanges():Xc(null)))}}return t.\u0275fac=function(e){return new(e||t)(Kt(ty),Kt(Yv),Kt(op))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ny(t,e){1&t&&(Ro(0,"li",6),Ro(1,"a",10),rs(2,"Login"),Oo(),Oo())}function ry(t,e){1&t&&(function(t,e,n){const r=Ge(),i=ze(),o=i.firstCreatePass?function(t,e,n,r,i){const o=e.consts,s=qe(o,void 0),a=Lr(e,n[6],0,4,"ng-container",s);return null!==s&&go(a,s),$r(e,n,a,qe(o,void 0)),null!==e.queries&&e.queries.elementStart(e,a),a}(0,i,r):i.data[19];$e(o,!0);const s=r[19]=r[11].createComment("");Li(i,r,s,o),hr(s,r),Ae(o)&&(qr(i,r,o),Vr(i,o,r))}(),Ro(1,"a",17),rs(2,"Manage Orders"),Oo(),Ro(3,"a",18),rs(4,"Manage Products"),Oo(),function(){let t=Qe();const e=ze();Ke()?Ye():(t=t.parent,$e(t,!1)),e.firstCreatePass&&(vn(e,t),Te(t)&&e.queries.elementEnd(t))}())}function iy(t,e){if(1&t){const t=Ge();Ro(0,"li",11),Ro(1,"a",12),rs(2),Oo(),Ro(3,"div",13),Ro(4,"a",14),rs(5,"My Orders"),Oo(),So(6,ry,5,0,"ng-container",15),Ro(7,"a",16),Lo("click",(function(){return Be.lFrame.contextLView=t,Uo().logout()})),rs(8,"Log Out"),Oo(),Oo(),Oo()}if(2&t){const t=Uo();Cr(2),is(" ",t.appUser.name," "),Cr(4),ko("ngIf",t.appUser.isAdmin)}}let oy=(()=>{class t{constructor(t){this.auth=t,t.appUser$.subscribe(t=>this.appUser=t)}logout(){this.auth.logout()}}return t.\u0275fac=function(e){return new(e||t)(Ao(ey))},t.\u0275cmp=pe({type:t,selectors:[["bs-navbar"]],decls:13,vars:2,consts:[[1,"navbar","navbar-expand-md","navbar-light","bg-info","fixed-top"],["routerLink","/",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarsExampleDefault","aria-controls","navbarsExampleDefault","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExampleDefault",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","/shopping-cart",1,"nav-link"],["anonymousUser",""],["ngbDropdown","","class","nav-item dropdown",4,"ngIf","ngIfElse"],["routerLink","/login",1,"nav-link"],["ngbDropdown","",1,"nav-item","dropdown"],["ngbDropdownToggle","","id","dropdown01","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["ngbDropdownMenu","","aria-labelledby","dropdown01",1,"dropdown-menu"],["routerLink","/my/orders",1,"dropdown-item"],[4,"ngIf"],["routerLink","",1,"dropdown-item",3,"click"],["routerLink","/admin/orders",1,"dropdown-item"],["routerLink","/admin/products",1,"dropdown-item"]],template:function(t,e){if(1&t&&(Ro(0,"nav",0),Ro(1,"a",1),rs(2,"Project3B"),Oo(),Ro(3,"button",2),Do(4,"span",3),Oo(),Ro(5,"div",4),Ro(6,"ul",5),Ro(7,"li",6),Ro(8,"a",7),rs(9,"Shopping Cart"),Oo(),Oo(),So(10,ny,3,0,"ng-template",null,8,Da),So(12,iy,9,2,"li",9),Oo(),Oo(),Oo()),2&t){const t=Be.lFrame.contextLView[30];Cr(12),ko("ngIf",e.appUser)("ngIfElse",t)}},directives:[Kh,dd,nc,tl,Zh,Jh],styles:[".dropdown-toggle[_ngcontent-%COMP%]{cursor:pointer}"]}),t})(),sy=(()=>{class t{constructor(t,e,n){this.userService=t,this.auth=e,e.user$.subscribe(e=>{if(e){t.save(e);let r=localStorage.getItem("returnUrl");n.navigateByUrl(r)}})}}return t.\u0275fac=function(e){return new(e||t)(Ao(ty),Ao(ey),Ao(pd))},t.\u0275cmp=pe({type:t,selectors:[["app-root"]],decls:3,vars:0,consts:[["role","main",1,"container"]],template:function(t,e){1&t&&(Do(0,"bs-navbar"),Ro(1,"main",0),Do(2,"router-outlet"),Oo())},directives:[oy,gd],styles:[""]}),t})(),ay=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["app-home"]],decls:2,vars:0,template:function(t,e){1&t&&(Ro(0,"p"),rs(1,"home works!"),Oo())},styles:[""]}),t})(),uy=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["app-products"]],decls:2,vars:0,template:function(t,e){1&t&&(Ro(0,"p"),rs(1,"products works!"),Oo())},styles:[""]}),t})(),cy=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["app-shopping-cart"]],decls:2,vars:0,template:function(t,e){1&t&&(Ro(0,"p"),rs(1,"shopping-cart works!"),Oo())},styles:[""]}),t})(),hy=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["app-check-out"]],decls:2,vars:0,template:function(t,e){1&t&&(Ro(0,"p"),rs(1,"check-out works!"),Oo())},styles:[""]}),t})(),ly=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["app-order-success"]],decls:2,vars:0,template:function(t,e){1&t&&(Ro(0,"p"),rs(1,"order-success works!"),Oo())},styles:[""]}),t})(),fy=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["app-my-orders"]],decls:2,vars:0,template:function(t,e){1&t&&(Ro(0,"p"),rs(1,"my-orders works!"),Oo())},styles:[""]}),t})(),py=(()=>{class t{constructor(t){this.auth=t}login(){this.auth.login()}}return t.\u0275fac=function(e){return new(e||t)(Ao(ey))},t.\u0275cmp=pe({type:t,selectors:[["app-login"]],decls:2,vars:0,consts:[[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(Ro(0,"button",0),Lo("click",(function(){return e.login()})),rs(1,"Login with Google"),Oo())},styles:[""]}),t})(),dy=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["app-admin-product"]],decls:2,vars:0,template:function(t,e){1&t&&(Ro(0,"p"),rs(1,"admin-product works!"),Oo())},styles:[""]}),t})(),vy=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=pe({type:t,selectors:[["app-admin-orders"]],decls:2,vars:0,template:function(t,e){1&t&&(Ro(0,"p"),rs(1,"admin-orders works!"),Oo())},styles:[""]}),t})(),yy=(()=>{class t{constructor(t,e){this.auth=t,this.router=e}canActivate(t,e){return this.auth.user$.pipe(F(t=>!!t||(this.router.navigate(["/login"],{queryParams:{returnUrl:e.url}}),!1)))}}return t.\u0275fac=function(e){return new(e||t)(Kt(ey),Kt(pd))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),my=(()=>{class t{constructor(t,e){this.auth=t,this.userService=e}canActivate(){return this.auth.appUser$.pipe(F(t=>t.isAdmin))}}return t.\u0275fac=function(e){return new(e||t)(Kt(ey),Kt(ty))},t.\u0275prov=ft({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const gy=[{path:"",component:ay},{path:"products",component:uy},{path:"shopping-cart",component:cy},{path:"login",component:py},{path:"check-out",component:hy,canActivate:[yy]},{path:"order-success",component:ly,canActivate:[yy]},{path:"my/orders",component:fy,canActivate:[yy]},{path:"admin/products",component:dy,canActivate:[yy,my]},{path:"admin/orders",component:vy,canActivate:[yy,my]}];let wy=(()=>{class t{}return t.\u0275mod=me({type:t,bootstrap:[sy]}),t.\u0275inj=pt({factory:function(e){return new(e||t)},providers:[ey,yy,ty,my],imports:[[Mc,Gd.initializeApp(Ou),Zv,Dv,Kv,Nd.forRoot(gy),Tl]]}),t})();(function(){if(ir)throw new Error("Cannot enable prod mode after platform setup.");rr=!1})(),Pc().bootstrapModule(wy).catch(t=>console.error(t))},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=(15&a)<<2|c>>6,l=63&c;u||(l=64,s||(h=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[h],n[l])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=h(t[n],e[n]));return t}var l=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var p=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,d.prototype.create),i}return r.__extends(e,t),e}(Error),d=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new p(i,a),c=0,h=Object.keys(r);c<h.length;c++){var l=h[c];"_"!==l.slice(-1)&&(l in u&&console.warn('Overwriting FirebaseError base field "'+l+'" can cause unexpected behavior.'),u[l]=r[l])}return u},t}();function v(t,e){return t.replace(y,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var y=/\{\$([^}]+)}/g;function m(t){return JSON.parse(t)}var g=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(c(o[0])||""),n=m(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},w=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((l=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|l>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var l=(s<<5|s>>>27)+i+h+o+n[r]&4294967295;h=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=l}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),_=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=b),void 0===r.error&&(r.error=b),void 0===r.complete&&(r.complete=b);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function b(){}function E(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=l,e.ErrorFactory=d,e.FirebaseError=p,e.Sha1=w,e.assert=o,e.assertionError=s,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=c,e.base64Encode=function(t){var e=a(t);return u.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new _(t,e);return n.subscribe.bind(n)},e.decode=g,e.deepCopy=function(t){return h(void 0,t)},e.deepExtend=h,e.errorPrefix=E,e.getUA=f,e.isAdmin=function(t){var e=g(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return f().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return f().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=g(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=g(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=g(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=m,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(E(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(E(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(E(t,e,r)+"must be a valid firebase namespace.")}},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);